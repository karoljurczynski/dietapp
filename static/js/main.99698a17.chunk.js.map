{"version":3,"sources":["components/left/styles/logo.png","components/left/left.js","components/center/DateChanger.js","components/product_adding_window/AddingForm.js","components/product_adding_window/EditForm.js","components/product_adding_window/AddingList.js","components/product_adding_window/ProductAddingWindow.js","components/product_removing_window/ProductRemovingWindow.js","components/meal/Product.js","components/meal/Meal.js","components/right/Gauge.js","components/MoreWindow/MoreWindow.js","components/exercise/Exercise.js","exercisesList.js","components/settings/Settings.js","components/about/About.js","logo.png","components/login/Login.js","logo_white.png","index.js"],"names":["Logo","className","src","logo","alt","Title","Hamburger","props","onClick","handleHamburger","Quotation","MenuItem","isActive","e","preventDefault","linkTo","target","title","href","value","DateChanger","initialDate","Date","useState","getDate","currentDay","setCurrentDay","getMonth","currentMonth","setCurrentMonth","getFullYear","currentYear","setCurrentYear","useEffect","changeDate","isLeapYear","changeNextDay","previousYear","previousMonth","previousDay","changePreviousDay","userStatus","loginShortcut","translateMonth","initialOptionsStates","AddingForm","optionsStates","setOptionsStates","isFormCompleted","setIsFormCompleted","isStateEqualToProps","setIsStateEqualToProps","checkIfFormCompleted","checkIfStateIsEqualToProps","updatePredefinedProductsInDatabase","newList","a","setDoc","doc","db","list","merge","console","error","getPredefinedProductsFromDatabase","predefinedProductsList","getDoc","querySnapshot","data","handleClearButton","handleFormClearing","handleCancelButton","handleAddWindow","Object","keys","forEach","option","key","type","name","document","querySelector","weight","proteins","fats","carbs","kcal","reps","saveNewProductToList","newProduct","push","onSubmit","handleSerieAdding","htmlFor","id","lastTimeData","training","serie","onChange","handleOnChange","placeholder","warning","maxLength","disabled","style","zIndex","handleProductAdding","keysArray","checkedOptions","searchForCheckedOptions","checkedKey","now","Number","prevOptions","backgroundColor","EditForm","ACTIONS","initialState","productData","useReducer","state","action","payload","warnings","dispatch","addingWindow","filter","pointerEvents","idOfSelectedProduct","handleEditingWindow","handleSavingChanges","handleProductEditing","ReactDOM","createPortal","test","length","nutritionPerOneGram","setValueAsNull","Math","round","getElementById","savedProductList","productSendForEdit","isEditWindowOpened","isAddButtonDisabled","AddingList","newSavedProductList","index","handleAddButtonDisabling","handleSelected","product","currentTarget","productName","fontWeight","background","updateProductSendForEdit","getIndexOfProduct","selectedProduct","isInteger","products","querySelectorAll","returnedBoolean","i","handleProductsAdding","selectedProducts","handlePredefinedProductsAdding","targetId","productList","returnedIndex","editedProduct","indexOfEditedProduct","color","map","AddWindow","isAddingTypeSetAtLeftOption","setAddingType","rootElement","wrapper","hamburger","display","window","innerWidth","isPlaceholderEnabled","RemoveWindow","isRemovingAllButtonPressed","setRemovingAllButtonPressed","isRemoveButtonDisabled","setIsRemoveButtonDisabled","removingWindow","handleRemoveButtonDisabling","item","itemName","handleRemoveButton","selectedIds","handleRemoving","items","handleRemoveWindow","serieCount","Product","ingredients","addIngredientsFunction","subIngredientsFunction","macros","NEGATE_MEAL_STATE","NEGATE_ADDING_WINDOW_STATE","NEGATE_REMOVING_WINDOW_STATE","ADD_PRODUCT","ENABLE_PLACEHOLDER","DISABLE_PLACEHOLDER","SET_WARNING","CLEAR_WARNING","REMOVE_PRODUCT","ADD_TO_SUMMARY","SUB_FROM_SUMMARY","CLEAR_PRODUCTLIST_BEFORE_DAY_CHANGING","ADD_PRODUCT_TO_PRODUCTLIST","Meal","saveProductInDatabase","newProductList","oldProductList","getDocs","collection","user","userId","concat","String","removeProductsFromDatabase","selectedId","splice","isMealOpened","isAddingWindowOpened","isRemovingWindowOpened","countIngredients","mealId","dateIds","dayId","monthId","yearId","summary","CHANGE_NEW_PRODUCT_DATA","checkedIdList","ingredient","setPlaceholderState","loadProductListFromDatabase","clearProductList","isSettingsOpened","disableVisibilityIfEnabled","updateGauges","changePointerEvents","meals","center","meal","overflowY","handleAddingToSummary","object","handleSubstractingFromSummary","left","setValueAsCorrect","setTimeout","modifiedSelectedProducts","checkedIdsList","Gauge","isKcal","percent","rotationDegrees","transform","borderRightColor","borderTopColor","handleRotation","borderColor","amount","MoreWindow","iframe","opacity","handleBackButton","handleMoreWindow","description","marginBottom","difficulty","typeOfExercise","muscles","muscle","allowFullScreen","width","height","properFormLink","Exercise","isExerciseOpened","isAddWindowOpened","isRemoveWindowOpened","isMoreWindowOpened","seriesList","newSerie","exerciseId","trainingId","removeSeriesFromDatabase","selectedSeries","newSeriesList","currentExerciseSeries","databaseSerie","saveSerieInDatabase","getPreviousTrainingDate","previousDateIds","potentialPreviousDateIds","updatedSeriesList","currentlyAddingSerieNumber","indexOfLastSerie","updatedLastSerieData","updatedLastTrainingData","potentialSeries","seriesBackup","JSON","parse","localStorage","getItem","previousTrainingSerie","undefined","clearSeriesList","loadSeriesListFromDatabase","getPotentialSeries","stringify","setItem","countProgress","potentialTrainings","lastTrainingData","message","percentValue","progressValue","lastTrainingTotal","countTotalWeight","toFixed","top","bottom","totalWeight","countTotalReps","totalReps","exercises","isCategoryOpened","isAccountCategory","isNutritionCategory","isTrainingCategory","settingsData","account","nutrition","dailyDemand","namesOfMeals","0","1","2","3","4","5","6","7","8","9","numberOfMeals","selectedExercises","clearAllProducts","clearAllSeries","isSettingsChanged","Settings","newSettings","updatedSelectedExercises","indexOfExerciseToRemoving","indexOf","category","saveSettingsToDatabase","settings","clearDatabase","getSettingsFromDatabase","settingsWindow","backupSettings","currentSettings","values","resetOptionsStates","handleSettingsSaved","handleSettingsCanceled","closeWindow","handleSettingsReset","handleExerciseChoosing","children","handleSettingOnChange","attributes","handleCheckboxOnClick","handleCategorySwitch","data-key","required","exercise","includes","About","previousPage","handleBackToPreviousPage","marginTop","init","isSignUpWindow","isPasswordForgotten","signUpUsername","signUpPassword","signUpConfirmPassword","signUpEmail","logInUsername","logInPassword","formData","forgotPasswordEmail","Login","isLogout","setUserStatus","setUserId","field","loginWindow","signUpCondition","logInCondition","isFieldTooShort","isFieldTooLong","isFieldEmpty","handleFormTypeChanging","validateSignUpInputs","formDataValues","formDataKeys","isValidatedSuccessfully","formValue","email","isEmailExist","log","isUsernameExist","addUser","validateLogInInputs","logInUser","handleSignUpUser","addDoc","username","password","handleLoginUser","isLoggedSuccessfully","clearFormData","handleLogoutUser","handleCancel","handlePasswordRestoringWindow","isExist","getUserPasswordFromEmail","handlePasswordRestoring","templateParams","user_email","user_password","send","then","res","alert","catch","err","countPercentOfEatenIngredient","eatenAmount","maxAmount","isNaN","UPDATE_MEALS_INGREDIENTS_SUMMARY","UPDATE_DAILY_INGREDIENTS_SUMMARY","COUNT_GAUGES_DATA","CHANGE_DATE","CHANGE_PAGE_TITLE","RESET_GAUGES","LOAD_SETTINGS","SET_WINDOW","SET_USER_STATUS","CHANGE_HAMBURGER_STATE","UPDATE_WINDOW_WIDTH","SET_NEW_SETTINGS","SET_USER_ID","pageTitle","previousPageTitle","isLoginWindowEnabled","isSettingsWindowEnabled","isAboutWindowEnabled","isAddWindowsEnabled","isRemoveWindowsEnabled","isMoreWindowsEnabled","hamburgerState","windowWidth","mealsIngredientsSummary","dailyIngredientsSummary","gaugesData","eaten","max","initializeApp","apiKey","authDomain","projectId","getFirestore","App","newMealsIngredientsSummary","dailyIngredientsSum","mealsIngredientsSum","kcalS","typeOfIngredient","SET_USER_NAME","userName","MENU_CATEGORIES","cookie","split","cookieData","trim","status","vh","innerHeight","documentElement","setProperty","addEventListener","dateChanger","menu","hamburgerLines","right","cssText","updateMealSummary","updateDailySummary","changePageTitle","categoryTitle","handleMenu","newStatus","newUserId","initialData","newDateIds","selectedExerciseId","render"],"mappings":"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","file":"static/js/main.99698a17.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.92f8fff8.png\";","// IMPORTS\r\n\r\nimport React from 'react';\r\nimport logo from './styles/logo.png';\r\n\r\n\r\n// COMPONENTS\r\n\r\nexport function Logo() {\r\n  return (\r\n    <img className=\"left-section__logo-container__logo\" src={logo} alt=\"Dietapp logo\" />\r\n  )\r\n}\r\n\r\nexport function Title() {\r\n  return (\r\n    <h1 className=\"left-section__logo-container__title\">Diet\r\n      <span className=\"left-section__logo-container__title__right\">app</span>\r\n    </h1>\r\n  )\r\n}\r\n\r\nexport function Hamburger(props) {\r\n  return (\r\n    <button className=\"left-section__hamburger\" onClick={ props.handleHamburger }>\r\n      <span className=\"left-section__hamburger__line\"></span>\r\n      <span className=\"left-section__hamburger__line\"></span>\r\n      <span className=\"left-section__hamburger__line\"></span>\r\n    </button>\r\n  )\r\n}\r\n\r\nexport function Quotation() {\r\n  return (\r\n    <>\r\n      <span className=\"left-section__quotation-container__top\">Be healthy,</span>\r\n      <span className=\"left-section__quotation-container__bottom\">be happy!</span>\r\n    </>\r\n  )\r\n}\r\n\r\nexport function MenuItem(props) {\r\n\r\n  // FUNCTIONS\r\n\r\n  const handleClick = (e) => {\r\n    e.preventDefault();\r\n    props.linkTo(e.target.title);\r\n  }\r\n\r\n  \r\n  // RETURN\r\n\r\n  return (\r\n    <li className=\"left-section__menu-container__list-item\">\r\n        <a \r\n          className={ props.isActive \r\n                      ? \"left-section__menu-container__list-item__content left-section__menu-container__list-item__content--active\" \r\n                      : \"left-section__menu-container__list-item__content\" }\r\n          onClick={ handleClick }\r\n          href={ props.href }\r\n          title={ props.value }>{ props.value }</a>\r\n    </li>\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useState, useEffect } from 'react';\r\nimport './styles/center.css';\r\nimport { FaChevronCircleLeft, FaChevronCircleRight } from 'react-icons/fa';\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function DateChanger(props) {\r\n\r\n  // VARIABLES\r\n\r\n  const initialDate = new Date();\r\n\r\n\r\n  // HOOKS\r\n\r\n  const [currentDay, setCurrentDay] = useState(initialDate.getDate());\r\n  const [currentMonth, setCurrentMonth] = useState(initialDate.getMonth() + 1);\r\n  const [currentYear, setCurrentYear] = useState(initialDate.getFullYear());\r\n\r\n  \r\n  // EFFECTS\r\n\r\n  // CHANGES DATE AFTER MODIFYING STATES\r\n  useEffect(() => { \r\n    props.changeDate({ currentDay, currentMonth, currentYear });\r\n\r\n  }, [currentDay, currentMonth, currentYear]);\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const translateMonth = () => {\r\n    switch(currentMonth) {\r\n      case 1: return 'January';\r\n      case 2: return 'February';\r\n      case 3: return 'March';\r\n      case 4: return 'April';\r\n      case 5: return 'May';\r\n      case 6: return 'June';\r\n      case 7: return 'July';\r\n      case 8: return 'August';\r\n      case 9: return 'September';\r\n      case 10: return 'October';\r\n      case 11: return 'November';\r\n      case 12: return 'December';\r\n    }\r\n  }\r\n\r\n  const isLeapYear = () => {\r\n    if (((currentYear % 4 === 0) && (currentYear % 100 !== 0)) || currentYear % 400 === 0)\r\n       return true;\r\n    \r\n    else\r\n       return false;\r\n  }\r\n\r\n  const isDayLastInMonth = () => {\r\n    if ((currentDay === 29 && currentMonth === 2 && isLeapYear()) ||\r\n        (currentDay === 28 && currentMonth === 2 && !isLeapYear()) ||\r\n        (currentDay === 30 && ((currentMonth === 4) || \r\n                            (currentMonth === 6) || \r\n                            (currentMonth === 9) ||\r\n                            (currentMonth === 11))) ||\r\n        (currentDay === 31))\r\n      return true;\r\n    \r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isDayLastInDecember = () => {\r\n    if ((currentDay === 31) && (currentMonth === 12))\r\n      return true;\r\n    \r\n    else\r\n      return false;\r\n  }\r\n\r\n  const changeNextDay = () => {\r\n    if(isDayLastInMonth()) {\r\n\r\n      if(isDayLastInDecember()) {\r\n        setCurrentDay(1);\r\n        setCurrentMonth(1);\r\n        setCurrentYear(previousYear => previousYear + 1);\r\n      }\r\n\r\n      else {\r\n        setCurrentDay(1);\r\n        setCurrentMonth(previousMonth => previousMonth + 1);\r\n      }\r\n    }\r\n\r\n    else {\r\n      setCurrentDay(previousDay => previousDay + 1);\r\n    }\r\n  }\r\n\r\n  const handleNextButton = () => {\r\n    changeNextDay();\r\n  }\r\n\r\n  const isDayFirstInMonth = () => {\r\n    if(currentDay === 1)\r\n      return true;\r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isDayFirstInJanuary = () => {\r\n    if ((currentDay === 1) && (currentMonth === 1))\r\n      return true;\r\n    \r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isDayFirstInMarch = () => {\r\n    if ((currentDay === 1) && (currentMonth === 3))\r\n      return true;\r\n    \r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isDayFirstIn30DayMonths = () => {\r\n    if ((currentDay === 1) && ((currentMonth === 4) || (currentMonth === 6) || (currentMonth === 8) || (currentMonth === 9) || (currentMonth === 11)))\r\n      return true;\r\n    \r\n    else\r\n      return false;\r\n  }\r\n\r\n  const changePreviousDay = () => {\r\n    if (isDayFirstInJanuary()) {\r\n      setCurrentDay(31);\r\n      setCurrentMonth(12);\r\n      setCurrentYear(previousYear => previousYear - 1);\r\n    }\r\n\r\n    else if (isDayFirstInMarch()) {\r\n      if(isLeapYear())\r\n        setCurrentDay(29);\r\n      else\r\n        setCurrentDay(28);\r\n      \r\n      setCurrentMonth(2);\r\n    }\r\n\r\n    else if (isDayFirstIn30DayMonths()) {\r\n      setCurrentDay(31);\r\n      setCurrentMonth(previousMonth => previousMonth - 1);\r\n    }\r\n\r\n    else if (isDayFirstInMonth()) {\r\n      setCurrentDay(30);\r\n      setCurrentMonth(previousMonth => previousMonth - 1);\r\n    }\r\n    \r\n    else {\r\n      setCurrentDay(previousDay => previousDay - 1);\r\n    }\r\n  }\r\n\r\n  const handlePreviousButton = () => {\r\n    changePreviousDay();\r\n  }\r\n\r\n  \r\n  // RETURN\r\n\r\n  return (\r\n    <div className=\"center-section__top__date-changer\">\r\n\r\n      <button \r\n        className=\"center-section__top__date-changer__previous-button\"\r\n        onClick={ props.userStatus === \"Log in\" ? props.loginShortcut : handlePreviousButton }>\r\n        <FaChevronCircleLeft />\r\n      </button>\r\n\r\n      <h4 className=\"center-section__top__date-changer__current-date\">{ `${translateMonth()} ${currentDay}` }</h4>\r\n\r\n      <button \r\n        className=\"center-section__top__date-changer__next-button\"\r\n        onClick={ props.userStatus === \"Log in\" ? props.loginShortcut : handleNextButton }>\r\n        <FaChevronCircleRight />\r\n      </button>\r\n\r\n    </div>\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useState, useEffect } from 'react';\r\nimport { FaPlusCircle } from 'react-icons/fa';\r\n\r\nimport { db } from '../../index'; \r\nimport { getDoc, setDoc, doc } from \"firebase/firestore\";\r\n\r\n\r\n// VARIABLES\r\n\r\nconst initialOptionsStates = {\r\n  'list-saving': false\r\n};\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function AddingForm(props) {\r\n\r\n  // HOOKS\r\n  \r\n  const [optionsStates, setOptionsStates] = useState(initialOptionsStates);\r\n  const [isFormCompleted, setIsFormCompleted] = useState(false);\r\n  const [isStateEqualToProps, setIsStateEqualToProps] = useState(true);\r\n  \r\n\r\n  // EFFECTS\r\n\r\n  // CHECKING IF FORM IS COMPLETED\r\n  useEffect(() => { \r\n    checkIfFormCompleted();\r\n    checkIfStateIsEqualToProps();\r\n  }, [ props, optionsStates ]);\r\n\r\n  \r\n  // FUNCTIONS\r\n\r\n  const updatePredefinedProductsInDatabase = async (newList) => {\r\n    try {\r\n      await setDoc(doc(db, \"predefinedProducts\", \"predefinedProductsList\"), {\r\n        list: newList\r\n      },\r\n      { merge: true });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const getPredefinedProductsFromDatabase = async () => {\r\n    let predefinedProductsList = [];\r\n    try {\r\n      const querySnapshot = await getDoc(doc(db, \"predefinedProducts\", \"predefinedProductsList\"));\r\n      predefinedProductsList = querySnapshot.data().list;\r\n      if (!predefinedProductsList)\r\n        updatePredefinedProductsInDatabase([]);\r\n    }    \r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n    return predefinedProductsList;\r\n  }\r\n\r\n  const handleClearButton = () => {\r\n    setOptionsStates(initialOptionsStates);\r\n    props.handleFormClearing();\r\n    setIsStateEqualToProps(true);\r\n  }\r\n\r\n  const handleCancelButton = () => {\r\n    props.handleAddWindow();\r\n  }\r\n\r\n  const checkIfStateIsEqualToProps = () => {\r\n    // CHECKING OPTIONS\r\n    Object.keys(optionsStates).forEach(option => {\r\n      setIsStateEqualToProps(true);\r\n      if (optionsStates[option] !== initialOptionsStates[option])\r\n        setIsStateEqualToProps(false);\r\n    });\r\n\r\n    // CHECKING INPUTS\r\n    Object.keys(props.data).forEach(key => {\r\n      if (props.data[key])\r\n        setIsStateEqualToProps(false);\r\n    });\r\n  }\r\n\r\n  const checkIfFormCompleted = () => {\r\n    if (props.type === 'nutrition') {\r\n      const name = document.querySelector(\"#name\").value;\r\n      const weight = document.querySelector(\"#weight\").value;\r\n      const proteins = document.querySelector(\"#proteins\").value;\r\n      const fats = document.querySelector(\"#fats\").value;\r\n      const carbs = document.querySelector(\"#carbs\").value;\r\n      const kcal = document.querySelector(\"#kcal\").value;\r\n\r\n      if(name && weight && proteins && fats && carbs && kcal)\r\n        setIsFormCompleted(true);\r\n      else\r\n        setIsFormCompleted(false);\r\n    }\r\n\r\n    else {\r\n      const weight = document.querySelector(\"#weight\").value;\r\n      const reps = document.querySelector(\"#reps\").value;\r\n\r\n      if (weight && reps)\r\n        setIsFormCompleted(true);\r\n      else\r\n        setIsFormCompleted(false);\r\n    }\r\n  }\r\n\r\n  const searchForCheckedOptions = (keysArray) => {\r\n    let checkedOptions = [];\r\n    keysArray.forEach(key => {\r\n      if (optionsStates[key])\r\n        checkedOptions.push(key);\r\n    });\r\n\r\n    return checkedOptions;\r\n  }\r\n\r\n  const handleAddProduct = (e) => {\r\n    props.handleProductAdding(e);\r\n    \r\n    const keys = Object.keys(optionsStates);\r\n\r\n    const checkedOptions = searchForCheckedOptions(keys);\r\n\r\n    checkedOptions.forEach(checkedKey => {\r\n\r\n      switch(checkedKey) {\r\n        case 'list-saving': {\r\n\r\n          const newProduct = {\r\n            id:       Date.now(), \r\n            name:     document.querySelector(\"#name\").value, \r\n            weight:   Number(document.querySelector(\"#weight\").value), \r\n            proteins: Number(document.querySelector(\"#proteins\").value), \r\n            fats:     Number(document.querySelector(\"#fats\").value),\r\n            carbs:    Number(document.querySelector(\"#carbs\").value),\r\n            kcal:     Number(document.querySelector(\"#kcal\").value),\r\n          }\r\n\r\n          saveNewProductToList(newProduct);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  const handleAddSerie = (e) => {\r\n    props.handleSerieAdding(e);\r\n\r\n  }\r\n\r\n  const saveNewProductToList = async (newProduct) => {\r\n    const newList =  await getPredefinedProductsFromDatabase();\r\n    newList.push(newProduct);\r\n    updatePredefinedProductsInDatabase(newList);\r\n  }\r\n\r\n  const handleCheckboxOnClick = (e) => {\r\n    setOptionsStates(prevOptions => { return {...prevOptions, [e.target.id]: !optionsStates[e.target.id]} });\r\n  }\r\n\r\n\r\n  // RETURN\r\n\r\n  return (\r\n    <>\r\n    { props.type !== 'nutrition' \r\n      ? <form className=\"window__main window__main--add\" onSubmit={ handleAddSerie }>\r\n\r\n          <section className=\"window__main__section window__main__section--form\">\r\n\r\n            <h3 className=\"window__main__section__title\">Last time</h3>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"oldWeight\">Weight: </label>\r\n              <p \r\n                className=\"window__main__input-line__input window__main__input-line__input--unchanging\" \r\n                id=\"oldWeight\">\r\n                { props.type === 'last-training' ? props.lastTimeData.training.weight : props.lastTimeData.serie.weight }\r\n              </p>\r\n              <span className=\"window__main__input-line__unit\">kg</span>\r\n            </div>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"oldReps\">Reps: </label>\r\n              <p \r\n                className=\"window__main__input-line__input window__main__input-line__input--unchanging\" \r\n                id=\"oldReps\">\r\n                { props.type === 'last-training' ? props.lastTimeData.training.reps : props.lastTimeData.serie.reps }\r\n              </p>\r\n              <span className=\"window__main__input-line__unit\">reps</span>\r\n            </div>\r\n          \r\n          </section>\r\n\r\n          <section className=\"window__main__section window__main__section--form\">\r\n\r\n            <h3 className=\"window__main__section__title\">New serie</h3>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"weight\">Weight: </label>\r\n              <input\r\n                className=\"window__main__input-line__input\" \r\n                type=\"text\" \r\n                id=\"weight\"\r\n                value={ props.data.weight } \r\n                onChange={ props.handleOnChange }\r\n                placeholder={ props.warning[1] === 'weight' ? props.warning[0] : null }\r\n                maxLength=\"3\">\r\n              </input>\r\n              <span className=\"window__main__input-line__unit\">kg</span>\r\n            </div>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"reps\">Reps: </label>\r\n              <input \r\n                className=\"window__main__input-line__input\" \r\n                type=\"text\" \r\n                id=\"reps\"\r\n                value={ props.data.reps } \r\n                onChange={ props.handleOnChange }\r\n                placeholder={ props.warning[1] === 'reps' ? props.warning[0] : null }\r\n                maxLength=\"2\">\r\n              </input>\r\n              <span className=\"window__main__input-line__unit\">reps</span>\r\n            </div>\r\n            \r\n          </section>\r\n\r\n          <button \r\n                className={ isFormCompleted\r\n                            ? \"window__header__add-button\"\r\n                            : \"window__header__add-button window__header__add-button--disabled\" }\r\n                type=\"submit\"\r\n                disabled={ isFormCompleted ? false : true }><FaPlusCircle /></button>\r\n\r\n          <section className=\"window__bottom\">\r\n\r\n            <button \r\n              className={ isStateEqualToProps ? \"window__bottom__tertiary-button window__bottom__tertiary-button--disabled\" : \"window__bottom__tertiary-button\" } \r\n              disabled={ isStateEqualToProps ? true : false }\r\n              type=\"button\" \r\n              onClick={ handleClearButton }>\r\n              Clear</button>\r\n\r\n            <div>\r\n              <button className=\"window__bottom__secondary-button\" type=\"button\" onClick={ handleCancelButton }>Cancel</button>\r\n              <button \r\n                className={ isFormCompleted\r\n                            ? \"window__bottom__primary-button\"\r\n                            : \"window__bottom__primary-button window__bottom__primary-button--disabled\" }\r\n                type=\"submit\"\r\n                disabled={ isFormCompleted ? false : true }>Add</button>\r\n            </div>\r\n\r\n          </section>\r\n\r\n          <button \r\n            className={ isFormCompleted\r\n                        ? \"window__header__add-button\"\r\n                        : \"window__header__add-button window__header__add-button--disabled\" }\r\n            type=\"submit\"\r\n            style={{ zIndex: 11 }}\r\n            disabled={ isFormCompleted ? false : true }><FaPlusCircle />\r\n          </button>\r\n\r\n        </form>\r\n\r\n      : <form className=\"window__main window__main--add\" onSubmit={ handleAddProduct }>\r\n\r\n          <section className=\"window__main__section window__main__section--form\">\r\n\r\n            <h3 className=\"window__main__section__title\">Product info</h3>\r\n            \r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"name\">Product name: </label>\r\n              <input\r\n                className=\"window__main__input-line__input\"\r\n                type=\"text\"\r\n                id=\"name\"\r\n                value={ props.data.name }\r\n                onChange={ props.handleOnChange }\r\n                placeholder={ props.warning[1] === 'name' ? props.warning[0] : null }\r\n                maxLength=\"32\">\r\n              </input>\r\n            </div>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"weight\">Product weight: </label>\r\n              <input \r\n                className=\"window__main__input-line__input\"\r\n                type=\"text\"\r\n                id=\"weight\"\r\n                value={ props.data.weight } \r\n                onChange={ props.handleOnChange }\r\n                placeholder={ props.warning[1] === 'weight' ? props.warning[0] : null }\r\n                maxLength=\"4\">\r\n              </input>\r\n              <span className=\"window__main__input-line__unit\">g</span>\r\n            </div>\r\n\r\n\r\n          </section>\r\n\r\n          <section className=\"window__main__section window__main__section--form\">\r\n            \r\n            <h3 className=\"window__main__section__title\">Nutrition facts</h3>\r\n            \r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"proteins\">Proteins: </label>\r\n              <input \r\n                className=\"window__main__input-line__input\" \r\n                type=\"text\" \r\n                id=\"proteins\"\r\n                value={ props.data.proteins } \r\n                onChange={ props.handleOnChange }\r\n                placeholder={ props.warning[1] === 'proteins' ? props.warning[0] : null }\r\n                maxLength=\"4\">\r\n              </input>\r\n              <span className=\"window__main__input-line__unit\">g</span>\r\n            </div>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"fats\">Fats: </label>\r\n              <input\r\n                className=\"window__main__input-line__input\"  \r\n                type=\"text\" \r\n                id=\"fats\"\r\n                value={ props.data.fats } \r\n                onChange={ props.handleOnChange }\r\n                placeholder={ props.warning[1] === 'fats' ? props.warning[0] : null }\r\n                maxLength=\"4\">\r\n              </input>\r\n              <span className=\"window__main__input-line__unit\">g</span>\r\n            </div>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"carbs\">Carbs: </label>\r\n              <input\r\n                className=\"window__main__input-line__input\"  \r\n                type=\"text\" \r\n                id=\"carbs\"\r\n                value={ props.data.carbs } \r\n                onChange={ props.handleOnChange }\r\n                placeholder={ props.warning[1] === 'carbs' ? props.warning[0] : null }\r\n                maxLength=\"4\">\r\n              </input>\r\n              <span className=\"window__main__input-line__unit\">g</span>\r\n            </div>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"kcal\">Calories: </label>\r\n              <input\r\n                className=\"window__main__input-line__input\"  \r\n                type=\"text\" \r\n                id=\"kcal\"\r\n                value={ props.data.kcal }\r\n                onChange={ props.handleOnChange }\r\n                placeholder={ props.warning[1] === 'kcal' ? props.warning[0] : null }\r\n                maxLength=\"4\">\r\n              </input>\r\n              <span className=\"window__main__input-line__unit\">kcal</span>\r\n            </div>\r\n\r\n\r\n          </section>\r\n\r\n          <section className=\"window__main__section window__main__section--form\">\r\n\r\n            <h3 className=\"window__main__section__title\">Options</h3>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label window__main__input-line__label--checkbox\" htmlFor=\"list-saving\">Save to list</label>\r\n              <button \r\n                className=\"window__main__input-line__checkbox\"\r\n                id=\"list-saving\"\r\n                type=\"button\"\r\n                onClick={ handleCheckboxOnClick }>\r\n                <div \r\n                  className=\"window__main__input-line__checkbox__background\" \r\n                  id=\"list-saving\"\r\n                  style={ optionsStates['list-saving'] ? {backgroundColor: \"#7500AF\"} : {backgroundColor: \"transparent\"} }>\r\n                </div>\r\n              </button>\r\n            </div>\r\n\r\n          </section>\r\n\r\n          <button \r\n            className={ isFormCompleted\r\n                        ? \"window__header__add-button\"\r\n                        : \"window__header__add-button window__header__add-button--disabled\" }\r\n            type=\"submit\"\r\n            style={{ zIndex: 11 }}\r\n            disabled={ isFormCompleted ? false : true }><FaPlusCircle />\r\n          </button>\r\n\r\n          <section className=\"window__bottom\">\r\n\r\n            <button \r\n              className={ isStateEqualToProps ? \"window__bottom__tertiary-button window__bottom__tertiary-button--disabled\" : \"window__bottom__tertiary-button\" } \r\n              disabled={ isStateEqualToProps ? true : false }\r\n              type=\"button\" \r\n              onClick={ handleClearButton }>\r\n              Clear</button>\r\n\r\n            <div>\r\n              <button className=\"window__bottom__secondary-button\" type=\"button\" onClick={ handleCancelButton }>Cancel</button>\r\n              <button \r\n                className={ isFormCompleted\r\n                            ? \"window__bottom__primary-button\"\r\n                            : \"window__bottom__primary-button window__bottom__primary-button--disabled\" }\r\n                type=\"submit\"\r\n                disabled={ isFormCompleted ? false : true }>Add</button>\r\n            </div>\r\n\r\n          </section>\r\n\r\n        </form>\r\n    }\r\n    </>\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useReducer, useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { warnings } from '../meal/Meal';\r\nimport { FaChevronCircleLeft, FaSave } from 'react-icons/fa';\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function EditForm(props) {\r\n\r\n  // VARIABLES\r\n\r\n  const ACTIONS = {\r\n    UPDATE_PRODUCT_DATA: 'update-product-data',\r\n    RESET_FORM: 'reset-form',\r\n    SET_WARNING: 'set-warning',\r\n    CLEAR_WARNING: 'clear-warning'\r\n  }\r\n\r\n  const initialState = {\r\n    productData: {\r\n      id: props.data.id,\r\n      name: props.data.name,\r\n      weight: props.data.weight,\r\n      proteins: props.data.proteins,\r\n      fats: props.data.fats,\r\n      carbs: props.data.carbs,\r\n      kcal: props.data.kcal\r\n    },\r\n    warning: ['' ,'']\r\n  }\r\n\r\n\r\n  // HOOKS\r\n\r\n  const reducer = (state, action) => {\r\n    switch (action.type) {\r\n      case ACTIONS.UPDATE_PRODUCT_DATA: {\r\n        switch (action.payload.key) {\r\n          case 'name':     { return { ...state, productData: {...state.productData, name:     action.payload.value } }};\r\n          case 'weight':   { return { ...state, productData: {...state.productData, weight:   action.payload.value } }};\r\n          case 'proteins': { return { ...state, productData: {...state.productData, proteins: action.payload.value } }};\r\n          case 'fats':     { return { ...state, productData: {...state.productData, fats:     action.payload.value } }};\r\n          case 'carbs':    { return { ...state, productData: {...state.productData, carbs:    action.payload.value } }};\r\n          case 'kcal':     { return { ...state, productData: {...state.productData, kcal:     action.payload.value } }};\r\n          default:         { return console.error(`Unknown action type: ${action.type}`) };\r\n        }\r\n      }\r\n\r\n      case ACTIONS.RESET_FORM: {\r\n        return {...state, productData: \r\n          { id: props.data.id,\r\n            name: props.data.name,\r\n            weight: props.data.weight,\r\n            proteins: props.data.proteins,\r\n            fats: props.data.fats,\r\n            carbs: props.data.carbs,\r\n            kcal: props.data.kcal \r\n        }};\r\n      }\r\n\r\n      case ACTIONS.SET_WARNING: {\r\n        if (action.payload === 'name')\r\n          return { ...state, warning: [warnings.name, action.payload] }\r\n        else \r\n          return { ...state, warning: [warnings.weight, action.payload] }\r\n      }\r\n\r\n      case ACTIONS.CLEAR_WARNING: {\r\n        return { ...state, warning: ['', action.payload] }\r\n      }\r\n      \r\n      default: return console.error(`Unknown action type: ${action.type}`);\r\n    }\r\n  }\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  const [isFormCompleted, setIsFormCompleted] = useState(false);\r\n  const [isStateEqualToProps, setIsStateEqualToProps] = useState(true);\r\n\r\n  \r\n  // EFFECTS\r\n\r\n  // BLURING AND DISABLING WINDOW AFTER CONFIRM WINDOW MOUNTING\r\n  useEffect(() => {\r\n    const addingWindow = document.querySelector(\".window--add\");\r\n    addingWindow.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n    addingWindow.style.pointerEvents = \"none\";\r\n\r\n    return () => {\r\n      addingWindow.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      addingWindow.style.pointerEvents = \"auto\";\r\n    }\r\n\r\n  }, []);\r\n\r\n  // CHECKING IF FORM IS COMPLETED\r\n  useEffect(() => { \r\n    checkIfFormCompleted();\r\n    checkIfStateIsEqualToProps();\r\n    \r\n  }, [ state.productData ])\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const checkIfFormCompleted = () => {\r\n    const name = document.querySelector(\"#name\").value;\r\n    const weight = document.querySelector(\"#weight\").value;\r\n\r\n    if(name && weight)\r\n      setIsFormCompleted(true);\r\n    else\r\n      setIsFormCompleted(false);\r\n  }\r\n\r\n  const handleResetingForm = (e) => {\r\n    e.preventDefault();\r\n    dispatch({ type: ACTIONS.RESET_FORM });\r\n    dispatch({ type: ACTIONS.CLEAR_WARNING });\r\n    setIsStateEqualToProps(true);\r\n  }\r\n\r\n  const checkIfStateIsEqualToProps = () => {\r\n    Object.keys(props.data).forEach(key => {\r\n      if (props.data[key] !== state.productData[key])\r\n        setIsStateEqualToProps(false); \r\n      });\r\n  }\r\n\r\n  const handleCancelButton = () => {\r\n    const idOfSelectedProduct = props.data.id;\r\n\r\n    // IF USER CANCEL EDITING, PRODUCT HAS TO BE UNSELECTED\r\n    props.handleEditingWindow(idOfSelectedProduct);\r\n  }\r\n\r\n  const calculateNutritionFacts = (e) => {\r\n    const isNumber = /[0-9]/;\r\n    const isZero = /^[0]{1}/;\r\n\r\n    const nutritionPerOneGram = {\r\n      proteins: Number(props.data.proteins) / Number(props.data.weight),\r\n      fats: Number(props.data.fats) / Number(props.data.weight),\r\n      carbs: Number(props.data.carbs) / Number(props.data.weight),\r\n      kcal: Number(props.data.kcal) / Number(props.data.weight)\r\n    };\r\n\r\n    const setValueAsNull = () => {\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'weight', value: '' }});\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'proteins', value: 0 }});\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'fats', value: 0 }});\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'carbs', value: 0 }});\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'kcal', value: 0 }});\r\n      dispatch({ type: ACTIONS.SET_WARNING, payload: 'weight' });\r\n    }\r\n\r\n    const setValueAsCorrect = () => {\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'weight', value: Number(e.target.value) } });\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'proteins', value: Math.round( e.target.value * nutritionPerOneGram.proteins) } });\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'fats', value: Math.round( e.target.value * nutritionPerOneGram.fats) } });\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'carbs', value: Math.round( e.target.value * nutritionPerOneGram.carbs) } });\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'kcal', value: Math.round( e.target.value * nutritionPerOneGram.kcal) } });\r\n      dispatch({ type: ACTIONS.CLEAR_WARNING, payload: 'weight' });\r\n    }\r\n\r\n    if (isNumber.test(e.target.value[e.target.value.length - 1])) {\r\n      isZero.test(e.target.value)\r\n      ? setValueAsNull()\r\n      : setValueAsCorrect();\r\n    }\r\n\r\n    else {\r\n      setValueAsNull();\r\n    }\r\n  }\r\n\r\n  const handleNameChanging = (e) => {\r\n    const isWord = /[a-z\\s]/i;\r\n    e.preventDefault();\r\n    if (isWord.test(e.target.value[e.target.value.length - 1])) {\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'name', value: e.target.value }})\r\n      dispatch({ type: ACTIONS.CLEAR_WARNING, payload: 'name'});\r\n    }\r\n    else {\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'name', value: \"\" }});\r\n      dispatch({ type: ACTIONS.SET_WARNING, payload: 'name'});\r\n    }\r\n  }\r\n\r\n  const handleSavingChanges = (e) => {\r\n    e.preventDefault();\r\n    props.handleProductEditing(state.productData);\r\n  }\r\n\r\n\r\n  // RETURN\r\n\r\n  return ReactDOM.createPortal (\r\n    <form className=\"window window--edit\" onSubmit={ handleSavingChanges }>\r\n\r\n      <header className=\"window__header\">\r\n        <h3 className=\"window__header__heading\">Edit product</h3>\r\n        <button className=\"window__header__back-button\" onClick={ handleCancelButton }><FaChevronCircleLeft /></button>\r\n        <button \r\n          className={ \r\n            isFormCompleted\r\n            ? \"window__header__add-button\"\r\n            : \"window__header__add-button window__header__add-button--disabled\" } \r\n          disabled={ isFormCompleted ? false : true } \r\n          onClick={ handleSavingChanges }><FaSave /></button>\r\n      </header>\r\n\r\n      <main className=\"window__form\">\r\n\r\n        <section className=\"window__main__section window__main__section--form\">\r\n          \r\n          <h3 className=\"window__main__section__title\">Product info</h3>\r\n\r\n          <div className=\"window__main__input-line\">\r\n            <label className=\"window__main__input-line__label\" htmlFor=\"name\">Product name: </label>\r\n            <input\r\n                className=\"window__main__input-line__input\" \r\n                type=\"text\"\r\n                id=\"name\"\r\n                value={ state.productData.name } \r\n                onChange={ handleNameChanging }\r\n                placeholder={ state.warning[1] === 'name' ? state.warning[0] : null }\r\n                maxLength=\"32\">\r\n            </input>\r\n          </div>\r\n\r\n          <div className=\"window__main__input-line\">\r\n            <label className=\"window__main__input-line__label\" htmlFor=\"weight\">Product weight: </label>\r\n            <input\r\n                className=\"window__main__input-line__input\" \r\n                type=\"text\"\r\n                id=\"weight\"\r\n                value={ state.productData.weight } \r\n                onChange={ calculateNutritionFacts }\r\n                placeholder={ state.warning[1] === 'weight' ? state.warning[0] : null }\r\n                maxLength=\"32\">\r\n            </input>\r\n            <span className=\"window__main__input-line__unit\">g</span>\r\n          </div>\r\n        \r\n        </section>\r\n        \r\n        <section className=\"window__main__section window__main__section--form\">\r\n          \r\n          <h3 className=\"window__main__section__title\">Nutrition facts</h3>\r\n\r\n          <div className=\"window__main__input-line\">\r\n            <label className=\"window__main__input-line__label\" htmlFor=\"proteins\">Proteins: </label>\r\n            <p\r\n              className=\"window__main__input-line__input window__main__input-line__input--unchanging\" \r\n              id=\"proteins\">\r\n              { state.productData.proteins }\r\n            </p>\r\n            <span className=\"window__main__input-line__unit\">g</span>\r\n          </div>\r\n\r\n          <div className=\"window__main__input-line\">\r\n            <label className=\"window__main__input-line__label\" htmlFor=\"fats\">Fats: </label>\r\n            <p\r\n              className=\"window__main__input-line__input window__main__input-line__input--unchanging\" \r\n              id=\"fats\">\r\n              { state.productData.fats }\r\n            </p>\r\n            <span className=\"window__main__input-line__unit\">g</span>\r\n          </div>\r\n\r\n          <div className=\"window__main__input-line\">\r\n            <label className=\"window__main__input-line__label\" htmlFor=\"carbs\">Carbs: </label>\r\n            <p\r\n              className=\"window__main__input-line__input window__main__input-line__input--unchanging\" \r\n              id=\"carbs\">\r\n              { state.productData.carbs }\r\n            </p>\r\n            <span className=\"window__main__input-line__unit\">g</span>\r\n          </div>\r\n\r\n          <div className=\"window__main__input-line\">\r\n            <label className=\"window__main__input-line__label\" htmlFor=\"kcal\">Calories: </label>\r\n            <p\r\n              className=\"window__main__input-line__input window__main__input-line__input--unchanging\" \r\n              id=\"kcal\">\r\n              { state.productData.kcal }\r\n            </p>\r\n            <span className=\"window__main__input-line__unit\">kcal</span>\r\n          </div>\r\n        \r\n        </section>\r\n        \r\n      </main>\r\n\r\n      <section className=\"window__bottom\">\r\n        <button \r\n          className={ isStateEqualToProps ? \"window__bottom__tertiary-button window__bottom__tertiary-button--disabled\" : \"window__bottom__tertiary-button\" } \r\n          disabled={ isStateEqualToProps ? true : false } \r\n          type=\"button\" \r\n          onClick={ handleResetingForm }>\r\n          Reset</button>\r\n        \r\n        <div>\r\n          <button className=\"window__bottom__secondary-button\" type=\"button\" onClick={ handleCancelButton }>Cancel</button>\r\n          <button \r\n            className={ isFormCompleted\r\n                        ? \"window__bottom__primary-button\"\r\n                        : \"window__bottom__primary-button window__bottom__primary-button--disabled\"\r\n                        } \r\n            type=\"submit\"\r\n            disabled={ isFormCompleted ? false : true }>\r\n            Save</button>\r\n        </div>\r\n\r\n      </section>\r\n\r\n    </form>,\r\n    document.getElementById(\"portal\")\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useReducer, useEffect } from 'react';\r\nimport EditForm from './EditForm';\r\nimport { FaPlusCircle } from 'react-icons/fa';\r\n\r\nimport { db } from '../../index'; \r\nimport { getDoc, setDoc, doc } from \"firebase/firestore\";\r\n\r\n\r\n// VARIABLES\r\n\r\nconst ACTIONS = {\r\n  SET_PRODUCT_SEND_FOR_EDIT: \"set-product-send-for-edit\",\r\n  NEGATE_EDIT_WINDOW_STATE: \"negate-edit-window-state\",\r\n  UPDATE_SAVED_PRODUCTS_LIST: \"update-saved-products-list\",\r\n  LOAD_PREDEFINED_PRODUCTS_LIST_FROM_LOCAL_STORAGE: 'load-predefined-products-list-from-local-storage',\r\n  SET_IS_ADD_BUTTON_DISABLED: 'set-is-add-button-disabled'\r\n}\r\n\r\nconst initialState = {\r\n  savedProductList: [\r\n    { id: 0, name: \"Cottage cheese\", weight: 100, proteins: 20, fats: 10, carbs: 15, kcal: 250 },\r\n    { id: 1, name: \"Skyr\", weight: 100, proteins: 20, fats: 0, carbs: 12, kcal: 100 },\r\n    { id: 2, name: \"Potatos\", weight: 100, proteins: 9, fats: 2, carbs: 80, kcal: 126 },\r\n    { id: 3, name: \"Coca Cola\", weight: 100, proteins: 0, fats: 0, carbs: 100, kcal: 400 },\r\n    { id: 4, name: \"Banana\", weight: 100, proteins: 5, fats: 3, carbs: 52, kcal: 173 }],\r\n  \r\n  productSendForEdit: { id: 0, name: '', weight: 0, proteins: 0, fats: 0, carbs: 0, kcal: 0 },\r\n  isEditWindowOpened: false,\r\n  isAddButtonDisabled: false\r\n}\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function AddingList(props) {\r\n\r\n  // HOOKS\r\n\r\n  const reducer = (state, action) => {\r\n    switch (action.type) {\r\n\r\n      case ACTIONS.LOAD_PREDEFINED_PRODUCTS_LIST_FROM_LOCAL_STORAGE: {\r\n        return {...state, savedProductList: action.payload}\r\n      }\r\n\r\n      case ACTIONS.NEGATE_EDIT_WINDOW_STATE: {\r\n        return { ...state, isEditWindowOpened: !state.isEditWindowOpened };\r\n      }\r\n\r\n      case ACTIONS.SET_PRODUCT_SEND_FOR_EDIT: {\r\n        return {...state, productSendForEdit: {\r\n                          id: action.payload.id,\r\n                          name: action.payload.name,\r\n                          weight: action.payload.weight,\r\n                          proteins: action.payload.proteins,\r\n                          fats: action.payload.fats,\r\n                          carbs: action.payload.carbs,\r\n                          kcal: action.payload.kcal }\r\n        };\r\n      }\r\n\r\n      case ACTIONS.UPDATE_SAVED_PRODUCTS_LIST: {\r\n        const newSavedProductList = state.savedProductList;\r\n        newSavedProductList[action.payload.index] = action.payload.newProduct;\r\n        return {...state, savedProductList: newSavedProductList};\r\n      }\r\n\r\n      case ACTIONS.SET_IS_ADD_BUTTON_DISABLED: {\r\n        return {...state, isAddButtonDisabled: action.payload};\r\n      }\r\n\r\n      default: return console.error(`Unknown action type: ${action.type}`);\r\n    }\r\n  }\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n\r\n  // EFFECTS\r\n\r\n  const updatePredefinedProductsInDatabase = async (newList) => {\r\n    try {\r\n      await setDoc(doc(db, \"predefinedProducts\", \"predefinedProductsList\"), {\r\n        list: newList\r\n      },\r\n      { merge: true });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const getPredefinedProductsFromDatabase = async () => {\r\n    let predefinedProductsList = [];\r\n    try {\r\n      const querySnapshot = await getDoc(doc(db, \"predefinedProducts\", \"predefinedProductsList\"));\r\n      predefinedProductsList = querySnapshot.data().list;\r\n      if (!predefinedProductsList)\r\n        updatePredefinedProductsInDatabase(state.savedProductList)\r\n    }    \r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n    dispatch({ type: ACTIONS.LOAD_PREDEFINED_PRODUCTS_LIST_FROM_LOCAL_STORAGE, payload: predefinedProductsList });\r\n  }\r\n\r\n  // LOADS PREDEFINED PRODUCTS LIST FROM LOCALSTORAGE OR CREATES IF DOESN'T EXIST\r\n  useEffect(() => { \r\n    getPredefinedProductsFromDatabase();\r\n  }, []);\r\n\r\n  // DISABLES ADD BUTTON AFTER MOUNTING\r\n  useEffect(() => { \r\n    handleAddButtonDisabling() \r\n  }, [])\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const handleSelected = (e) => {\r\n    const product = document.getElementById(e.currentTarget.id);\r\n    if (e.currentTarget.id) {\r\n      const productName = product.querySelector(\".window__main__section__large-list__item__name\");\r\n\r\n      // \"UNSELECTING\"\r\n      if (productName.style.fontWeight === \"bold\") {\r\n        product.style.background = \"#ffffff\";\r\n        productName.style.fontWeight = \"normal\";\r\n        handleAddButtonDisabling();\r\n      }\r\n\r\n      // \"SELECTING\"\r\n      else {\r\n        product.style.background = \"#7500AF30\";\r\n        productName.style.fontWeight = \"bold\";\r\n        updateProductSendForEdit(state.savedProductList[getIndexOfProduct(e.currentTarget.id)]);\r\n        handleEditingWindow();\r\n      }\r\n    }\r\n  }\r\n\r\n  const updateProductSendForEdit = (selectedProduct) => {\r\n    dispatch({ type: ACTIONS.SET_PRODUCT_SEND_FOR_EDIT, payload: selectedProduct });\r\n  }\r\n\r\n  const handleProductEditing = (editedProduct) => {\r\n    const indexOfEditedProduct = getIndexOfProduct(editedProduct.id);\r\n    dispatch({ type: ACTIONS.UPDATE_SAVED_PRODUCTS_LIST, payload: { index: indexOfEditedProduct, newProduct: editedProduct }})\r\n    \r\n    // SAVING CHANGES TO LOCAL STORAGE\r\n    updatePredefinedProductsInDatabase(state.savedProductList);\r\n    handleEditingWindow();\r\n  }\r\n\r\n  const handleEditingWindow = (idOfSelectedProduct = false) => {\r\n    \r\n    // UNSELECTING PRODUCT AFTER EDIT CANCELED\r\n    if (Number.isInteger(idOfSelectedProduct)) {\r\n      const product = document.getElementById(idOfSelectedProduct);\r\n      const productName = product.querySelector(\".window__main__section__large-list__item__name\");\r\n      product.style.background = \"#ffffff\";\r\n      productName.style.fontWeight = \"normal\";\r\n    }\r\n    \r\n    dispatch({ type: ACTIONS.NEGATE_EDIT_WINDOW_STATE });\r\n    handleAddButtonDisabling();\r\n  }\r\n\r\n  const handleAddButtonDisabling = () => {\r\n    const products = document.querySelectorAll(\".window__main__section__large-list__item\");\r\n    let returnedBoolean = false;\r\n   \r\n    for (let i = 0; i < products.length; i++) {\r\n      const name = products[i].querySelector(\".window__main__section__large-list__item__name\");\r\n      if (name.style.fontWeight === \"bold\") {\r\n        returnedBoolean = false;\r\n        break;\r\n      }\r\n\r\n      else\r\n        returnedBoolean = true;\r\n    }\r\n\r\n    dispatch({type: ACTIONS.SET_IS_ADD_BUTTON_DISABLED, payload: returnedBoolean});\r\n  }\r\n\r\n  const handleProductsAdding = () => {\r\n    const selectedProducts = [];\r\n    const products = document.querySelectorAll(\".window__main__section__large-list__item\");\r\n\r\n    products.forEach((product, index) => {\r\n      const name = product.querySelector(\".window__main__section__large-list__item__name\");\r\n      if (name.style.fontWeight === \"bold\")\r\n        selectedProducts.push(\r\n          { \r\n            name:     state.savedProductList[index - 1].name,\r\n            weight:   state.savedProductList[index - 1].weight, \r\n            proteins: state.savedProductList[index - 1].proteins, \r\n            fats:     state.savedProductList[index - 1].fats, \r\n            carbs:    state.savedProductList[index - 1].carbs, \r\n            kcal:     state.savedProductList[index - 1].kcal \r\n          }\r\n        );\r\n    });\r\n\r\n    if (selectedProducts.length !== 0)\r\n      props.handlePredefinedProductsAdding(selectedProducts);\r\n  }\r\n\r\n  const getIndexOfProduct = (targetId) => {\r\n    const productList = state.savedProductList;\r\n    let returnedIndex = 0;\r\n\r\n    productList.forEach((product, index) => {\r\n      if (product.id === Number(targetId))\r\n        returnedIndex = index;\r\n    });\r\n    return returnedIndex;\r\n  }\r\n\r\n  \r\n  // RETURN\r\n\r\n  return (\r\n    <>\r\n      <button \r\n        className={ !state.isAddButtonDisabled\r\n                    ? \"window__header__add-button\"\r\n                    : \"window__header__add-button window__header__add-button--disabled\" }\r\n        type=\"button\"\r\n        style={{ zIndex: 11 }}\r\n        onClick={ handleProductsAdding }\r\n        disabled={ state.isAddButtonDisabled ? true : false }><FaPlusCircle />\r\n      </button>\r\n\r\n       { state.isEditWindowOpened \r\n        ? <EditForm \r\n          data={{\r\n            id: state.productSendForEdit.id,\r\n            name: state.productSendForEdit.name,\r\n            weight: state.productSendForEdit.weight,\r\n            proteins: state.productSendForEdit.proteins,\r\n            fats: state.productSendForEdit.fats,\r\n            carbs: state.productSendForEdit.carbs,\r\n            kcal: state.productSendForEdit.kcal\r\n          }}\r\n          warning={ props.warning }\r\n          handleProductEditing={ handleProductEditing }\r\n          handleEditingWindow={ handleEditingWindow }\r\n          />\r\n\r\n        :  null }\r\n        \r\n      <ul className=\"window__main__section__large-list window__main__section__large-list--heading\">\r\n        <li className=\"window__main__section__large-list__item window__main__section__large-list__item--heading\">\r\n          <div className=\"window__main__section__large-list__wrapper\">\r\n            <span className=\"window__main__section__large-list__item__name\" style={{ color: \"white\" }}>Product name</span>\r\n            <span className=\"window__main__section__large-list__item__nutrition-facts\">\r\n              <p className=\"window__main__section__large-list__item__nutrition-facts__proteins\" title=\"Proteins\">P</p>\r\n              <p className=\"window__main__section__large-list__item__nutrition-facts__fats\" title=\"Fats\">F</p>\r\n              <p className=\"window__main__section__large-list__item__nutrition-facts__carbs\" title=\"Carbohydrates\">C</p>\r\n            </span>\r\n            <span className=\"window__main__section__large-list__item__calories\">Calories</span>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n\r\n      <ul className=\"window__main__section__large-list\">\r\n\r\n        { state.savedProductList.map(product => {\r\n          return (\r\n            <li id={ product.id } key={ product.id } className=\"window__main__section__large-list__item\" onClick={ handleSelected }>\r\n              <div className=\"window__main__section__large-list__wrapper\">\r\n                <span id={ product.id } className=\"window__main__section__large-list__item__name\">{ product.name }</span>\r\n                <span id={ product.id } className=\"window__main__section__large-list__item__nutrition-facts\">\r\n                  <p id={ product.id } className=\"window__main__section__large-list__item__nutrition-facts__proteins\" title=\"Proteins\">{ product.proteins } g</p>\r\n                  <p id={ product.id } className=\"window__main__section__large-list__item__nutrition-facts__fats\" title=\"Fats\">{ product.fats } g</p>\r\n                  <p id={ product.id } className=\"window__main__section__large-list__item__nutrition-facts__carbs\" title=\"Carbohydrates\">{ product.carbs } g</p>\r\n                </span>\r\n                <span id={ product.id } className=\"window__main__section__large-list__item__calories\">{ product.kcal } kcal</span>\r\n              \r\n              </div>\r\n              <span id={ product.id } className=\"window__main__section__large-list__item__weight\">{ product.weight } g</span>\r\n            </li>\r\n          )\r\n        })\r\n        }\r\n\r\n      </ul>\r\n      \r\n      <section className=\"window__bottom\">\r\n        <div></div>\r\n        <div>\r\n          <button \r\n            className=\"window__bottom__secondary-button\" \r\n            onClick={ props.handleAddWindow }>\r\n            Cancel\r\n          </button>\r\n          \r\n          <button \r\n            className={ state.isAddButtonDisabled\r\n                        ? \"window__bottom__primary-button window__bottom__primary-button--disabled\" \r\n                        : \"window__bottom__primary-button\" } \r\n            onClick={ handleProductsAdding }>\r\n            Add\r\n          </button>\r\n        </div>\r\n      </section>\r\n    </> \r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { FaChevronCircleLeft } from 'react-icons/fa';\r\nimport AddingForm from './AddingForm';\r\nimport AddingList from './AddingList';\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function AddWindow(props) {\r\n\r\n  // HOOKS\r\n\r\n  const [isAddingTypeSetAtLeftOption, setAddingType] = useState(true);\r\n\r\n  // EFFECTS\r\n\r\n  // BLURING AND DISABLING POINTER EVENTS ON BACKGROUND\r\n  useEffect(() => {\r\n    const rootElement = document.querySelector(\"#root\");\r\n    const wrapper = document.querySelector(\".wrapper\");\r\n    const hamburger = document.querySelector(\".left-section__hamburger\");\r\n    wrapper.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n    wrapper.style.pointerEvents = \"none\";\r\n    rootElement.style.zIndex = 97;\r\n    hamburger.style.display = \"none\";\r\n  \r\n    return (() => {\r\n      wrapper.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      wrapper.style.pointerEvents = \"auto\";\r\n      rootElement.style.zIndex = 99;\r\n      if (window.innerWidth < 769)\r\n        hamburger.style.display = \"block\";\r\n    })\r\n\r\n  }, []);\r\n\r\n  // CLEARING FORM AFTER CHANGE OF SWITCH OPTION\r\n  useEffect(() => {\r\n    props.handleFormClearing();\r\n  },[ isAddingTypeSetAtLeftOption ]);\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const changeAddingType = () => {\r\n    setAddingType(!isAddingTypeSetAtLeftOption);\r\n  }\r\n  \r\n\r\n  // RETURN\r\n\r\n  return ReactDOM.createPortal ( \r\n    <div className=\"window window--add\">\r\n      \r\n      <header className=\"window__header\">\r\n        \r\n        <h2 className=\"window__header__heading\" >{ props.type === 'exercises' ? \"Add serie\" : \"Add product\" }</h2>\r\n    \r\n        <button className=\"window__header__back-button\" onClick={ props.handleAddWindow }><FaChevronCircleLeft /></button>        \r\n        <button className=\"window__header__switch\" onClick={ changeAddingType }>\r\n          <h3 \r\n            className={ isAddingTypeSetAtLeftOption \r\n                        ? \"window__header__switch__left window__header__switch__left--selected\"\r\n                        : \"window__header__switch__left\" }>\r\n            { props.type === 'exercises' ? \"Last training\" : \"From list\" }\r\n          </h3>\r\n          <h3 \r\n            className={ isAddingTypeSetAtLeftOption \r\n                        ? \"window__header__switch__right\"\r\n                        : \"window__header__switch__right window__header__switch__right--selected\" }>\r\n            { props.type === 'exercises' ? \"Last serie\" : \"Your own\" }\r\n          </h3>\r\n        </button>\r\n\r\n      </header>\r\n\r\n      { props.type === 'exercises'\r\n\r\n        ? <main className=\"window__form\">\r\n          { isAddingTypeSetAtLeftOption\r\n\r\n            ? <AddingForm \r\n                type=\"last-training\"\r\n                data={{ \r\n                  weight: props.data.weight,\r\n                  reps: props.data.reps\r\n                }}\r\n                warning={ props.warning }\r\n                handleOnChange={ props.handleOnChange }\r\n                handleSerieAdding={ props.handleSerieAdding }\r\n                handleFormClearing={ props.handleFormClearing }\r\n                handleAddWindow={ props.handleAddWindow }\r\n                lastTimeData={ props.lastTimeData }\r\n              />\r\n\r\n            : <AddingForm \r\n                type=\"last-serie\"\r\n                data={{ \r\n                  weight: props.data.weight,\r\n                  reps: props.data.reps\r\n                }}\r\n                warning={ props.warning }\r\n                handleOnChange={ props.handleOnChange }\r\n                handleSerieAdding={ props.handleSerieAdding }\r\n                handleFormClearing={ props.handleFormClearing }\r\n                handleAddWindow={ props.handleAddWindow }\r\n                lastTimeData={ props.lastTimeData }\r\n              />\r\n          }\r\n        </main>\r\n\r\n        : <main className=\"window__form\">\r\n          { isAddingTypeSetAtLeftOption\r\n\r\n            ? <AddingList \r\n                warning={ props.warning }\r\n                handleAddWindow={ props.handleAddWindow }\r\n                handlePredefinedProductsAdding={ props.handlePredefinedProductsAdding }\r\n              />\r\n              \r\n            : <AddingForm\r\n                type=\"nutrition\"\r\n                data={{ \r\n                  isPlaceholderEnabled: props.data.isPlaceholderEnabled,\r\n                  name: props.data.name, \r\n                  weight: props.data.weight,\r\n                  proteins: props.data.proteins,\r\n                  fats: props.data.fats,\r\n                  carbs: props.data.carbs,\r\n                  kcal: props.data.kcal }}\r\n                warning={ props.warning }\r\n                handleOnChange={ props.handleOnChange }\r\n                handleFormClearing={ props.handleFormClearing }\r\n                handleProductAdding={ props.handleProductAdding }\r\n                handleAddWindow={ props.handleAddWindow }\r\n              />\r\n          }\r\n        </main>\r\n      \r\n      }\r\n\r\n    </div>,\r\n    document.getElementById('portal')\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport '../styles/window/window.css';\r\nimport { FaChevronCircleLeft, FaTrashAlt } from 'react-icons/fa';\r\n\r\n\r\n// COMPONENTS\r\n\r\nexport default function RemoveWindow(props) {\r\n\r\n  // HOOKS\r\n\r\n  const [isRemovingAllButtonPressed, setRemovingAllButtonPressed] = useState(false);\r\n  const [isRemoveButtonDisabled, setIsRemoveButtonDisabled] = useState(false);\r\n\r\n\r\n  // EFFECTS\r\n\r\n  // BLURING AND DISABLING POINTER EVENTS ON WINDOW AFTER CONFIRM WINDOW MOUNTING\r\n  useEffect(() => {\r\n    const removingWindow = document.querySelector(\".window\");\r\n\r\n    if (isRemovingAllButtonPressed) {\r\n      removingWindow.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n      removingWindow.style.pointerEvents = \"none\";\r\n    }\r\n    else {\r\n      removingWindow.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      removingWindow.style.pointerEvents = \"auto\";\r\n    }\r\n\r\n  }, [ isRemovingAllButtonPressed ]);\r\n\r\n  // BLURING AND DISABLING POINTER EVENTS ON BACKGROUND AFTER MOUNTING\r\n  useEffect(() => {\r\n    const rootElement = document.querySelector(\"#root\");\r\n    const wrapper = document.querySelector(\".wrapper\");\r\n    const hamburger = document.querySelector(\".left-section__hamburger\");\r\n    wrapper.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n    wrapper.style.pointerEvents = \"none\";\r\n    rootElement.style.zIndex = 97;\r\n    hamburger.style.display = \"none\";\r\n  \r\n    return (() => {\r\n      wrapper.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      wrapper.style.pointerEvents = \"auto\";\r\n      rootElement.style.zIndex = 99;\r\n      if (window.innerWidth < 769)\r\n        hamburger.style.display = \"block\";\r\n    })\r\n\r\n  }, []);\r\n\r\n  // DISABLING REMOVE BUTTON AFTER MOUNTING\r\n  useEffect(() => { \r\n    handleRemoveButtonDisabling() \r\n  }, []);\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const handleSelected = (e) => {\r\n    const item = document.getElementById(e.currentTarget.id);\r\n    \r\n    if(e.currentTarget.id) {\r\n      const itemName = item.querySelector(\".window__main__section__large-list__item__name\");\r\n\r\n      // \"UNSELECTING\"\r\n      if (itemName.style.fontWeight === \"bold\") {\r\n        item.style.background = \"#ffffff\";\r\n        itemName.style.fontWeight = \"normal\";\r\n      }\r\n\r\n      // \"SELECTING\"\r\n      else {\r\n        item.style.background = \"#7500AF30\";\r\n        itemName.style.fontWeight = \"bold\";\r\n      }\r\n\r\n      handleRemoveButtonDisabling();\r\n    }\r\n  }\r\n\r\n  const handleRemoveButton = () => {\r\n    const selectedIds = [];\r\n    const items = document.querySelectorAll(\".window__main__section__large-list__item\");\r\n\r\n    items.forEach(item => {\r\n      const name = item.querySelector(\".window__main__section__large-list__item__name\")\r\n      if(name.style.fontWeight === \"bold\")\r\n        selectedIds.push(Number(item.id));\r\n    });\r\n\r\n    if (selectedIds.length !== 0)\r\n      props.handleRemoving(selectedIds);\r\n  }\r\n\r\n  const handleRemoveButtonDisabling = () => {\r\n    const items = document.querySelectorAll(\".window__main__section__large-list__item\");\r\n    let returnedBoolean = false;\r\n   \r\n    for (let i = 0; i < items.length; i++) {\r\n      const name = items[i].querySelector(\".window__main__section__large-list__item__name\");\r\n      if (name.style.fontWeight === \"bold\") {\r\n        returnedBoolean = false;\r\n        break;\r\n      }\r\n      \r\n      else\r\n        returnedBoolean = true;\r\n    }\r\n    setIsRemoveButtonDisabled(returnedBoolean);\r\n  }\r\n\r\n  const handleRemovingAllButton = () => {\r\n    setRemovingAllButtonPressed(true);\r\n  }\r\n\r\n  const handleRemovingAllCancel = () => {\r\n    setRemovingAllButtonPressed(false);\r\n  }\r\n\r\n  const handleRemovingAllConfirm = () => {\r\n    const selectedIds = [];\r\n    const items = document.querySelectorAll(\".window__main__section__large-list__item\");\r\n\r\n    items.forEach(item => {\r\n      selectedIds.push(Number(item.id))\r\n    });\r\n\r\n    props.handleRemoving(selectedIds);\r\n  }\r\n  \r\n\r\n  // RETURN\r\n\r\n  return ReactDOM.createPortal (\r\n    <>\r\n    <section className=\"window\">\r\n\r\n      <header className=\"window__header\">\r\n        <h1 className=\"window__header__heading\">{ props.type === 'exercises' ? \"Remove serie\" : \"Remove product\" }</h1>\r\n        <button className=\"window__header__back-button\" onClick={ props.handleRemoveWindow }><FaChevronCircleLeft /></button>\r\n        <button \r\n          className={ \r\n            isRemoveButtonDisabled\r\n            ? \"window__header__add-button window__header__add-button--disabled\" \r\n            : \"window__header__add-button\" }\r\n          onClick={ handleRemoveButton }><FaTrashAlt /></button>\r\n\r\n      </header>\r\n\r\n      <main className=\"window__main window__main--list\">\r\n\r\n        <ul className=\"window__main__section__large-list window__main__section__large-list--heading\">\r\n          <li className=\"window__main__section__large-list__item window__main__section__large-list__item--heading\">\r\n              { props.type === 'exercises'\r\n                ? <div className=\"window__main__section__large-list__wrapper\">\r\n                    <span className=\"window__main__section__large-list__item__name\" style={{color: \"white\"}}>Serie</span>\r\n                    <span className=\"window__main__section__large-list__item__nutrition-facts\">\r\n                      <p className=\"window__main__section__large-list__item__nutrition-facts__weight\">Weight</p>\r\n                    </span>\r\n                    <span className=\"window__main__section__large-list__item__calories\">Repetitions</span>\r\n                  </div>\r\n\r\n                : <div className=\"window__main__section__large-list__wrapper\">\r\n                    <span className=\"window__main__section__large-list__item__name\" style={{color: \"white\"}}>Product name</span>\r\n                    <span className=\"window__main__section__large-list__item__nutrition-facts\">\r\n                      <p className=\"window__main__section__large-list__item__nutrition-facts__proteins\" title=\"Proteins\">P</p>\r\n                      <p className=\"window__main__section__large-list__item__nutrition-facts__fats\" title=\"Fats\">F</p>\r\n                      <p className=\"window__main__section__large-list__item__nutrition-facts__carbs\" title=\"Carbohydrates\">C</p>\r\n                    </span>\r\n                    <span className=\"window__main__section__large-list__item__calories\">Calories</span>\r\n                  </div> \r\n              }\r\n          </li>\r\n        </ul>\r\n\r\n        <ul className=\"window__main__section__large-list\">\r\n\r\n          { props.list.map(item => {\r\n            return (\r\n              props.type === 'exercises'\r\n\r\n              ? <li onClick={ handleSelected } id={ item.id } key={ item.id } className=\"window__main__section__large-list__item\">\r\n                  <div className=\"window__main__section__large-list__wrapper\">\r\n                    <span id={ item.id } className=\"window__main__section__large-list__item__name\">Serie { item.serieCount }</span>\r\n                    <span id={ item.id } className=\"window__main__section__large-list__item__nutrition-facts\">\r\n                      <p id={ item.id } className=\"window__main__section__large-list__item__nutrition-facts__weight\" title=\"Weight\">{ item.weight } kg</p>\r\n                    </span>\r\n                    <span id={ item.id } className=\"window__main__section__large-list__item__calories\">{ item.reps } reps</span>\r\n                  </div>\r\n                </li>\r\n\r\n              : <li onClick={ handleSelected } id={ item.id } key={ item.id } className=\"window__main__section__large-list__item\">\r\n                  <div className=\"window__main__section__large-list__wrapper\">\r\n                    <span id={ item.id } className=\"window__main__section__large-list__item__name\">{ item.name }</span>\r\n                    <span id={ item.id } className=\"window__main__section__large-list__item__nutrition-facts\">\r\n                      <p id={ item.id } className=\"window__main__section__large-list__item__nutrition-facts__proteins\" title=\"Proteins\">{ item.proteins } g</p>\r\n                      <p id={ item.id } className=\"window__main__section__large-list__item__nutrition-facts__fats\" title=\"Fats\">{ item.fats } g</p>\r\n                      <p id={ item.id } className=\"window__main__section__large-list__item__nutrition-facts__carbs\" title=\"Carbohydrates\">{ item.carbs } g</p>\r\n                    </span>\r\n                    <span id={ item.id } className=\"window__main__section__large-list__item__calories\">{ item.kcal } kcal</span>\r\n                  </div>\r\n                  <span id={ item.id } className=\"window__main__section__large-list__item__weight\">{ item.weight } g</span>\r\n                </li>\r\n            )})\r\n          }\r\n\r\n        </ul>\r\n\r\n      </main>\r\n\r\n      <section className=\"window__bottom\">\r\n          <button className=\"window__bottom__tertiary-button\" onClick={ handleRemovingAllButton }>Remove all</button>\r\n          <div>\r\n            <button className=\"window__bottom__secondary-button\" onClick={ props.handleRemoveWindow }>Cancel</button>\r\n            <button \r\n            className={ isRemoveButtonDisabled\r\n                        ? \"window__bottom__primary-button window__bottom__primary-button--disabled\" \r\n                        : \"window__bottom__primary-button\" }\r\n              onClick={ handleRemoveButton }>Remove</button>\r\n          </div>\r\n        </section>\r\n\r\n    </section>\r\n\r\n    { isRemovingAllButtonPressed \r\n        ? <section className=\"window window--login\">\r\n\r\n            <header className=\"window__header\">\r\n              <h2 className=\"window__header__heading\">Remove all?</h2> \r\n            </header>\r\n\r\n            <main className=\"window__main\">\r\n              <h3 className=\"window__main__message\">{props.type === 'exercises' ? \"Are you sure you want to remove all series in current exercise?\" : \"Are you sure you want to remove all products in current meal?\"}</h3>\r\n            </main>\r\n\r\n            <section className=\"window__bottom\">\r\n              <button className=\"window__bottom__secondary-button\" onClick={ handleRemovingAllCancel }>Cancel</button>\r\n              <button className=\"window__bottom__primary-button\" onClick={ handleRemovingAllConfirm }>Remove</button>\r\n            </section>\r\n          </section>\r\n        : null }\r\n    </>,\r\n    document.getElementById(\"portal\")\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useEffect } from 'react';\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function Product(props) {\r\n\r\n  // EFFECTS\r\n\r\n  // ADDS INGREDIENTS VALUES TO SUMMARY OR SUBSTRACTS AFTER DELETING PRODUCT\r\n  useEffect(() => { \r\n    let ingredients = { proteins: props.proteins, fats: props.fats, carbs: props.carbs, kcal: props.kcal };\r\n    props.addIngredientsFunction(ingredients);\r\n\r\n    return () => {\r\n      props.subIngredientsFunction(ingredients);\r\n    }\r\n\r\n  }, []);\r\n\r\n\r\n  // RETURN\r\n\r\n  return (\r\n    <div className=\"meal__products-section__product\">\r\n      <div className=\"meal__products-section__product__info\">\r\n        <h2 className=\"meal__products-section__product__title\">{props.name}</h2>          \r\n        <p className=\"meal__products-section__product__weight\">{props.weight} g</p>           \r\n      </div>\r\n        \r\n      <ul className=\"meal__products-section__product__stats-list\">             \r\n        <li className=\"meal__products-section__product__stats-list__item\">{props.proteins} g</li>\r\n        <li className=\"meal__products-section__product__stats-list__item\">{props.fats} g</li>\r\n        <li className=\"meal__products-section__product__stats-list__item\">{props.carbs} g</li>\r\n        <li className=\"meal__products-section__product__stats-list__item meal__products-section__product__stats-list__item--kcal\">{props.kcal} kcal</li>\r\n      </ul>\r\n    </div>\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useState, useEffect, useReducer } from 'react';\r\nimport AddWindow from '../product_adding_window/ProductAddingWindow';\r\nimport RemoveWindow from '../product_removing_window/ProductRemovingWindow';\r\nimport Product from './Product';\r\nimport './styles/meal.css';\r\n\r\nimport { db } from '../../index'; \r\nimport { collection, getDocs, setDoc, doc } from \"firebase/firestore\";\r\n\r\n\r\n\r\n\r\n// VARIABLES\r\n\r\nexport const warnings = {\r\n  name:   \"Name must be a string of letters only\",\r\n  weight: \"Weight must be a positive number\",\r\n  macros: \"Macronutrient must be a number\"\r\n}\r\n\r\nconst ACTIONS = {\r\n  NEGATE_MEAL_STATE: 'negate-meal-state',\r\n  NEGATE_ADDING_WINDOW_STATE: 'negate-adding-window-state',\r\n  NEGATE_REMOVING_WINDOW_STATE: 'negate-removing-window-state',\r\n  ADD_PRODUCT: 'add-product',\r\n  ENABLE_PLACEHOLDER: 'enable-placeholder',\r\n  DISABLE_PLACEHOLDER: 'disable-placeholder',\r\n  SET_WARNING: 'set-warning',\r\n  CLEAR_WARNING: 'clear-warning',\r\n  REMOVE_PRODUCT: 'remove-product',\r\n  ADD_TO_SUMMARY: 'add-to-summary',\r\n  SUB_FROM_SUMMARY: 'sub-from-summary',\r\n  CLEAR_PRODUCTLIST_BEFORE_DAY_CHANGING: 'clear-productlist-before-day-changing',\r\n  ADD_PRODUCT_TO_PRODUCTLIST: 'add-product-to-productlist'\r\n}\r\n\r\n// COMPONENT\r\n\r\nexport default function Meal(props) {\r\n\r\n  // VARIABLES\r\n\r\n  const saveProductInDatabase = async (productList) => {\r\n    let newProductList = [];\r\n    let oldProductList = [];\r\n\r\n    // CHECKING IF PRODUCTLIST EXIST\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.id === props.userId) {\r\n          if (user.data().productList)\r\n            oldProductList = user.data().productList;\r\n        }\r\n      });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    newProductList = oldProductList.concat(productList);\r\n    \r\n    // OVERWRITING OLD PRODUCTLIST USING NEW LIST\r\n    try {\r\n      await setDoc(doc(db, \"users\", String(props.userId)), {\r\n        productList: newProductList\r\n      },\r\n      { merge: true });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const removeProductsFromDatabase = async (selectedProducts) => {\r\n    let oldProductList = [];\r\n    let newProductList = [];\r\n\r\n    // GETTING ALL PRODUCTS SAVED IN DATABASE\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.id === props.userId) {\r\n          if (user.data().productList)\r\n            oldProductList = user.data().productList;\r\n        }\r\n      });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    newProductList = oldProductList;\r\n\r\n    // DELETING SELECTED PRODUCTS\r\n    selectedProducts.forEach(selectedId => {\r\n      newProductList.forEach((product, index) => {\r\n        if (Number(product.id) === Number(selectedId)) {\r\n          newProductList.splice(index, 1);\r\n        }\r\n      });\r\n    });\r\n\r\n    // OVERWRITING PRODUCTLIST USING NEW\r\n    try {\r\n      await setDoc(doc(db, \"users\", String(props.userId)), {\r\n        productList: newProductList\r\n      },\r\n      { merge: true });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n \r\n  const initialState = {\r\n    isMealOpened: false, \r\n    isAddingWindowOpened: false,\r\n    isRemovingWindowOpened: false,\r\n    countIngredients: false,\r\n    productList: [],\r\n    newProduct: { id: 0, mealId: props.mealId, dateIds: { dayId: 0, monthId: 0, yearId: 0 },  name: '', weight: '', proteins: '', fats: '', carbs: '', kcal: '' },\r\n    warning: ['', ''],\r\n    summary: {\r\n      proteins: 0,\r\n      fats: 0,\r\n      carbs: 0,\r\n      kcal: 0\r\n    }\r\n  };\r\n\r\n\r\n  // HOOKS\r\n\r\n  const reducer = (state, action) => {\r\n    switch(action.type) {\r\n\r\n      case ACTIONS.NEGATE_MEAL_STATE:\r\n        return {...state, isMealOpened: !state.isMealOpened};\r\n      \r\n      case ACTIONS.NEGATE_ADDING_WINDOW_STATE:\r\n        return {...state, isAddingWindowOpened: !state.isAddingWindowOpened};\r\n\r\n      case ACTIONS.NEGATE_REMOVING_WINDOW_STATE:\r\n        return {...state, isRemovingWindowOpened: !state.isRemovingWindowOpened};\r\n\r\n      case ACTIONS.CHANGE_NEW_PRODUCT_DATA: {\r\n        switch (action.payload.key) {\r\n          case 'name':      return {...state, newProduct: {...state.newProduct, name:     action.payload.value}};\r\n          case 'weight':    return {...state, newProduct: {...state.newProduct, weight:   action.payload.value}};\r\n          case 'proteins':  return {...state, newProduct: {...state.newProduct, proteins: action.payload.value}};\r\n          case 'fats':      return {...state, newProduct: {...state.newProduct, fats:     action.payload.value}};\r\n          case 'carbs':     return {...state, newProduct: {...state.newProduct, carbs:    action.payload.value}};\r\n          case 'kcal':      return {...state, newProduct: {...state.newProduct, kcal:     action.payload.value}};\r\n        }\r\n      }\r\n\r\n      case ACTIONS.ADD_PRODUCT: {\r\n        const newProductList = state.productList;\r\n        state.newProduct.id = Date.now();\r\n        state.newProduct.dateIds = props.dateIds;\r\n\r\n        // SAVING IN DATABASE\r\n        saveProductInDatabase([state.newProduct]);\r\n\r\n        // SAVING IN STATE\r\n        newProductList.push(state.newProduct);\r\n\r\n        return {...state, newProduct: { id: 0, mealId: props.mealId, dateIds: { dayId: 0, monthId: 0, yearId: 0 }, name: '', weight: '', proteins: '', fats: '', carbs: '', kcal: ''},\r\n                          productList: newProductList };\r\n      }\r\n\r\n      case ACTIONS.SET_WARNING: {\r\n        switch (action.payload) {\r\n          case 'name':  return { ...state, warning: [warnings.name, action.payload] }\r\n          case 'weight':  return { ...state, warning: [warnings.weight, action.payload] }\r\n          default:  return { ...state, warning: [warnings.macros, action.payload] }\r\n        };\r\n      }\r\n\r\n      case ACTIONS.CLEAR_WARNING: {\r\n        return { ...state, warning: ['', action.payload]};\r\n      }\r\n\r\n      case ACTIONS.REMOVE_PRODUCT: {\r\n        let newProductList = state.productList;\r\n        let checkedIdList = action.payload;\r\n\r\n        // DELETING FROM DATABASE\r\n        removeProductsFromDatabase(checkedIdList);\r\n\r\n        // DELETING FROM STATE\r\n        checkedIdList.forEach(selectedId => {\r\n          newProductList.forEach((product, index) => {\r\n            if (Number(product.id) === Number(selectedId)) { newProductList.splice(index, 1) }\r\n          });\r\n        });\r\n\r\n        return {...state, productList: newProductList};\r\n      }\r\n\r\n      case ACTIONS.ADD_TO_SUMMARY: {\r\n        switch (action.payload.ingredient) {\r\n          case 'proteins': return {...state, summary: {...state.summary, proteins: state.summary.proteins + Number(action.payload.value)}};\r\n          case 'fats':     return {...state, summary: {...state.summary, fats:     state.summary.fats     + Number(action.payload.value)}};\r\n          case 'carbs':    return {...state, summary: {...state.summary, carbs:    state.summary.carbs    + Number(action.payload.value)}};\r\n          case 'kcal':     return {...state, summary: {...state.summary, kcal:     state.summary.kcal     + Number(action.payload.value)}};\r\n        }\r\n      }\r\n      \r\n      case ACTIONS.SUB_FROM_SUMMARY: {\r\n        switch (action.payload.ingredient) {\r\n          case 'proteins': return {...state, summary: {...state.summary, proteins: state.summary.proteins - Number(action.payload.value)}};\r\n          case 'fats':     return {...state, summary: {...state.summary, fats:     state.summary.fats     - Number(action.payload.value)}};\r\n          case 'carbs':    return {...state, summary: {...state.summary, carbs:    state.summary.carbs    - Number(action.payload.value)}};\r\n          case 'kcal':     return {...state, summary: {...state.summary, kcal:     state.summary.kcal     - Number(action.payload.value)}};\r\n        }\r\n      }\r\n\r\n      case ACTIONS.ADD_PRODUCT_TO_PRODUCTLIST: {\r\n        return {...state, productList: [...state.productList, action.payload]};\r\n      }\r\n\r\n      case ACTIONS.CLEAR_PRODUCTLIST_BEFORE_DAY_CHANGING: {\r\n        return {...state, productList: []};\r\n      }\r\n\r\n      default: return console.error(`Unknown action type: ${action.type}`);\r\n    }\r\n  }\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  const [isPlaceholderEnabled, setPlaceholderState] = useState(false);\r\n\r\n  const loadProductListFromDatabase = async () => {\r\n    clearProductList();\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.id === props.userId) {\r\n          if (user.data().productList) {\r\n            user.data().productList.forEach(product => {\r\n              if (product.mealId === props.mealId && ((product.dateIds.dayId === props.dateIds.dayId) &&\r\n                                            (product.dateIds.monthId === props.dateIds.monthId) &&\r\n                                            (product.dateIds.yearId === props.dateIds.yearId)))\r\n                dispatch({ type: ACTIONS.ADD_PRODUCT_TO_PRODUCTLIST, payload: product });\r\n            });\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const clearProductList = () => {\r\n    dispatch({ type: ACTIONS.CLEAR_PRODUCTLIST_BEFORE_DAY_CHANGING });\r\n  }\r\n\r\n\r\n  // EFFECTS\r\n\r\n  // LOADS PRODUCTS FROM DATABASE\r\n  useEffect(() => {\r\n    clearProductList();\r\n    loadProductListFromDatabase();\r\n\r\n  }, [ props.userId, props.dateIds ]);\r\n\r\n  // RELOADS PRODUCTS FROM DATABASE AFTER ENTERING SETTINGS PAGE\r\n  useEffect(() => {\r\n    clearProductList();\r\n    loadProductListFromDatabase();\r\n    \r\n  }, [ props.isSettingsOpened ])\r\n\r\n  // CLOSES WINDOWS AFTER DAY CHANGE\r\n  useEffect(() => {\r\n    const disableVisibilityIfEnabled = (state, action) => {\r\n      if (state)\r\n        dispatch({type: action});\r\n    }\r\n    \r\n    disableVisibilityIfEnabled(state.isMealOpened, ACTIONS.NEGATE_MEAL_STATE);\r\n    disableVisibilityIfEnabled(state.isAddingWindowOpened, ACTIONS.NEGATE_ADDING_WINDOW_STATE);\r\n    disableVisibilityIfEnabled(state.isRemovingWindowOpened, ACTIONS.NEGATE_REMOVING_WINDOW_STATE);\r\n\r\n  }, [ props.userId, props.dateIds ])\r\n\r\n  // SENDS DATA FROM MEAL TO GAUGES\r\n  useEffect(() => { \r\n    props.updateGauges(state.summary, props.mealId);\r\n\r\n  }, [ state.summary ]);\r\n\r\n  // DISABLES POINTER EVENTS WHEN ONE OF FORM WINDOWS IS OPENED \r\n  useEffect(() => {\r\n    const changePointerEvents = (value) => {\r\n      const meals = document.querySelectorAll(\".meal\");\r\n      const wrapper = document.querySelector(\".wrapper\");\r\n      const center = document.querySelector(\".center-section\");\r\n\r\n      meals.forEach(meal => {\r\n        let buttons = meal.querySelector(\".meal__buttons-section\");\r\n        buttons.style.pointerEvents = value;\r\n        wrapper.style.pointerEvents = value;\r\n\r\n        // DISABLING SCROLL AT CENTER SECTION \r\n        value === \"none\" ? center.style.overflowY = \"hidden\" : center.style.overflowY = \"auto\";\r\n      });\r\n    }\r\n\r\n\r\n    state.isAddingWindowOpened || state.isRemovingWindowOpened\r\n    ? changePointerEvents(\"none\")\r\n    : changePointerEvents(\"auto\");\r\n    \r\n  }, [ state.isAddingWindowOpened, state.isRemovingWindowOpened ]);\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const handleMealOpening = () => {\r\n    dispatch( {type: ACTIONS.NEGATE_MEAL_STATE} );\r\n  }\r\n\r\n  const handleAddingToSummary = (object) => {\r\n    Object.keys(object).forEach(key => {\r\n      dispatch({\r\n        type: ACTIONS.ADD_TO_SUMMARY,\r\n        payload: {\r\n          ingredient: key,\r\n          value: object[key]\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  const handleSubstractingFromSummary = (object) => {\r\n    Object.keys(object).forEach(key => {\r\n      dispatch({\r\n        type: ACTIONS.SUB_FROM_SUMMARY,\r\n        payload: {\r\n          ingredient: key,\r\n          value: object[key]\r\n        }\r\n      });\r\n    });\r\n    \r\n  }\r\n\r\n  const handleAddWindow = () => {\r\n    dispatch( {type: ACTIONS.NEGATE_ADDING_WINDOW_STATE} );\r\n  }\r\n\r\n  const handleRemoveWindow = () => {\r\n    dispatch( {type: ACTIONS.NEGATE_REMOVING_WINDOW_STATE} );\r\n  }\r\n\r\n  const handleProductAdding = (e) => {\r\n    e.preventDefault();\r\n    setTimeout(() => { dispatch({ type: ACTIONS.ADD_PRODUCT }) }, 10);\r\n    dispatch({ type: ACTIONS.NEGATE_ADDING_WINDOW_STATE });\r\n  }\r\n\r\n  const handlePredefinedProductsAdding = (selectedProducts) => {\r\n    let modifiedSelectedProducts = [];\r\n\r\n    modifiedSelectedProducts = selectedProducts.map((item, index) => {\r\n      return {\r\n        ...item,\r\n        mealId: props.mealId,\r\n        dateIds: props.dateIds,\r\n        id: Date.now() + index * 10\r\n      }\r\n    });\r\n\r\n    // ADDING TO STATE\r\n    modifiedSelectedProducts.forEach(product => {\r\n      dispatch({ type: ACTIONS.ADD_PRODUCT_TO_PRODUCTLIST, payload: product });\r\n    });\r\n\r\n    // ADDING TO DATABASE\r\n    saveProductInDatabase(modifiedSelectedProducts, true);\r\n\r\n    dispatch({ type: ACTIONS.NEGATE_ADDING_WINDOW_STATE });\r\n  }\r\n\r\n  const handleProductRemoving = (checkedIdsList) => {\r\n    dispatch({ type: ACTIONS.REMOVE_PRODUCT, payload: checkedIdsList });\r\n    dispatch({ type: ACTIONS.NEGATE_REMOVING_WINDOW_STATE });\r\n  }\r\n\r\n  const handleFormClearing = () => {\r\n    dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: 'name', value: '' }});\r\n    dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: 'weight', value: '' }});\r\n    dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: 'proteins', value: '' }});\r\n    dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: 'fats', value: '' }});\r\n    dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: 'carbs', value: '' }});\r\n    dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: 'kcal', value: '' }});\r\n    setPlaceholderState(false);\r\n  }\r\n\r\n  const handleOnChange = (e) => {\r\n    const isNumber = /[0-9]/;\r\n    const isWord = /[a-z\\s]/i;\r\n    const isZero = /^[0]{1}/;\r\n\r\n    const setValueAsZero = () => {\r\n      dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: e.target.id, value: '0' }});\r\n      dispatch({ type: ACTIONS.CLEAR_WARNING, payload: e.target.id });\r\n    }\r\n\r\n    const setValueAsNull = () => {\r\n      dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: e.target.id, value: \"\" } });\r\n      dispatch({ type: ACTIONS.SET_WARNING, payload: e.target.id });\r\n    }\r\n\r\n    const setValueAsCorrect = () => {\r\n      dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: e.target.id, value: e.target.value }});\r\n      dispatch({ type: ACTIONS.CLEAR_WARNING, payload: e.target.id });\r\n    }\r\n\r\n    if (e.target.id === 'name') {\r\n      isWord.test(e.target.value[e.target.value.length - 1]) ? setValueAsCorrect() : setValueAsNull();\r\n    }\r\n\r\n    else {\r\n      if (isNumber.test(e.target.value[e.target.value.length - 1])) {\r\n        if (isZero.test(e.target.value))\r\n          e.target.id === 'weight' ? setValueAsNull() : setValueAsZero();\r\n        else\r\n          setValueAsCorrect();\r\n      }\r\n      else {\r\n        setValueAsNull();\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // RETURN\r\n\r\n  return (\r\n    <div className=\"meal\" style={ (state.isMealOpened && window.innerWidth > 768) ? {left: '-10px'} : {left: '0px'} }>\r\n      <section className=\"meal__top-section\" onClick={ props.userStatus === \"Log in\" ? props.loginShortcut : handleMealOpening }>\r\n        \r\n        <h2 className=\"meal__top-section__meal-title\">{props.name}</h2>        \r\n        \r\n        <ul className=\"meal__top-section__meal-stats-list\">                   \r\n          <li className=\"meal__top-section__meal-stats-list__item\">{ state.summary.proteins } g</li>\r\n          <li className=\"meal__top-section__meal-stats-list__item\">{ state.summary.fats } g</li>\r\n          <li className=\"meal__top-section__meal-stats-list__item\">{ state.summary.carbs } g</li>\r\n          <li className=\"meal__top-section__meal-stats-list__item\">{ state.summary.kcal } kcal</li>\r\n        </ul> \r\n\r\n      </section>\r\n\r\n      { state.productList.length !== 0 ? (\r\n        <section className=\"meal__products-section\" style={ state.isMealOpened ? {display: \"flex\"} : {display: \"none\"} }>\r\n       \r\n        { state.productList.map(product => {\r\n          return (\r\n            <Product key={ product.id } \r\n              name={ product.name }\r\n              weight={ product.weight }\r\n              proteins={ product.proteins }\r\n              fats={ product.fats }\r\n              carbs={ product.carbs }\r\n              kcal={ product.kcal }\r\n              addIngredientsFunction={ handleAddingToSummary }\r\n              subIngredientsFunction={ handleSubstractingFromSummary }>\r\n            </Product>\r\n          )\r\n        })}\r\n\r\n        </section>\r\n      ) : null }\r\n      \r\n      <section className=\"meal__buttons-section\" style={ state.isMealOpened ? {display: \"flex\"} : {display: \"none\"} }>\r\n        <div>\r\n        <button \r\n          className={ state.productList.length ? \"meal__buttons-section__remove-button\" : \"meal__buttons-section__remove-button meal__buttons-section__remove-button--disabled\" } \r\n          onClick={ state.productList.length ? handleRemoveWindow : null } \r\n          disabled={ state.isAddingWindowOpened || state.isRemovingWindowOpened ? true : false }>\r\n          Remove</button> \r\n\r\n        <button \r\n          className=\"meal__buttons-section__add-button\" \r\n          onClick={ handleAddWindow } \r\n          disabled={ state.isAddingWindowOpened || state.isRemovingWindowOpened ? true : false }>\r\n          Add</button>  \r\n        </div>     \r\n      \r\n      </section>\r\n\r\n      { state.isAddingWindowOpened \r\n        ? <AddWindow \r\n            data={{ \r\n              isPlaceholderEnabled: isPlaceholderEnabled,\r\n              name: state.newProduct.name, \r\n              weight: state.newProduct.weight,\r\n              proteins: state.newProduct.proteins,\r\n              fats: state.newProduct.fats,\r\n              carbs: state.newProduct.carbs,\r\n              kcal: state.newProduct.kcal }}\r\n            warning={ state.warning }\r\n            handleOnChange={ handleOnChange }\r\n            handleFormClearing={ handleFormClearing }\r\n            handleProductAdding={ handleProductAdding }\r\n            handleAddWindow={ handleAddWindow }\r\n            handlePredefinedProductsAdding={ handlePredefinedProductsAdding }\r\n          />\r\n        : null }\r\n\r\n      { state.isRemovingWindowOpened \r\n        ? <RemoveWindow\r\n            list={ state.productList }\r\n            handleRemoving={ handleProductRemoving }\r\n            handleRemoveWindow={ handleRemoveWindow }\r\n          />\r\n        : null }\r\n\r\n    </div>\r\n  )\r\n}","// IMPORTS\r\n\r\nimport React from 'react';\r\nimport './styles/right.css';\r\n\r\n\r\n// PRIMARY COMPONENTS\r\n\r\nexport default function Gauge(props) {\r\n  const handleRotation = () => {\r\n    const rotationDegrees = props.percent * 2.7;\r\n    if (rotationDegrees < 90)\r\n      return {transform: `rotate(${rotationDegrees}deg)`};\r\n    if (rotationDegrees >= 90 && rotationDegrees < 180)\r\n      return {transform: `rotate(${rotationDegrees}deg)`, borderRightColor: `#ffffff80`};  \r\n    if (rotationDegrees >= 180)\r\n      return {transform: `rotate(${rotationDegrees}deg)`, borderRightColor: `#ffffff80`, borderTopColor: '#ffffff80'};\r\n  }\r\n\r\n  return (\r\n\r\n    <div className={ !props.isKcal ? \"right-section__gauge-container\" : \"right-section__gauge-container right-section__gauge-container--kcal\" }>\r\n        \r\n        <div className={ !props.isKcal ? \"right-section__gauge-container__bar\" : \"right-section__gauge-container__bar right-section__gauge-container__bar--kcal\" } \r\n          style={ props.percent < 100 ? handleRotation() : {borderColor: \"#e00000\"}}>    \r\n        </div>\r\n\r\n        <div className={ !props.isKcal ? \"right-section__gauge-container__text\" : \"right-section__gauge-container__text right-section__gauge-container__text--kcal\" }>\r\n           <h4 className={ !props.isKcal ? \"right-section__gauge-container__text__amount\" : \"right-section__gauge-container__text__amount right-section__gauge-container__text__amount--kcal\" }>\r\n             {props.amount} {!props.isKcal ? \"g\" : null}</h4>\r\n           <h6 className={ !props.isKcal ? \"right-section__gauge-container__text__name\" : \"right-section__gauge-container__text__name right-section__gauge-container__text__name--kcal\" }>\r\n             {props.name} </h6>\r\n           <p className={ !props.isKcal ? \"right-section__gauge-container__text__percent\" : \"right-section__gauge-container__text__percent right-section__gauge-container__text__percent--kcal\" }>\r\n             {props.percent} %</p>\r\n           <h5 className={ !props.isKcal ? \"right-section__gauge-container__text__left\" : \"right-section__gauge-container__text__left right-section__gauge-container__text__left--kcal\" }>\r\n             {props.left} {!props.isKcal ? \"g\" : null} left</h5>\r\n        </div>\r\n\r\n    </div>\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { FaChevronCircleLeft } from 'react-icons/fa';\r\n \r\n\r\n// COMPONENT\r\n\r\nexport default function MoreWindow(props) {\r\n\r\n  // EFFECTS\r\n\r\n  // BLURING AND DISABLING POINTER EVENTS ON BACKGROUND AND DELAYING AN IFRAME AFTER MOUNTING\r\n  useEffect(() => {\r\n    const wrapper = document.querySelector(\".wrapper\");\r\n    const iframe = document.querySelector(\".window__main__section__iframe\");\r\n    const rootElement = document.querySelector(\"#root\");\r\n    const hamburger = document.querySelector(\".left-section__hamburger\");\r\n    wrapper.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n    wrapper.style.pointerEvents = \"none\";\r\n    setTimeout(() => { iframe.style.opacity = \"1\" }, 500);\r\n    rootElement.style.zIndex = 97;\r\n    hamburger.style.display = \"none\";\r\n  \r\n    return (() => {\r\n      wrapper.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      wrapper.style.pointerEvents = \"auto\";\r\n      rootElement.style.zIndex = 99;\r\n      if (window.innerWidth < 769)\r\n        hamburger.style.display = \"block\";\r\n    })\r\n\r\n  }, []);\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const handleBackButton = () => {\r\n    props.handleMoreWindow();\r\n  }\r\n\r\n\r\n  // RETURN\r\n\r\n  return ReactDOM.createPortal (\r\n    <div className=\"window window--more\">\r\n\r\n      <header className=\"window__header\">\r\n        <h2 className=\"window__header__heading\">{ props.title }</h2>\r\n        <button className=\"window__header__back-button\" onClick={ handleBackButton }><FaChevronCircleLeft /></button>\r\n      </header>\r\n\r\n      <main className=\"window__main\">\r\n\r\n        <section className=\"window__main__section\"> \r\n          <h3 className=\"window__main__section__title\">Description</h3>\r\n          <p className=\"window__main__section__text\">{ props.description }</p>\r\n        </section>\r\n\r\n        <section className=\"window__main__section window__main__section--halfed\">\r\n          <aside className=\"window__main__section__split-left\">\r\n            <h3 className=\"window__main__section__title\">Difficulty</h3>\r\n            <div className=\"exercise__top-section__grade-container\" style={{ marginBottom: \"15px\" }}>\r\n              <span className=\"exercise__top-section__grade-container__point exercise__top-section__grade-container__point--filled\"></span>\r\n              <span className={ props.difficulty >= 2 ? \"exercise__top-section__grade-container__point exercise__top-section__grade-container__point--filled\" : \"exercise__top-section__grade-container__point\" }></span>\r\n              <span className={ props.difficulty === 3 ? \"exercise__top-section__grade-container__point exercise__top-section__grade-container__point--filled\" : \"exercise__top-section__grade-container__point\" }></span>\r\n            </div>\r\n            <p className=\"window__main__section__text\">{ props.typeOfExercise }</p>\r\n          </aside>\r\n          <aside className=\"window__main__section__split-right\">\r\n            <h3 className=\"window__main__section__title\">Muscles</h3>\r\n            <ul className=\"window__main__section__list\">\r\n              { props.muscles.map((muscle, index) => { return <li key={ index } className=\"window__main__section__list__item\">{ muscle }</li> }) } \r\n            </ul>\r\n          </aside>\r\n        </section>\r\n\r\n        <section className=\"window__main__section\">\r\n          <h3 className=\"window__main__section__title\">Proper form</h3>\r\n          <iframe className=\"window__main__section__iframe\" allowFullScreen width=\"100%\" height=\"300px\" src={ props.properFormLink }></iframe>\r\n        </section>\r\n\r\n      </main>\r\n\r\n      <section className=\"window__bottom\">\r\n        <div></div>\r\n        <button className=\"window__bottom__primary-button\" type=\"button\" onClick={ handleBackButton }>Back</button>\r\n      </section>\r\n\r\n    </div>,\r\n    document.getElementById('portal')\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useEffect, useReducer } from 'react';\r\nimport './style/exercise.css';\r\nimport './../meal/styles/meal.css';\r\n\r\nimport AddWindow from '../product_adding_window/ProductAddingWindow';\r\nimport RemoveWindow from '../product_removing_window/ProductRemovingWindow';\r\nimport MoreWindow from '../MoreWindow/MoreWindow';\r\n\r\nimport { db } from '../../index'; \r\nimport { collection, getDocs, setDoc, doc } from \"firebase/firestore\";\r\n\r\n\r\n// VARIABLES\r\n\r\nexport const warnings = {\r\n  weight: \"Weight must be a positive number\",\r\n  reps: \"Reps must be a positive number\"\r\n};\r\n\r\n// COMPONENT\r\n\r\nexport default function Exercise(props) {\r\n\r\n  // VARIABLES\r\n\r\n  const ACTIONS = {\r\n    NEGATE_EXERCISE_OPENED: 'negate-exercise-opened',\r\n    NEGATE_ADD_WINDOW_STATE: 'negate-add-window-state',\r\n    NEGATE_REMOVE_WINDOW_STATE: 'negate-remove-window-state',\r\n    NEGATE_MORE_WINDOW_STATE: 'negate-more-window-state',\r\n    SORT_SERIESLIST: 'sort-serieslist',\r\n    CHANGE_NEW_SERIE_DATA: 'change-new-serie-data',\r\n    UPDATE_LASTTIME_DATA: 'update-lasttime-data',\r\n    SET_WARNING: 'set-warning',\r\n    CLEAR_WARNING: 'clear-warning',\r\n    ADD_SERIE: 'add-serie',\r\n    REMOVE_SERIE: 'remove-serie',\r\n    ADD_SERIE_TO_SERIESLIST: 'add-serie-to-serieslist',\r\n    CLEAR_SERIESLIST_BEFORE_DAY_CHANGING: 'clear-serieslist-before-day-change'\r\n  }\r\n\r\n  const initialState = {\r\n    isExerciseOpened: false,\r\n    isAddWindowOpened: false,\r\n    isRemoveWindowOpened: false,\r\n    isMoreWindowOpened: false,\r\n    lastTimeData: { \r\n      training: { weight: \"First time\", reps: \"First time\" },\r\n      serie: { weight: \"First time\", reps: \"First time\" } \r\n    },\r\n    seriesList: [],\r\n    warning: ['', ''],\r\n    newSerie: { id: 0, exerciseId: props.exerciseId, trainingId: 0, dateIds: { dayId: 0, monthId: 0, yearId: 0 }, serieCount: '', weight: '', reps:'' }\r\n  }\r\n\r\n  const removeSeriesFromDatabase = async (selectedSeries, state) => {\r\n    let newSeriesList = [];\r\n    let currentExerciseSeries = state;\r\n    let serieCount = 1;\r\n\r\n    // GETTING ALL SERIES SAVED IN DATABASE\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.id === props.userId) {\r\n          if (user.data().seriesList)\r\n            newSeriesList = user.data().seriesList;\r\n        }\r\n      });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    // DELETING SERIES PRODUCTS\r\n    selectedSeries.forEach(selectedId => {\r\n      newSeriesList.forEach((serie, index) => {\r\n        if (Number(serie.id) === Number(selectedId)) {\r\n          newSeriesList.splice(index, 1);\r\n        }\r\n      });\r\n    });\r\n\r\n    // SERIE ORDER COUNTING\r\n    currentExerciseSeries.forEach(serie => {\r\n      serie.serieCount = serieCount;\r\n      newSeriesList.forEach(databaseSerie => {\r\n        if (databaseSerie.id === serie.id)\r\n          databaseSerie.serieCount = serieCount;\r\n      });\r\n      serieCount++;\r\n    });\r\n\r\n    // OVERWRITING PRODUCTLIST USING NEW LIST\r\n    try {\r\n      await setDoc(doc(db, \"users\", String(props.userId)), {\r\n        seriesList: newSeriesList\r\n      },\r\n      { merge: true });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const saveSerieInDatabase = async (serie) => {\r\n    let newSeriesList = [];\r\n\r\n    // CHECKING IF SERIESLIST EXIST\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.id === props.userId) {\r\n          if (user.data().seriesList)\r\n            newSeriesList = user.data().seriesList;\r\n        }\r\n      });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    newSeriesList.push(serie);\r\n\r\n    // OVERWRITING OLD SERIESLIST USING NEW LIST\r\n    try {\r\n      await setDoc(doc(db, \"users\", String(props.userId)), {\r\n        seriesList: newSeriesList\r\n      },\r\n      { merge: true });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const getPreviousTrainingDate = (previousDateIds) => {\r\n    const isLeapYear = () => {\r\n      if (((previousDateIds.yearId % 4 === 0) && (previousDateIds.yearId % 100 !== 0)) || previousDateIds.yearId % 400 === 0)\r\n         return true;\r\n      \r\n      else\r\n         return false;\r\n    }\r\n    const isDayFirstInMonth = () => {\r\n      if(previousDateIds.dayId === 1)\r\n        return true;\r\n      else\r\n        return false;\r\n    }\r\n    const isDayFirstInJanuary = () => {\r\n      if ((previousDateIds.dayId === 1) && (previousDateIds.monthId === 1))\r\n        return true;\r\n      \r\n      else\r\n        return false;\r\n    }\r\n    const isDayFirstInMarch = () => {\r\n      if ((previousDateIds.dayId === 1) && (previousDateIds.monthId === 3))\r\n        return true;\r\n      \r\n      else\r\n        return false;\r\n    }\r\n    const isDayFirstIn30DayMonths = () => {\r\n      if ((previousDateIds.dayId === 1) && ((previousDateIds.monthId === 4) || (previousDateIds.monthId === 6) || (previousDateIds.monthId === 8) || (previousDateIds.monthId === 9) || (previousDateIds.monthId === 11)))\r\n        return true;\r\n      \r\n      else\r\n        return false;\r\n    }\r\n\r\n    let potentialPreviousDateIds = { dayId: 0, monthId: 0, yearId: 0 };\r\n\r\n    if (isDayFirstInJanuary()) {\r\n      potentialPreviousDateIds.dayId = 31;\r\n      potentialPreviousDateIds.monthId = 12;\r\n      potentialPreviousDateIds.yearId = previousDateIds.yearId - 1;\r\n    }\r\n\r\n    else if (isDayFirstInMarch()) {\r\n      if(isLeapYear())\r\n        potentialPreviousDateIds.dayId = 29;\r\n      else\r\n        potentialPreviousDateIds.dayId = 28;\r\n      \r\n      potentialPreviousDateIds.monthId = 2;\r\n      potentialPreviousDateIds.yearId = previousDateIds.yearId;\r\n    }\r\n\r\n    else if (isDayFirstIn30DayMonths()) {\r\n      potentialPreviousDateIds.dayId = 31;\r\n      potentialPreviousDateIds.monthId = previousDateIds.monthId - 1;\r\n      potentialPreviousDateIds.yearId = previousDateIds.yearId;\r\n    }\r\n\r\n    else if (isDayFirstInMonth()) {\r\n      potentialPreviousDateIds.dayId = 30\r\n      potentialPreviousDateIds.monthId = previousDateIds.monthId - 1;\r\n      potentialPreviousDateIds.yearId = previousDateIds.yearId;\r\n    }\r\n    \r\n    else {\r\n      potentialPreviousDateIds.dayId = previousDateIds.dayId - 1;\r\n      potentialPreviousDateIds.monthId = previousDateIds.monthId;\r\n      potentialPreviousDateIds.yearId = previousDateIds.yearId;\r\n    }\r\n    return potentialPreviousDateIds;\r\n  }\r\n\r\n  \r\n  // HOOKS\r\n\r\n  const reducer = (state, action) => {\r\n    switch(action.type) {\r\n      \r\n      case ACTIONS.NEGATE_EXERCISE_OPENED: {\r\n        return {...state, isExerciseOpened: !state.isExerciseOpened};\r\n      }\r\n    \r\n      case ACTIONS.NEGATE_ADD_WINDOW_STATE: {\r\n        return {...state, isAddWindowOpened: !state.isAddWindowOpened};\r\n      }\r\n\r\n      case ACTIONS.NEGATE_REMOVE_WINDOW_STATE: {\r\n        return {...state, isRemoveWindowOpened: !state.isRemoveWindowOpened};\r\n      }\r\n\r\n      case ACTIONS.NEGATE_MORE_WINDOW_STATE: {\r\n        return {...state, isMoreWindowOpened: !state.isMoreWindowOpened};\r\n      }\r\n\r\n      case ACTIONS.CHANGE_NEW_SERIE_DATA: {\r\n        switch (action.payload.key) {\r\n          case 'weight':      return { ...state, newSerie: { ...state.newSerie, weight: action.payload.value } };\r\n          case 'reps':        return { ...state, newSerie: { ...state.newSerie, reps:   action.payload.value } };\r\n        }\r\n      }\r\n\r\n      case ACTIONS.ADD_SERIE: {\r\n        const newSeriesList = state.seriesList;\r\n        let serieCount = 1;\r\n        state.newSerie.id = Date.now();\r\n        state.newSerie.dateIds = props.dateIds;\r\n\r\n        // SAVING IN DATABASE\r\n        saveSerieInDatabase(state.newSerie);\r\n        \r\n        // SAVING IN STATE\r\n        newSeriesList.push(state.newSerie);\r\n\r\n        // SERIE ORDER COUNTING\r\n        newSeriesList.forEach(serie => {\r\n          serie.serieCount = serieCount;\r\n          serieCount++;\r\n        });\r\n\r\n        return {\r\n          ...state,\r\n          newSerie: { id: 0, exerciseId: props.exerciseId, dateIds: { dayId: 0, monthId: 0, yearId: 0 }, serieCount: '', weight: '', reps: '' },\r\n          seriesList: newSeriesList };\r\n      }\r\n\r\n      case ACTIONS.REMOVE_SERIE: {\r\n        let updatedSeriesList = state.seriesList;\r\n        let checkedIdList = action.payload;\r\n        let serieCount = 1;\r\n\r\n        // DELETING SERIES PRODUCTS\r\n        checkedIdList.forEach(selectedId => {\r\n          updatedSeriesList.forEach((serie, index) => {\r\n            if (Number(serie.id) === Number(selectedId)) {\r\n              updatedSeriesList.splice(index, 1);\r\n            }\r\n          });\r\n        });\r\n\r\n        // SERIE ORDER COUNTING\r\n        updatedSeriesList.forEach(serie => {\r\n          serie.serieCount = serieCount;\r\n          serieCount++;\r\n        });\r\n\r\n        removeSeriesFromDatabase(checkedIdList, updatedSeriesList);\r\n\r\n        return { ...state, seriesList: updatedSeriesList };\r\n      }\r\n\r\n      case ACTIONS.SET_WARNING: {\r\n        switch (action.payload) {\r\n          case 'weight':  return { ...state, warning: [warnings.weight, action.payload] }\r\n          case 'reps':  return { ...state, warning: [warnings.reps, action.payload] }\r\n        };\r\n      }\r\n\r\n      case ACTIONS.CLEAR_WARNING: {\r\n        return { ...state, warning: ['', action.payload]};\r\n      }\r\n\r\n      case ACTIONS.ADD_SERIE_TO_SERIESLIST: {\r\n        return {...state, seriesList: [...state.seriesList, action.payload]};\r\n      }\r\n\r\n      case ACTIONS.SORT_SERIESLIST: {\r\n        let serieCount = 1;\r\n        const updatedSeriesList = [];\r\n\r\n        while (updatedSeriesList.length !== state.seriesList.length) {\r\n\r\n          state.seriesList.forEach(serie => {\r\n            if (serie.serieCount === serieCount)\r\n              updatedSeriesList.push(serie);\r\n          });\r\n\r\n          serieCount++;\r\n        }\r\n   \r\n        return {...state, seriesList: updatedSeriesList };\r\n      }\r\n\r\n      case ACTIONS.CLEAR_SERIESLIST_BEFORE_DAY_CHANGING: {\r\n        return {...state, seriesList: []};\r\n      }\r\n\r\n      case ACTIONS.UPDATE_LASTTIME_DATA: {\r\n        let currentlyAddingSerieNumber = 0;\r\n        let indexOfLastSerie = 0;\r\n        let updatedLastSerieData = { weight: \"First serie\", reps: \"First serie\" };\r\n        let updatedLastTrainingData = { weight: \"First training\", reps: \"First training\" };\r\n\r\n        // LAST SERIE DATA\r\n\r\n        // SEARCHING FOR LAST SERIE NUMBER\r\n        if (state.seriesList.length !== 0) {\r\n          state.seriesList.forEach((serie, index) => {\r\n            if (serie.serieCount > currentlyAddingSerieNumber) {\r\n              currentlyAddingSerieNumber = serie.serieCount;\r\n              indexOfLastSerie = index;\r\n            }\r\n          });\r\n  \r\n          updatedLastSerieData = { \r\n            weight: state.seriesList[indexOfLastSerie].weight,\r\n            reps: state.seriesList[indexOfLastSerie].reps \r\n          };\r\n        }\r\n        \r\n        // LAST TRAINING DATA\r\n\r\n        const potentialSeries = [];\r\n        const seriesBackup = JSON.parse(localStorage.getItem(\"seriesBackup\"));\r\n        let previousTrainingSerie = {};\r\n        let previousDateIds = props.dateIds;\r\n      \r\n        // SELECTING POTENTIAL SERIES WITH CORRECT ID AND SERIE NUMBER\r\n        if (seriesBackup) {\r\n          seriesBackup.forEach(serie => {\r\n            if (serie.exerciseId === props.exerciseId) {\r\n              if (serie.serieCount === currentlyAddingSerieNumber + 1) {\r\n                if (\r\n                  (serie.dateIds.dayId < props.dateIds.dayId) && (serie.dateIds.monthId < props.dateIds.monthId) && (serie.dateIds.yearId === props.dateIds.yearId) ||\r\n                  (serie.dateIds.dayId < props.dateIds.dayId) && (serie.dateIds.monthId === props.dateIds.monthId) && (serie.dateIds.yearId === props.dateIds.yearId) ||\r\n                  (serie.dateIds.dayId >= props.dateIds.dayId) && (serie.dateIds.monthId < props.dateIds.monthId) && (serie.dateIds.yearId === props.dateIds.yearId) ||\r\n                  (serie.dateIds.dayId >= props.dateIds.dayId) && (serie.dateIds.monthId >= props.dateIds.monthId) && (serie.dateIds.yearId < props.dateIds.yearId)\r\n                )\r\n                  potentialSeries.push(serie);\r\n              }\r\n            }\r\n          });\r\n\r\n          if (potentialSeries.length !== 0) {\r\n            while (true) {\r\n              previousDateIds = getPreviousTrainingDate(previousDateIds);\r\n              potentialSeries.forEach(serie => {\r\n                if ((previousDateIds.dayId === serie.dateIds.dayId) &&\r\n                    (previousDateIds.monthId === serie.dateIds.monthId) &&\r\n                    (previousDateIds.yearId === serie.dateIds.yearId)) {\r\n                      previousTrainingSerie = serie;\r\n                }\r\n              });\r\n\r\n              if (previousTrainingSerie.weight !== undefined) {\r\n                updatedLastTrainingData = { \r\n                  weight: previousTrainingSerie.weight,\r\n                  reps: previousTrainingSerie.reps \r\n                };\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        return {...state, \r\n          lastTimeData: {\r\n            training: updatedLastTrainingData,\r\n            serie: updatedLastSerieData\r\n          }\r\n        }\r\n      }\r\n      \r\n      default: return console.error(`Unknown action type: ${action.type}`);\r\n    }\r\n  }\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  \r\n  const clearSeriesList = () => {\r\n    dispatch({ type: ACTIONS.CLEAR_SERIESLIST_BEFORE_DAY_CHANGING });\r\n  }\r\n\r\n  const sortSeriesList = () => {\r\n    dispatch({ type: ACTIONS.SORT_SERIESLIST });\r\n  }\r\n\r\n  const updateLastTimeData = () => {\r\n    dispatch({ type: ACTIONS.UPDATE_LASTTIME_DATA });\r\n  }\r\n\r\n  const loadSeriesListFromDatabase = async () => {\r\n    clearSeriesList();\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.id === props.userId) {\r\n          if (user.data().seriesList) {\r\n            user.data().seriesList.forEach(serie => {\r\n              if (serie.exerciseId === props.exerciseId && ((serie.dateIds.dayId === props.dateIds.dayId) &&\r\n                                            (serie.dateIds.monthId === props.dateIds.monthId) &&\r\n                                            (serie.dateIds.yearId === props.dateIds.yearId))) {\r\n                  dispatch({ type: ACTIONS.ADD_SERIE_TO_SERIESLIST, payload: serie });\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n\r\n  // EFFECTS\r\n\r\n  // LOADS SERIES FROM DATABASE\r\n  useEffect(() => {\r\n    clearSeriesList();\r\n    loadSeriesListFromDatabase();\r\n    sortSeriesList();\r\n\r\n  }, [ props.userId, props.dateIds ]);\r\n\r\n  // CLOSES WINDOWS AFTER DATE CHANGE\r\n  useEffect(() => {\r\n    const disableVisibilityIfEnabled = (state, action) => {\r\n      if (state)\r\n        dispatch({type: action});\r\n    }\r\n    \r\n    disableVisibilityIfEnabled(state.isExerciseOpened, ACTIONS.NEGATE_EXERCISE_OPENED);\r\n    disableVisibilityIfEnabled(state.isAddWindowOpened, ACTIONS.NEGATE_ADD_WINDOW_STATE);\r\n    disableVisibilityIfEnabled(state.isRemoveWindowOpened, ACTIONS.NEGATE_REMOVE_WINDOW_STATE);\r\n    disableVisibilityIfEnabled(state.isMoreWindowOpened, ACTIONS.NEGATE_MORE_WINDOW_STATE);\r\n\r\n  }, [ props.userId, props.dateIds ]);\r\n\r\n  useEffect(async () => {\r\n    const getPotentialSeries = async () => {\r\n      let seriesList = [];\r\n      try {\r\n        const querySnapshot = await getDocs(collection(db, \"users\"));\r\n        querySnapshot.forEach(user => {\r\n          if (user.id === props.userId) {\r\n            if (user.data().seriesList) {\r\n              seriesList = user.data().seriesList;\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n      catch (e) {\r\n        console.error(e);\r\n      }\r\n      return seriesList;\r\n    }\r\n    localStorage.setItem(\"seriesBackup\", JSON.stringify(await getPotentialSeries()));\r\n  \r\n  }, [ props.dateIds ])\r\n\r\n  // DISABLES POINTER EVENTS WHEN ONE OF FORM WINDOWS IS OPENED \r\n  useEffect(() => {\r\n    const changePointerEvents = (value) => {\r\n      const meals = document.querySelectorAll(\".meal\");\r\n      const wrapper = document.querySelector(\".wrapper\");\r\n      const center = document.querySelector(\".center-section\");\r\n\r\n      meals.forEach(meal => {\r\n        let buttons = meal.querySelector(\".meal__buttons-section\");\r\n        buttons.style.pointerEvents = value;\r\n        wrapper.style.pointerEvents = value;\r\n\r\n        // DISABLING SCROLL AT CENTER SECTION \r\n        value === \"none\" ? center.style.overflowY = \"hidden\" : center.style.overflowY = \"auto\";\r\n      });\r\n    }\r\n\r\n    state.isAddWindowOpened || state.isRemoveWindowOpened || state.isMoreWindowOpened\r\n    ? changePointerEvents(\"none\")\r\n    : changePointerEvents(\"auto\");\r\n    \r\n  }, [ state.isAddWindowOpened, state.isRemoveWindowOpened, state.isMoreWindowOpened ]);\r\n\r\n  // UPDATES LAST TIME DATA AFTER OPENING CHANGING WINDOWS\r\n\r\n  useEffect(() => {\r\n    if (state.isAddWindowOpened)\r\n      updateLastTimeData();\r\n    countProgress();\r\n\r\n  }, [ state.isAddWindowOpened ])\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n\r\n  const handleExerciseOpening = () => {\r\n    dispatch({ type: ACTIONS.NEGATE_EXERCISE_OPENED });\r\n  }\r\n\r\n  const handleAddWindow = () => {\r\n    dispatch({ type: ACTIONS.NEGATE_ADD_WINDOW_STATE });\r\n  }\r\n\r\n  const handleRemoveWindow = () => {\r\n    dispatch({ type: ACTIONS.NEGATE_REMOVE_WINDOW_STATE });\r\n  }\r\n\r\n  const handleMoreWindow = () => {\r\n    dispatch({ type: ACTIONS.NEGATE_MORE_WINDOW_STATE });\r\n  }\r\n\r\n  const countProgress = () => {\r\n    const potentialTrainings = [];\r\n    const seriesBackup = JSON.parse(localStorage.getItem(\"seriesBackup\"));\r\n    const lastTrainingData = [];\r\n    let message = {};\r\n    let percentValue = 0;\r\n    let progressValue = 0;\r\n    let previousDateIds = props.dateIds;\r\n    \r\n    // SELECTING POTENTIAL SERIES WITH CORRECT ID AND SERIE NUMBER\r\n    if (seriesBackup) {\r\n      seriesBackup.forEach(serie => {\r\n        if (serie.exerciseId === props.exerciseId) {\r\n            if (\r\n              (serie.dateIds.dayId < props.dateIds.dayId) && (serie.dateIds.monthId < props.dateIds.monthId) && (serie.dateIds.yearId === props.dateIds.yearId) ||\r\n              (serie.dateIds.dayId < props.dateIds.dayId) && (serie.dateIds.monthId === props.dateIds.monthId) && (serie.dateIds.yearId === props.dateIds.yearId) ||\r\n              (serie.dateIds.dayId >= props.dateIds.dayId) && (serie.dateIds.monthId < props.dateIds.monthId) && (serie.dateIds.yearId === props.dateIds.yearId) ||\r\n              (serie.dateIds.dayId >= props.dateIds.dayId) && (serie.dateIds.monthId >= props.dateIds.monthId) && (serie.dateIds.yearId < props.dateIds.yearId)\r\n            )\r\n              potentialTrainings.push(serie);\r\n        }\r\n      });\r\n\r\n      if (potentialTrainings.length !== 0) {\r\n        while (true) {\r\n          previousDateIds = getPreviousTrainingDate(previousDateIds);\r\n          potentialTrainings.forEach(training => {\r\n            if ((previousDateIds.dayId === training.dateIds.dayId) &&\r\n                (previousDateIds.monthId === training.dateIds.monthId) &&\r\n                (previousDateIds.yearId === training.dateIds.yearId)) {\r\n                  lastTrainingData.push(training);\r\n            }\r\n          });\r\n\r\n          if (lastTrainingData.length !== 0) {\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    const lastTrainingTotal = countTotalWeight(lastTrainingData);\r\n    const currentTrainingTotal = countTotalWeight(state.seriesList);\r\n  \r\n    progressValue = currentTrainingTotal - lastTrainingTotal;\r\n\r\n    if (lastTrainingTotal)\r\n      percentValue = ((progressValue / lastTrainingTotal) * 100).toFixed(2);\r\n    else \r\n      percentValue = '';\r\n      \r\n    if (lastTrainingTotal > 0) {\r\n\r\n      if (progressValue > 0) {\r\n        message.top = `${progressValue.toFixed(2)} kg more`;\r\n        message.bottom = `${percentValue}% more than last time`;\r\n      }\r\n      else if (progressValue === 0) {\r\n        message.top = \"The same result as last time\";\r\n        message.bottom = \"\";\r\n      }\r\n\r\n      else {\r\n        progressValue *= -1;\r\n        percentValue  *= -1;\r\n        message.top = `${progressValue.toFixed(2)} kg less`;\r\n        message.bottom = `${percentValue}% less than last time`;\r\n      }\r\n    }\r\n\r\n    else {\r\n      message.top = \"First training, don't give up!\";\r\n      message.bottom = \"\";\r\n    }\r\n  \r\n    return message;\r\n  }\r\n\r\n  const handleFormClearing = () => {\r\n    dispatch({ type: ACTIONS.CHANGE_NEW_SERIE_DATA, payload: { key: 'weight', value: '' }});\r\n    dispatch({ type: ACTIONS.CHANGE_NEW_SERIE_DATA, payload: { key: 'reps', value: '' }});\r\n  }\r\n\r\n  const handleOnChange = (e) => {\r\n    // const newReg = /^[1-9]{1,}[.]{1}[0-9]{1,3}/\r\n    const isNumber = /[0-9]/;\r\n    const isZero = /^[0]{1}/;\r\n\r\n    const setValueAsNull = () => {\r\n      dispatch({ type: ACTIONS.CHANGE_NEW_SERIE_DATA, payload: { key: e.target.id, value: \"\" } });\r\n      dispatch({ type: ACTIONS.SET_WARNING, payload: e.target.id });\r\n    }\r\n\r\n    const setValueAsCorrect = () => {\r\n      dispatch({ type: ACTIONS.CHANGE_NEW_SERIE_DATA, payload: { key: e.target.id, value: e.target.value }});\r\n      dispatch({ type: ACTIONS.CLEAR_WARNING, payload: e.target.id });\r\n    }\r\n    \r\n    if (isNumber.test(e.target.value[e.target.value.length - 1])) {\r\n\r\n      if (isZero.test(e.target.value))\r\n        setValueAsNull();\r\n\r\n      else\r\n        setValueAsCorrect();\r\n    }\r\n\r\n    else {\r\n      setValueAsNull();\r\n    }\r\n  }\r\n\r\n  const countTotalWeight = (seriesList) => {\r\n    let totalWeight = 0;\r\n\r\n    seriesList.forEach(serie => {\r\n      totalWeight += Number(serie.weight) * Number(serie.reps);\r\n    });\r\n\r\n    return totalWeight;\r\n  }\r\n\r\n  const countTotalReps = (seriesList) => {\r\n    let totalReps = 0;\r\n\r\n    seriesList.forEach(serie => {\r\n      totalReps += Number(serie.reps);\r\n    });\r\n    \r\n    return totalReps;\r\n  }\r\n\r\n  const countWeightPerRepsRatio = (seriesList) => {\r\n    return (countTotalWeight(seriesList) / countTotalReps(seriesList)).toFixed(2);\r\n  }\r\n\r\n  const handleSerieAdding = (e) => {\r\n    e.preventDefault();\r\n    setTimeout(() => { dispatch({ type: ACTIONS.ADD_SERIE }) }, 10);\r\n    dispatch({ type: ACTIONS.NEGATE_ADD_WINDOW_STATE });\r\n  }\r\n\r\n  const handleSerieRemoving = (checkedIdsList) => {\r\n    dispatch({ type: ACTIONS.REMOVE_SERIE, payload: checkedIdsList });\r\n    dispatch({ type: ACTIONS.NEGATE_REMOVE_WINDOW_STATE });\r\n  }\r\n\r\n\r\n  // RETURN\r\n  \r\n  return (\r\n    <div className=\"meal exercise\" style={ (state.isExerciseOpened && window.innerWidth > 768) ? {left: '-10px'} : {left: '0px'} }>\r\n      \r\n      <section className=\"meal__top-section exercise__top-section\" onClick={ props.userStatus === \"Log in\" ? props.loginShortcut : handleExerciseOpening }>\r\n\r\n        <h2 className=\"meal__top-section__meal-title\">{ props.name }</h2>\r\n\r\n        <div className=\"exercise__top-section__grade-container\" title=\"Exercise difficulty\">\r\n          <span className=\"exercise__top-section__grade-container__point exercise__top-section__grade-container__point--filled\"></span>\r\n          <span className={ props.difficulty >= 2 ? \"exercise__top-section__grade-container__point exercise__top-section__grade-container__point--filled\" : \"exercise__top-section__grade-container__point\" }></span>\r\n          <span className={ props.difficulty === 3 ? \"exercise__top-section__grade-container__point exercise__top-section__grade-container__point--filled\" : \"exercise__top-section__grade-container__point\" }></span>\r\n        </div>\r\n\r\n      </section>\r\n\r\n      { state.seriesList.length !== 0 ? (\r\n        <section className=\"meal__products-section exercise__series-section\" style={ state.isExerciseOpened ? {display: \"flex\"} : {display: \"none\"} }>\r\n\r\n          <ul className=\"exercise__series-section__list\">\r\n            { state.seriesList.map(serie => {\r\n              return (\r\n              <li key={ serie.id } className=\"exercise__series-section__list__item\">\r\n                  <p className=\"exercise__series-section__list__item__count\">Serie { serie.serieCount }</p>\r\n                  <p className=\"exercise__series-section__list__item__weight\">{ serie.weight } kg</p>\r\n                  <p className=\"exercise__series-section__list__item__reps\">{ serie.reps } reps</p>\r\n                </li> \r\n              )\r\n              })\r\n            }\r\n          </ul>\r\n\r\n          <ul className=\"exercise__series-section__summary\">\r\n\r\n            <li className=\"exercise__series-section__summary__item\">\r\n              <p className=\"exercise__series-section__summary__item__count\">Total</p>\r\n              <p className=\"exercise__series-section__summary__item__weight\">{ countTotalWeight(state.seriesList) } kg</p>\r\n              <p className=\"exercise__series-section__summary__item__reps\">{ countTotalReps(state.seriesList) } reps</p>\r\n            </li>\r\n\r\n            <li className=\"exercise__series-section__summary__item\">\r\n              <p className=\"exercise__series-section__list__item__count\">\r\n                <span>{ countProgress().top }</span>\r\n                <span>{ countProgress().bottom }</span>\r\n              </p>\r\n              <p className=\"exercise__series-section__list__item__reps exercise__series-section__list__item__reps--stats\">{ countWeightPerRepsRatio(state.seriesList) } kg per rep</p>\r\n            </li>\r\n\r\n          </ul>\r\n          \r\n        </section>\r\n      ) : null }\r\n      \r\n      \r\n      <section className=\"meal__buttons-section exercise__buttons-section\" style={ state.isExerciseOpened ? {display: \"flex\"} : {display: \"none\"} }>\r\n\r\n        <button \r\n          className=\"meal__buttons-section__tertiary\" \r\n          onClick={ handleMoreWindow }>\r\n          More\r\n        </button>\r\n        \r\n        <div>\r\n          <button \r\n            className={ state.seriesList.length ? \"meal__buttons-section__remove-button\" : \"meal__buttons-section__remove-button--disabled\" }\r\n            onClick={ state.seriesList.length ? handleRemoveWindow : null } \r\n            disabled={ state.isAddWindowOpened || state.isRemoveWindowOpened ? true : false }>\r\n            Remove\r\n          </button>\r\n\r\n          <button \r\n            className=\"meal__buttons-section__add-button\" \r\n            onClick={ handleAddWindow }\r\n            disabled={ state.isAddWindowOpened || state.isRemoveWindowOpened ? true : false }>\r\n            Add\r\n          </button>\r\n        </div>\r\n\r\n      </section>\r\n        \r\n      { state.isAddWindowOpened \r\n        ? <AddWindow \r\n            type=\"exercises\"\r\n            handleAddWindow={ handleAddWindow }\r\n            data={{\r\n              weight: state.newSerie.weight,\r\n              reps: state.newSerie.reps\r\n            }}\r\n            warning={ state.warning }\r\n            handleOnChange={ handleOnChange }\r\n            handleFormClearing={ handleFormClearing }\r\n            handleSerieAdding={ handleSerieAdding }\r\n            lastTimeData={ state.lastTimeData }\r\n          />\r\n        : null }\r\n\r\n      { state.isRemoveWindowOpened \r\n        ? <RemoveWindow \r\n            type=\"exercises\"\r\n            list={ state.seriesList }\r\n            handleRemoving={ handleSerieRemoving }\r\n            handleRemoveWindow={ handleRemoveWindow }\r\n          />\r\n        : null }\r\n\r\n      { state.isMoreWindowOpened \r\n        ? <MoreWindow\r\n            type=\"exercises\"\r\n            title={ props.name }\r\n            description={ props.description }\r\n            difficulty={ props.difficulty }\r\n            typeOfExercise= { props.typeOfExercise}\r\n            muscles={ props.muscles }\r\n            properFormLink={ props.properFormLink }\r\n            handleMoreWindow={ handleMoreWindow }\r\n          />\r\n        : null }\r\n\r\n    </div>\r\n  )\r\n}","export const exercises = [\r\n  { id: 0,\r\n    name: \"Bench Press\",\r\n    description: `The bench press is an upper-body weight training exercise in which the trainee\r\n                  presses a weight upwards while lying on a weight training bench. \r\n                  The exercise uses the pectoralis major, the anterior deltoids, and the triceps,\r\n                  among other stabilizing muscles. A barbell is generally used to hold the weight, \r\n                  but a pair of dumbbells can also be used.`,\r\n    difficulty: 2, \r\n    typeOfExercise: \"Compound exercise\",\r\n    muscles: [\"Chest\", \"Shoulders\", \"Arms\"],\r\n    properFormLink: \"https://www.youtube.com/embed/XSza8hVTlmM\" \r\n  },\r\n\r\n  { id: 1,\r\n    name: \"Deadlift\",\r\n    description: `Deadlift refers to the lifting of dead weight (weight without momentum),\r\n                  such as weights lying on the ground. It is one of the few standard weight training exercises\r\n                  in which all repetitions begin with dead weight. In most other lifts, there is an eccentric \r\n                  (lowering of the weight) phase followed by the concentric (lifting of the weight) phase. \r\n                  During these exercises, a small amount of energy is stored in the stretched muscles and \r\n                  tendons in the eccentric phase if the lifter is not flexible beyond the range of motion.\r\n                  Although this exercise uses the legs and hips as the primary movers, it can also be considered a back exercise.`,\r\n    difficulty: 3, \r\n    typeOfExercise: \"Compound exercise\",\r\n    muscles: [\"Legs\", \"Back\", \"Core\"],\r\n    properFormLink: \"https://www.youtube.com/embed/op9kVnSso6Q\" \r\n  },\r\n\r\n  { id: 2,\r\n    name: \"Squat\",\r\n    description: `A squat is a strength exercise in which the trainee lowers their hips from a standing position\r\n                  and then stands back up. During the descent of a squat, the hip and knee joints flex while\r\n                  the ankle joint dorsiflexes; conversely the hip and knee joints extend and the ankle joint\r\n                  plantarflexes when standing up. Squats are considered a vital exercise for increasing the strength and size of the lower body\r\n                  muscles as well as developing core strength. The primary agonist muscles used during the squat are\r\n                  the quadriceps femoris, the adductor magnus, and the gluteus maximus.`,\r\n    difficulty: 3, \r\n    typeOfExercise: \"Compound exercise\",\r\n    muscles: [\"Legs\", \"Core\"],\r\n    properFormLink: \"https://www.youtube.com/embed/ultWZbUMPL8\"\r\n  },\r\n\r\n  { id: 3,\r\n    name: \"Pull-up\",\r\n    description: `A pull-up is an upper-body strength exercise. The pull-up is a closed-chain movement where \r\n                  the body is suspended by the hands and pulls up. As this happens, the elbows \r\n                  flex and the shoulders adduct and extend to bring the elbows to the torso.`,\r\n    difficulty: 2, \r\n    typeOfExercise: \"Compound exercise\",\r\n    muscles: [\"Upper back\", \"Arms\"],\r\n    properFormLink: \"https://www.youtube.com/embed/HRV5YKKaeVw\"\r\n  },\r\n\r\n  { id: 4,\r\n    name: \"Push-up\",\r\n    description: `A push-up is a common calisthenics exercise beginning from the prone position. \r\n                  By raising and lowering the body using the arms, push-ups exercise the pectoral muscles, \r\n                  triceps, and anterior deltoids, with ancillary benefits to the rest of the deltoids, \r\n                  serratus anterior, coracobrachialis and the midsection as a whole. Push-ups are a basic \r\n                  exercise used in civilian athletic training or physical education and commonly in military \r\n                  physical training.`,\r\n    difficulty: 1, \r\n    typeOfExercise: \"Compound exercise\",\r\n    muscles: [\"Chest\", \"Shoulders\", \"Arms\", \"Core\"],\r\n    properFormLink: \"https://www.youtube.com/embed/0pkjOk0EiAk\"\r\n  },\r\n\r\n  { id: 5,\r\n    name: \"Overhead Press\",\r\n    description: `The overhead press (abbreviated OHP), also referred to as a shoulder press, military press,\r\n                  or simply the press, is a weight training exercise with many variations. It is typically performed\r\n                  while either standing or sitting sometimes also when squatting, in which a weight is pressed straight\r\n                  upwards from racking position until the arms are locked out overhead, while the legs, lower back and\r\n                  abs maintain balance. The exercise helps build muscular shoulders with bigger arms, and is one\r\n                  of the most difficult compound upper-body exercises.`,\r\n    difficulty: 2, \r\n    typeOfExercise: \"Compound exercise\",\r\n    muscles: [\"Shoulders\", \"Arms\", \"Core\"],\r\n    properFormLink: \"https://www.youtube.com/embed/2yjwXTZQDDI\"\r\n  },\r\n\r\n  { id: 6,\r\n    name: \"Bent-over Row\",\r\n    description: `A bent-over row (or barbell row) is a weight training exercise \r\n                  that targets a variety of back muscles. Which ones are targeted varies on form. \r\n                  The bent over row is often used for both bodybuilding and powerlifting. \r\n                  It is a good exercise for increasing strength and size`,\r\n    difficulty: 2, \r\n    typeOfExercise: \"Compound exercise\",\r\n    muscles: [\"Back\", \"Arms\", \"Core\"],\r\n    properFormLink: \"https://www.youtube.com/embed/kBWAon7ItDw\"\r\n  },\r\n\r\n  { id: 7,\r\n    name: \"Biceps Curl\",\r\n    description: `Biceps curl is a general term for a series of strength exercises \r\n                  that involve brachioradialis, front deltoid and the main target on biceps brachii.\r\n                  Includes variations using barbell, dumbbell and resistance band, etc. The common point\r\n                  amongst them is the trainee lifting a certain amount of weight to contracting the biceps\r\n                  brachii, and tuck in their arms to the torso during the concentric phase. Once the biceps brachii\r\n                  is fully contracted, then return the weight to starting position during the eccentric phase.`,\r\n    difficulty: 1, \r\n    typeOfExercise: \"Isolated exercise\",\r\n    muscles: [\"Biceps\", \"Arms\"],\r\n    properFormLink: \"https://www.youtube.com/embed/ykJmrZ5v0Oo\"\r\n  },\r\n\r\n  { id: 8,\r\n    name: \"French Press\",\r\n    description: `Lying triceps extensions, also known as skull crushers and French extensions\r\n                  or French presses, are a strength exercise used in many different forms of strength training.\r\n                  Lying triceps extensions are one of the most stimulating exercises to the entire triceps muscle\r\n                  group in the upper arm. It works the triceps from the elbow all the way to the latissimus dorsi.\r\n                  Due to its full use of the Triceps muscle group, the lying triceps extensions are used by many\r\n                  as part of their training regimen.`,\r\n    difficulty: 1, \r\n    typeOfExercise: \"Isolated exercise\",\r\n    muscles: [\"Triceps\", \"Arms\"],\r\n    properFormLink: \"https://www.youtube.com/embed/JImgCWzCHwI\"\r\n  },\r\n\r\n  { id: 9,\r\n    name: \"Running\",\r\n    description: `Running is a method of terrestrial locomotion allowing humans and other animals\r\n                  to move rapidly on foot. Running is a type of gait characterized by an aerial phase in which\r\n                  all feet are above the ground (though there are exceptions). A feature of a running\r\n                  body from the viewpoint of spring-mass mechanics is that changes in kinetic and potential energy\r\n                  within a stride occur simultaneously, with energy storage accomplished by springy tendons and\r\n                  passive muscle elasticity. The term running can refer to any of a variety of speeds ranging from jogging to sprinting. `,\r\n    difficulty: 1, \r\n    typeOfExercise: \"Aerobic exercise\",\r\n    muscles: [\"Legs\", \"Core\"],\r\n    properFormLink: \"https://www.youtube.com/embed/brFHyOtTwH4\"\r\n  }\r\n]","// IMPORTS\r\n\r\nimport { React, useReducer, useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { FaChevronCircleLeft, FaSave } from 'react-icons/fa';\r\nimport { exercises } from '../../exercisesList';\r\n\r\nimport { db } from '../../index'; \r\nimport { collection, getDocs, setDoc, doc } from \"firebase/firestore\";\r\n\r\n\r\n// VARIABLES\r\n\r\nconst initialState = {\r\n  isCategoryOpened: false,\r\n  isAccountCategory: false,\r\n  isNutritionCategory: true,\r\n  isTrainingCategory: false,\r\n  warning: ['', ''],\r\n  settingsData: {\r\n    account: {\r\n\r\n    },\r\n\r\n    nutrition: {\r\n      dailyDemand: { kcal: 2000, proteins: 120, fats: 55, carbs: 240 },\r\n      namesOfMeals: { 0: \"Breakfast\", 1: \"II Breakfast\", 2: \"Lunch\", 3: \"Snack\", 4: \"Dinner\", 5: \"\", 6: \"\", 7: \"\", 8: \"\", 9: \"\" },\r\n      numberOfMeals: 5\r\n    },\r\n\r\n    training: {\r\n      selectedExercises: [0, 1, 2, 3, 4]\r\n    }\r\n  },\r\n  clearAllProducts: false,\r\n  clearAllSeries: false,\r\n  isSettingsChanged: false\r\n}\r\n\r\nconst initialOptionsStates = {\r\n  'clear-all-products': false,\r\n  'reset-nutrition-to-initial': false,\r\n  'clear-all-series': false,\r\n  'reset-training-to-initial': false\r\n}\r\n\r\nconst ACTIONS = {\r\n  NEGATE_CATEGORY_OPENED: 'negate-category-opened',\r\n  CHANGE_SETTINGS_DATA: 'change-settings-data',\r\n  LOAD_SETTINGS: 'load-settings',\r\n  SET_WARNING: 'set-warning',\r\n  CLEAR_WARNING: 'clear-warning',\r\n  SET_CLEAR_ALL_PRODUCTS: 'set-clear-all-products',\r\n  SET_CLEAR_ALL_SERIES: 'set-clear-all-series',\r\n  ADD_EXERCISE_TO_SELECTEDEXERCISES: 'add-exercise-to-selectedexercises',\r\n  REMOVE_EXERCISE_FROM_SELECTEDEXERCISES: 'remove-exercise-from-selectedexercises',\r\n  SET_SETTINGS_CHANGED_STATE: 'set-settings-changed-state',\r\n  RESET_NUTRITION_SETTINGS_TO_INITIAL: 'reset-nutrition-settings-to-initial',\r\n  RESET_TRAINING_SETTINGS_TO_INITIAL: 'reset-training-settings-to-initial',\r\n  SET_CATEGORY: 'set-category',\r\n  SET_NEW_SETTINGS: 'set-new-settings'\r\n}\r\n\r\nconst warnings = {\r\n  editMealName:   \"Meal name must be a string of letters only\",\r\n  setMealsNumber: \"Number of meals must be a positive number\",\r\n  macros: \"Macronutrient must be a positive number\"\r\n}\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function Settings(props) {\r\n\r\n  // HOOKS\r\n\r\n  const [optionsStates, setOptionsStates] = useState(initialOptionsStates);\r\n  const reducer = (state, action) => {\r\n    switch (action.type) {\r\n      case ACTIONS.NEGATE_CATEGORY_OPENED: {\r\n        return { ...state, isCategoryOpened: !state.isCategoryOpened }\r\n      }\r\n\r\n      case ACTIONS.CHANGE_SETTINGS_DATA: {\r\n        switch (action.payload.key) {\r\n\r\n          case 'editMealName': {\r\n            return {...state, \r\n              settingsData: { ...state.settingsData, \r\n              nutrition: {...state.settingsData.nutrition,\r\n              namesOfMeals: {...state.settingsData.nutrition.namesOfMeals, [action.payload.index]: action.payload.value }}}\r\n            };\r\n          };\r\n\r\n          case 'setMealsNumber': {\r\n            return {...state, \r\n              settingsData: { ...state.settingsData, \r\n              nutrition: {...state.settingsData.nutrition,\r\n              numberOfMeals: action.payload.value }}\r\n            };\r\n          };\r\n\r\n          default: return {...state, \r\n                           settingsData: { ...state.settingsData, \r\n                           nutrition: {...state.settingsData.nutrition, \r\n                           dailyDemand: {...state.settingsData.nutrition.dailyDemand, \r\n                           [action.payload.key]: action.payload.value }}}};\r\n        }\r\n      }\r\n\r\n      case ACTIONS.LOAD_SETTINGS: {\r\n        let newSettings = JSON.parse(localStorage.getItem(\"settings\"));\r\n        return {...state, settingsData: newSettings }\r\n      }\r\n\r\n      case ACTIONS.SET_NEW_SETTINGS: {\r\n        return { ...state, settingsData: action.payload }\r\n      }\r\n\r\n      case ACTIONS.SET_CLEAR_ALL_PRODUCTS: {\r\n        return { ...state, clearAllProducts: action.payload };\r\n      }\r\n\r\n      case ACTIONS.SET_CLEAR_ALL_SERIES: {\r\n        return { ...state, clearAllSeries: action.payload };\r\n      }\r\n\r\n      case ACTIONS.ADD_EXERCISE_TO_SELECTEDEXERCISES: {\r\n        const updatedSelectedExercises = state.settingsData.training.selectedExercises;\r\n        updatedSelectedExercises.push(action.payload);\r\n\r\n        return {...state, \r\n          settingsData: { ...state.settingsData, \r\n          training: {...state.settingsData.training,\r\n          selectedExercises: updatedSelectedExercises }}\r\n        };\r\n      }\r\n\r\n      case ACTIONS.REMOVE_EXERCISE_FROM_SELECTEDEXERCISES: {\r\n        const updatedSelectedExercises = state.settingsData.training.selectedExercises;\r\n        const indexOfExerciseToRemoving = updatedSelectedExercises.indexOf(action.payload);\r\n        updatedSelectedExercises.splice(indexOfExerciseToRemoving, 1);\r\n\r\n        return {...state, \r\n          settingsData: { ...state.settingsData, \r\n          training: {...state.settingsData.training,\r\n          selectedExercises: updatedSelectedExercises }}\r\n        }\r\n      }\r\n\r\n      case ACTIONS.SET_SETTINGS_CHANGED_STATE: {\r\n        return { ...state, isSettingsChanged: action.payload };\r\n      }\r\n\r\n      case ACTIONS.RESET_NUTRITION_SETTINGS_TO_INITIAL: {\r\n        return { ...state, settingsData: { ...state.settingsData, nutrition: initialState.settingsData.nutrition }};\r\n      }\r\n\r\n      case ACTIONS.RESET_TRAINING_SETTINGS_TO_INITIAL: {\r\n        return { ...state, settingsData: { ...state.settingsData, training: initialState.settingsData.training }};\r\n      }\r\n\r\n      case ACTIONS.SET_CATEGORY: {\r\n        let category = action.payload.category;\r\n        return { ...state, [category]: action.payload.value };\r\n      }\r\n\r\n      case ACTIONS.SET_WARNING: {\r\n        switch (action.payload) {\r\n          case 'editMealName':  return { ...state, warning: [warnings.editMealName, action.payload] }\r\n          case 'setMealsNumber':  return { ...state, warning: [warnings.setMealsNumber, action.payload] }\r\n          default:  return { ...state, warning: [warnings.macros, action.payload] }\r\n        };\r\n      }\r\n\r\n      case ACTIONS.CLEAR_WARNING: {\r\n        return { ...state, warning: ['', action.payload]};\r\n      }\r\n\r\n      default: return console.error(`Unknown action type: ${action.type}`);\r\n    }\r\n  }\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n\r\n  // EFFECTS\r\n\r\n  // SEARCH FOR SETTINGS IN LOCALSTORAGE\r\n  const saveSettingsToDatabase = async () => {\r\n    try {\r\n      await setDoc(doc(db, \"users\", String(props.userId)), {\r\n        settings: state.settingsData\r\n      }, \r\n      { merge: true });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const clearDatabase = async (data) => {\r\n    try {\r\n      await setDoc(doc(db, \"users\", String(props.userId)), {\r\n        [data]: []\r\n      }, \r\n      { merge: true });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const getSettingsFromDatabase = async () => {\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.id === props.userId) {\r\n          if (user.data().settings) {\r\n            dispatch({ type: ACTIONS.SET_NEW_SETTINGS, payload: user.data().settings });\r\n            localStorage.setItem(\"settingsBackup\", JSON.stringify(user.data().settings));\r\n          }\r\n            \r\n          else\r\n            saveSettingsToDatabase();\r\n        }\r\n      });\r\n    }\r\n\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  // LOADS SETTINGS FROM DATABASE\r\n  useEffect(() => {\r\n    getSettingsFromDatabase();\r\n\r\n  }, []);\r\n  \r\n  // BLURING AND DISABLING POINTER EVENTS ON BACKGROUND AFTER MOUNTING\r\n  useEffect(() => {\r\n    const wrapper = document.querySelector(\".wrapper\");\r\n    const rootElement = document.querySelector(\"#root\");\r\n    const hamburger = document.querySelector(\".left-section__hamburger\");\r\n    wrapper.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n    wrapper.style.pointerEvents = \"none\";\r\n    rootElement.style.zIndex = 97;\r\n    hamburger.style.display = \"none\";\r\n    \r\n    return (() => {\r\n      wrapper.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      wrapper.style.pointerEvents = \"auto\";\r\n      rootElement.style.zIndex = 99;\r\n      if (window.innerWidth < 769)\r\n        hamburger.style.display = \"block\";\r\n    })\r\n\r\n  }, []);\r\n\r\n  // BLURING AND DISABLING POINTER EVENTS ON WINDOW AFTER CONFIRM WINDOW MOUNTING\r\n  useEffect(() => {\r\n    const settingsWindow = document.querySelector(\".window\");\r\n    if (state.clearAllProducts || state.clearAllSeries) {\r\n      settingsWindow.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n      settingsWindow.style.pointerEvents = \"none\";\r\n    }\r\n    else {\r\n      settingsWindow.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      settingsWindow.style.pointerEvents = \"auto\";\r\n    }\r\n\r\n  }, [ state.clearAllProducts, state.clearAllSeries ]);\r\n\r\n  // CHECKS IF SETTINGS WERE CHANGED\r\n  useEffect(() => {\r\n    const backupSettings = localStorage.getItem(\"settingsBackup\");\r\n    const currentSettings = JSON.stringify(state.settingsData);\r\n\r\n    if (backupSettings === currentSettings)\r\n      dispatch({ type: ACTIONS.SET_SETTINGS_CHANGED_STATE, payload: false });\r\n    else\r\n      dispatch({ type: ACTIONS.SET_SETTINGS_CHANGED_STATE, payload: true });\r\n\r\n    return () => dispatch({ type: ACTIONS.SET_SETTINGS_CHANGED_STATE, payload: false });\r\n\r\n  }, [ state.settingsData ]);\r\n\r\n  // CHECKS IF OPTIONS CHECKBOXES WERE CHANGED\r\n  useEffect(() => {\r\n    for (let i = 0; i < Object.keys(optionsStates).length; i++) {\r\n      if (Object.values(optionsStates)[i] === true) {\r\n        dispatch({ type: ACTIONS.SET_SETTINGS_CHANGED_STATE, payload: true });\r\n        break;\r\n      }\r\n      else {\r\n        dispatch({ type: ACTIONS.SET_SETTINGS_CHANGED_STATE, payload: false });\r\n      }\r\n    }\r\n\r\n  }, [ optionsStates ]);\r\n  \r\n\r\n  // FUNCTIONS\r\n\r\n  const resetOptionsStates = () => {\r\n    Object.keys(optionsStates).forEach(key => {\r\n      optionsStates[key] = false;\r\n    });\r\n  }\r\n\r\n  const confirmClearAllProducts = () => {\r\n    dispatch({ type: ACTIONS.SET_CLEAR_ALL_PRODUCTS, payload: false });\r\n    clearDatabase(\"productList\");\r\n  }\r\n\r\n  const cancelClearAllProducts = () => {\r\n    dispatch({ type: ACTIONS.SET_CLEAR_ALL_PRODUCTS, payload: false });\r\n  }\r\n\r\n  const confirmClearAllSeries = () => {\r\n    dispatch({ type: ACTIONS.SET_CLEAR_ALL_SERIES, payload: false });\r\n    clearDatabase(\"seriesList\");\r\n  }\r\n\r\n  const cancelClearAllSeries = () => {\r\n    dispatch({ type: ACTIONS.SET_CLEAR_ALL_SERIES, payload: false });\r\n  }\r\n\r\n  const handleSettingsSaved = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (optionsStates['clear-all-products'])\r\n      dispatch({ type: ACTIONS.SET_CLEAR_ALL_PRODUCTS, payload: true });\r\n    if (optionsStates['reset-nutrition-to-initial'])\r\n      dispatch({ type: ACTIONS.RESET_NUTRITION_SETTINGS_TO_INITIAL });\r\n    if (optionsStates['clear-all-series'])\r\n      dispatch({ type: ACTIONS.SET_CLEAR_ALL_SERIES, payload: true });\r\n    if (optionsStates['reset-training-to-initial'])\r\n      dispatch({ type: ACTIONS.RESET_TRAINING_SETTINGS_TO_INITIAL });\r\n\r\n    dispatch({ type: ACTIONS.SET_SETTINGS_CHANGED_STATE, payload: false });\r\n    saveSettingsToDatabase();\r\n    getSettingsFromDatabase();\r\n    resetOptionsStates();\r\n  }\r\n\r\n  const handleSettingsCanceled = (e) => {\r\n    e.preventDefault();\r\n    getSettingsFromDatabase();\r\n    resetOptionsStates();\r\n    props.closeWindow();\r\n  }\r\n\r\n  const handleSettingsReset = (e) => {\r\n    e.preventDefault();\r\n    getSettingsFromDatabase();\r\n    resetOptionsStates();\r\n  }\r\n\r\n  const handleExerciseChoosing = (e) => {\r\n    if (e.target.style.backgroundColor) {\r\n      if (e.target.style.backgroundColor === \"transparent\")\r\n        dispatch({ type: ACTIONS.ADD_EXERCISE_TO_SELECTEDEXERCISES, payload: Number(e.target.id[e.target.id.length - 1]) });\r\n      else\r\n        dispatch({ type: ACTIONS.REMOVE_EXERCISE_FROM_SELECTEDEXERCISES, payload: Number(e.target.id[e.target.id.length - 1]) });\r\n    }\r\n\r\n    else {\r\n      if (e.target.children[0].style.backgroundColor === \"transparent\")\r\n        dispatch({ type: ACTIONS.ADD_EXERCISE_TO_SELECTEDEXERCISES, payload: Number(e.target.id[e.target.id.length - 1]) });\r\n      else\r\n        dispatch({ type: ACTIONS.REMOVE_EXERCISE_FROM_SELECTEDEXERCISES, payload: Number(e.target.id[e.target.id.length - 1]) });\r\n    }\r\n  }\r\n\r\n  const handleSettingOnChange = (e) => {\r\n    const isNumber = /[0-9]/;\r\n    const isZero = /^[0]{1}/;\r\n    const isWord = /[a-z\\s]/i;\r\n\r\n    e.preventDefault();\r\n  \r\n    if (e.target.id === 'editMealName') {\r\n      if (isWord.test(e.target.value[e.target.value.length - 1])) {\r\n        dispatch({ type: ACTIONS.CHANGE_SETTINGS_DATA, payload: { key: e.target.id, index: Number(e.target.attributes[\"data-key\"].value), value: e.target.value }})\r\n        dispatch({ type: ACTIONS.CLEAR_WARNING, payload: e.target.id });\r\n      }\r\n      else {\r\n        dispatch({ type: ACTIONS.CHANGE_SETTINGS_DATA, payload: { key: e.target.id, index: Number(e.target.attributes[\"data-key\"].value), value: \"\"}})\r\n        dispatch({ type: ACTIONS.SET_WARNING, payload: e.target.id });\r\n      }\r\n    }\r\n    \r\n    if (isNumber.test(e.target.value[e.target.value.length - 1])) {\r\n      if (isZero.test(e.target.value)) {\r\n        dispatch({ type: ACTIONS.CHANGE_SETTINGS_DATA, payload: { key: e.target.id, value: 1 }});\r\n        dispatch({ type: ACTIONS.SET_WARNING, payload: e.target.id });\r\n      }\r\n      else\r\n        dispatch({ type: ACTIONS.CHANGE_SETTINGS_DATA, payload: { key: e.target.id, value: e.target.value }});\r\n        dispatch({ type: ACTIONS.CLEAR_WARNING, payload: e.target.id });\r\n    }\r\n\r\n    else {\r\n      dispatch({ type: ACTIONS.CHANGE_SETTINGS_DATA, payload: { key: e.target.id, value: \"\" }});\r\n      dispatch({ type: ACTIONS.SET_WARNING, payload: e.target.id });\r\n    }\r\n  }\r\n\r\n  const handleCheckboxOnClick = (e) => {\r\n    setOptionsStates(prevOptions => { return {...prevOptions, [e.target.id]: !optionsStates[e.target.id]} });\r\n  }\r\n  \r\n  const handleCategorySwitch = (e) => {\r\n    e.preventDefault();\r\n    dispatch({type: ACTIONS.SET_CATEGORY, payload: { category: 'isAccountCategory', value: false }});\r\n    dispatch({type: ACTIONS.SET_CATEGORY, payload: { category: 'isNutritionCategory', value: false }});\r\n    dispatch({type: ACTIONS.SET_CATEGORY, payload: { category: 'isTrainingCategory', value: false }});\r\n    dispatch({type: ACTIONS.SET_CATEGORY, payload: { category: e.target.id, value: true }});\r\n    getSettingsFromDatabase();\r\n    resetOptionsStates();\r\n  }\r\n\r\n\r\n  // RETURN\r\n\r\n  return ReactDOM.createPortal (\r\n    <>\r\n    <div className=\"window\">\r\n      <header className=\"window__header\">\r\n          \r\n        <h2 className=\"window__header__heading\">Settings</h2>\r\n\r\n        <button className=\"window__header__back-button\" onClick={ handleSettingsCanceled }><FaChevronCircleLeft /></button>        \r\n        <button className=\"window__header__switch\">\r\n          <h3 \r\n            className={ state.isAccountCategory \r\n                        ? \"window__header__switch__left window__header__switch__left--selected\"\r\n                        : \"window__header__switch__left\" }\r\n            id=\"isAccountCategory\"\r\n            onClick={ handleCategorySwitch }>\r\n            Account\r\n          </h3>\r\n\r\n          <h3 \r\n            className={ state.isNutritionCategory\r\n                        ? \"window__header__switch__center window__header__switch__center--selected\"  \r\n                        : \"window__header__switch__center\" }\r\n            id=\"isNutritionCategory\"\r\n            onClick={ handleCategorySwitch }>\r\n            Nutrition        \r\n          </h3>\r\n          \r\n          <h3 \r\n            className={ state.isTrainingCategory  \r\n                        ? \"window__header__switch__right window__header__switch__right--selected\"  \r\n                        : \"window__header__switch__right\" }\r\n            id=\"isTrainingCategory\"\r\n            onClick={ handleCategorySwitch }>\r\n            Training\r\n          </h3>\r\n        </button>\r\n\r\n      </header>\r\n\r\n      <main className=\"window__form\">\r\n        { state.isAccountCategory &&\r\n          <form className=\"window__main window__main--add\" onSubmit={ handleSettingsSaved }>\r\n          \r\n            <button \r\n              className={ state.isSettingsChanged\r\n                          ? \"window__header__add-button\"\r\n                          : \"window__header__add-button window__header__add-button--disabled\" }\r\n              type=\"submit\"\r\n              style={{ zIndex: 11 }}\r\n              disabled={ state.isSettingsChanged ? false : true }><FaSave />\r\n            </button>\r\n            \r\n            <section className=\"window__main__section window__main__section--form\">\r\n              <h3 className=\"window__main__section__title\">Account</h3> \r\n            </section>\r\n\r\n            <section className=\"window__bottom\">\r\n\r\n              <button \r\n                  className={\r\n                    state.isSettingsChanged\r\n                    ? \"window__bottom__tertiary-button\"\r\n                    : \"window__bottom__tertiary-button window__bottom__tertiary-button--disabled\"\r\n                  } \r\n                  type=\"button\"\r\n                  onClick={ handleSettingsReset }\r\n                  disabled={ state.isSettingsChanged ? false : true }>\r\n                  Reset\r\n              </button>\r\n\r\n              <div>\r\n                <button \r\n                  className=\"window__bottom__secondary-button\"\r\n                  type=\"button\" \r\n                  onClick={ handleSettingsCanceled }>\r\n                  Cancel\r\n                </button>\r\n\r\n                <button \r\n                  className={\r\n                    state.isSettingsChanged\r\n                    ? \"window__bottom__primary-button\"\r\n                    : \"window__bottom__primary-button window__bottom__primary-button--disabled\" \r\n                  }\r\n                  type=\"submit\"\r\n                  id=\"saveSettings\"\r\n                  value=\"Save\"\r\n                  disabled={ state.isSettingsChanged ? false : true }>\r\n                  Save\r\n                </button>\r\n              </div>\r\n\r\n          </section>\r\n          </form>\r\n        }\r\n\r\n        { state.isNutritionCategory &&\r\n          <form className=\"window__main window__main--add\" onSubmit={ handleSettingsSaved }>\r\n            \r\n            <button \r\n              className={ state.isSettingsChanged\r\n                          ? \"window__header__add-button\"\r\n                          : \"window__header__add-button window__header__add-button--disabled\" }\r\n              type=\"submit\"\r\n              style={{ zIndex: 11 }}\r\n              disabled={ state.isSettingsChanged ? false : true }><FaSave />\r\n            </button>\r\n            \r\n            <section className=\"window__main__section window__main__section--form\">\r\n              <h3 className=\"window__main__section__title\">Daily demand</h3>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label\" htmlFor=\"proteins\">Proteins</label>\r\n                <input\r\n                  className=\"window__main__input-line__input\"  \r\n                  type=\"text\" \r\n                  id=\"proteins\"\r\n                  value={ state.settingsData.nutrition.dailyDemand.proteins } \r\n                  onChange={ handleSettingOnChange }\r\n                  placeholder={ state.warning[1] === 'proteins' ? state.warning[0] : null }\r\n                  maxLength=\"4\">\r\n                </input>\r\n                <span className=\"window__main__input-line__unit\">g</span>\r\n              </div>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label\" htmlFor=\"fats\">Fats</label>\r\n                <input\r\n                  className=\"window__main__input-line__input\"  \r\n                  type=\"text\" \r\n                  id=\"fats\"\r\n                  value={ state.settingsData.nutrition.dailyDemand.fats } \r\n                  onChange={ handleSettingOnChange }\r\n                  placeholder={ state.warning[1] === 'fats' ? state.warning[0] : null }\r\n                  maxLength=\"4\">\r\n                </input>\r\n                <span className=\"window__main__input-line__unit\">g</span>\r\n              </div>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label\" htmlFor=\"carbs\">Carbohydrates</label>\r\n                <input\r\n                  className=\"window__main__input-line__input\"  \r\n                  type=\"text\" \r\n                  id=\"carbs\"\r\n                  value={ state.settingsData.nutrition.dailyDemand.carbs } \r\n                  onChange={ handleSettingOnChange }\r\n                  placeholder={ state.warning[1] === 'carbs' ? state.warning[0] : null }\r\n                  maxLength=\"4\">\r\n                </input>\r\n                <span className=\"window__main__input-line__unit\">g</span>\r\n              </div>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label\" htmlFor=\"kcal\">Calories</label>\r\n                <input\r\n                  className=\"window__main__input-line__input\"  \r\n                  type=\"text\" \r\n                  id=\"kcal\"\r\n                  value={ state.settingsData.nutrition.dailyDemand.kcal } \r\n                  onChange={ handleSettingOnChange }\r\n                  placeholder={ state.warning[1] === 'kcal' ? state.warning[0] : null }\r\n                  maxLength=\"4\">\r\n                </input>\r\n                <span className=\"window__main__input-line__unit\">kcal</span>\r\n              </div>\r\n            </section>\r\n\r\n            <section className=\"window__main__section window__main__section--form\">\r\n              <h3 className=\"window__main__section__title\">Meals</h3>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label\" htmlFor=\"setMealsNumber\">Number of meals</label>\r\n                <input\r\n                  className=\"window__main__input-line__input\"  \r\n                  type=\"text\" \r\n                  id=\"setMealsNumber\"\r\n                  value={ state.settingsData.nutrition.numberOfMeals } \r\n                  onChange={ handleSettingOnChange }\r\n                  placeholder={ state.warning[1] === 'setMealsNumber' ? state.warning[0] : null }\r\n                  maxLength=\"1\">\r\n                </input>\r\n                <span className=\"window__main__input-line__unit\">meals</span>\r\n              </div>\r\n              \r\n              { Object.values(state.settingsData.nutrition.namesOfMeals).map((meal, index) => {\r\n                if (state.settingsData.nutrition.numberOfMeals > index) {\r\n                  return (\r\n                    <div key={ index } className=\"window__main__input-line\">\r\n                      <label className=\"window__main__input-line__label\" htmlFor=\"editMealName\">{`Set meal nr ${ index + 1 } name`}</label>\r\n                      <input \r\n                        className=\"window__main__input-line__input\"\r\n                        data-key={ index } \r\n                        type=\"text\" \r\n                        id=\"editMealName\"\r\n                        value={ state.settingsData.nutrition.namesOfMeals[index] } \r\n                        onChange={ handleSettingOnChange }\r\n                        placeholder={ state.warning[1] === 'editMealName' ? state.warning[0] : null }\r\n                        required>\r\n                      </input>\r\n                    </div>\r\n                  ) \r\n                }\r\n\r\n                else {\r\n                  return (\r\n                    null\r\n                  )\r\n                }\r\n              })}\r\n            </section>\r\n\r\n            <section className=\"window__main__section window__main__section--form\">\r\n              <h3 className=\"window__main__section__title\">Options</h3>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label window__main__input-line__label--checkbox\" htmlFor=\"clearAllProducts\">Clear all products</label>\r\n                <button \r\n                  className=\"window__main__input-line__checkbox\"\r\n                  id=\"clear-all-products\"\r\n                  type=\"button\"\r\n                  onClick={ handleCheckboxOnClick }>\r\n                  <div \r\n                    className=\"window__main__input-line__checkbox__background\" \r\n                    id=\"clear-all-products\"\r\n                    style={ optionsStates[\"clear-all-products\"] ? {backgroundColor: \"#7500AF\"} : {backgroundColor: \"transparent\"} }>\r\n                  </div>\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label window__main__input-line__label--checkbox\" htmlFor=\"resetNutritionSettingsToInitial\">Reset nutrition settings to initial</label>\r\n                <button \r\n                  className=\"window__main__input-line__checkbox\"\r\n                  id=\"reset-nutrition-to-initial\"\r\n                  type=\"button\"\r\n                  onClick={ handleCheckboxOnClick }>\r\n                  <div \r\n                    className=\"window__main__input-line__checkbox__background\" \r\n                    id=\"reset-nutrition-to-initial\"\r\n                    style={ optionsStates[\"reset-nutrition-to-initial\"] ? {backgroundColor: \"#7500AF\"} : {backgroundColor: \"transparent\"} }>\r\n                  </div>\r\n                </button>\r\n              </div>\r\n            \r\n            </section>\r\n\r\n            <section className=\"window__bottom\">\r\n\r\n              <button \r\n                  className={\r\n                    state.isSettingsChanged\r\n                    ? \"window__bottom__tertiary-button\"\r\n                    : \"window__bottom__tertiary-button window__bottom__tertiary-button--disabled\"\r\n                  } \r\n                  type=\"button\"\r\n                  onClick={ handleSettingsReset }\r\n                  disabled={ state.isSettingsChanged ? false : true }>\r\n                  Reset\r\n              </button>\r\n\r\n              <div>\r\n                <button \r\n                  className=\"window__bottom__secondary-button\"\r\n                  type=\"button\" \r\n                  onClick={ handleSettingsCanceled }>\r\n                  Cancel\r\n                </button>\r\n\r\n                <button \r\n                  className={\r\n                    state.isSettingsChanged\r\n                    ? \"window__bottom__primary-button\"\r\n                    : \"window__bottom__primary-button window__bottom__primary-button--disabled\" \r\n                  }\r\n                  type=\"submit\"\r\n                  id=\"saveSettings\"\r\n                  value=\"Save\"\r\n                  disabled={ state.isSettingsChanged ? false : true }>\r\n                  Save\r\n                </button>\r\n              </div>\r\n\r\n          </section>\r\n          </form>\r\n        }\r\n\r\n        { state.isTrainingCategory &&\r\n          <form className=\"window__main window__main--add\" onSubmit={ handleSettingsSaved }>\r\n          \r\n            <button \r\n              className={ state.isSettingsChanged\r\n                          ? \"window__header__add-button\"\r\n                          : \"window__header__add-button window__header__add-button--disabled\" }\r\n              type=\"submit\"\r\n              style={{ zIndex: 11 }}\r\n              disabled={ state.isSettingsChanged ? false : true }><FaSave />\r\n            </button>\r\n            \r\n            <section className=\"window__main__section window__main__section--form\">\r\n              \r\n              <h3 className=\"window__main__section__title\">Exercises</h3>\r\n              \r\n              { exercises.map(exercise => {\r\n                  return (\r\n                    <div key={ exercise.id } className=\"window__main__input-line\">\r\n                      <label className=\"window__main__input-line__label window__main__input-line__label--checkbox\" htmlFor={\"exercise\"+ exercise.id }>{ exercise.name }</label>\r\n                      <button \r\n                        className=\"window__main__input-line__checkbox\"\r\n                        id={\"exercise\"+ exercise.id }\r\n                        type=\"button\"\r\n                        onClick={ handleExerciseChoosing }>\r\n                        <div \r\n                          className=\"window__main__input-line__checkbox__background\" \r\n                          id={\"exercise\"+ exercise.id }\r\n                          style={ state.settingsData.training.selectedExercises.includes(exercise.id) ? {backgroundColor: \"#7500AF\"} : {backgroundColor: \"transparent\"} }>\r\n                        </div>\r\n                      </button>\r\n                    </div>\r\n                  )}) \r\n                }\r\n\r\n            </section>\r\n\r\n            <section className=\"window__main__section window__main__section--form\">\r\n              <h3 className=\"window__main__section__title\">Options</h3>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label window__main__input-line__label--checkbox\" htmlFor=\"clear-all-series\">Clear all series</label>\r\n                <button \r\n                  className=\"window__main__input-line__checkbox\"\r\n                  id=\"clear-all-series\"\r\n                  type=\"button\"\r\n                  onClick={ handleCheckboxOnClick }>\r\n                  <div \r\n                    className=\"window__main__input-line__checkbox__background\" \r\n                    id=\"clear-all-series\"\r\n                    style={ optionsStates[\"clear-all-series\"] ? {backgroundColor: \"#7500AF\"} : {backgroundColor: \"transparent\"} }>\r\n                  </div>\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label window__main__input-line__label--checkbox\" htmlFor=\"reset-training-to-initial\">Reset training settings to initial</label>\r\n                <button \r\n                  className=\"window__main__input-line__checkbox\"\r\n                  id=\"reset-training-to-initial\"\r\n                  type=\"button\"\r\n                  onClick={ handleCheckboxOnClick }>\r\n                  <div \r\n                    className=\"window__main__input-line__checkbox__background\" \r\n                    id=\"reset-training-to-initial\"\r\n                    style={ optionsStates[\"reset-training-to-initial\"] ? {backgroundColor: \"#7500AF\"} : {backgroundColor: \"transparent\"} }>\r\n                  </div>\r\n                </button>\r\n              </div>\r\n            \r\n            </section>\r\n\r\n            <section className=\"window__bottom\">\r\n\r\n              <button \r\n                  className={\r\n                    state.isSettingsChanged\r\n                    ? \"window__bottom__tertiary-button\"\r\n                    : \"window__bottom__tertiary-button window__bottom__tertiary-button--disabled\"\r\n                  } \r\n                  type=\"button\"\r\n                  onClick={ handleSettingsReset }\r\n                  disabled={ state.isSettingsChanged ? false : true }>\r\n                  Reset\r\n              </button>\r\n\r\n              <div>\r\n                <button \r\n                  className=\"window__bottom__secondary-button\"\r\n                  type=\"button\" \r\n                  onClick={ handleSettingsCanceled }>\r\n                  Cancel\r\n                </button>\r\n\r\n                <button \r\n                  className={\r\n                    state.isSettingsChanged\r\n                    ? \"window__bottom__primary-button\"\r\n                    : \"window__bottom__primary-button window__bottom__primary-button--disabled\" \r\n                  }\r\n                  type=\"submit\"\r\n                  id=\"saveSettings\"\r\n                  value=\"Save\"\r\n                  disabled={ state.isSettingsChanged ? false : true }>\r\n                  Save\r\n                </button>\r\n              </div>\r\n\r\n          </section>\r\n          </form>\r\n        }\r\n      </main>\r\n    </div>\r\n\r\n    { state.clearAllSeries && \r\n      <section className=\"window window--login\">\r\n        <header className=\"window__header\">\r\n          <h2 className=\"window__header__heading\">Clear all?</h2> \r\n        </header>\r\n\r\n        <main className=\"window__main\">\r\n          <h3 className=\"window__main__message\">Are you sure you want to clear all series?</h3>\r\n        </main>\r\n\r\n        <section className=\"window__bottom\">\r\n          <button className=\"window__bottom__secondary-button\" onClick={ cancelClearAllSeries }>Cancel</button>\r\n          <button className=\"window__bottom__primary-button\" onClick={ confirmClearAllSeries }>Remove</button>\r\n        </section>\r\n      </section>\r\n    }\r\n\r\n    { state.clearAllProducts &&\r\n      <section className=\"window window--login\">\r\n        <header className=\"window__header\">\r\n          <h2 className=\"window__header__heading\">Clear all?</h2> \r\n        </header>\r\n\r\n        <main className=\"window__main\">\r\n          <h3 className=\"window__main__message\">Are you sure you want to clear all products?</h3>\r\n        </main>\r\n\r\n        <section className=\"window__bottom\">\r\n          <button className=\"window__bottom__secondary-button\" onClick={ cancelClearAllProducts }>Cancel</button>\r\n          <button className=\"window__bottom__primary-button\" onClick={ confirmClearAllProducts }>Remove</button>\r\n        </section>\r\n      </section>\r\n    }\r\n\r\n    </>,\r\n    document.getElementById(\"portal\")\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { FaChevronCircleLeft } from 'react-icons/fa';\r\nimport logo from '../../logo.png';\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function About({ previousPage, closeWindow }) {\r\n\r\n  // EFFECTS\r\n\r\n  // BLURING AND DISABLING POINTER EVENTS ON BACKGROUND AFTER MOUNTING\r\n  useEffect(() => {\r\n    const wrapper = document.querySelector(\".wrapper\");\r\n    const rootElement = document.querySelector(\"#root\");\r\n    const hamburger = document.querySelector(\".left-section__hamburger\");\r\n\r\n    wrapper.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n    wrapper.style.pointerEvents = \"none\";\r\n    rootElement.style.zIndex = 97;\r\n    hamburger.style.display = \"none\";\r\n    \r\n    return (() => {\r\n      wrapper.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      wrapper.style.pointerEvents = \"auto\";\r\n      rootElement.style.zIndex = 99;\r\n      if (window.innerWidth < 769)\r\n        hamburger.style.display = \"block\";\r\n    })\r\n\r\n  }, []);\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const handleBackToPreviousPage = (e) => {\r\n    e.preventDefault();\r\n    closeWindow();\r\n  }\r\n\r\n\r\n  // RETURN\r\n\r\n  return ReactDOM.createPortal (\r\n    <div className=\"window\">\r\n\r\n      <header className=\"window__header\">\r\n        <h2 className=\"window__header__heading\">About</h2>\r\n        <button className=\"window__header__back-button\" onClick={ handleBackToPreviousPage }><FaChevronCircleLeft /></button>\r\n      </header>\r\n\r\n      <main className=\"window__main\">\r\n        <section className=\"window__main__section\">\r\n          <img className=\"window__main__section__logo\" src={ logo } alt=\"Dietapp logo\"></img>\r\n          <h1 className=\"left-section__logo-container__title\">Diet\r\n            <span className=\"left-section__logo-container__title__right\">app</span>\r\n          </h1>\r\n        </section>\r\n        <section className=\"window__main__section\"> \r\n          <h3 className=\"window__main__section__title\">Info</h3>\r\n          <p className=\"window__main__section__text\">The Dietapp is a complex nutrition and training organizer.\r\n           Made to improve my skills in creating web apps using React,\r\n           React Hooks, SCSS and Firebase.</p>\r\n        </section>\r\n\r\n        <section className=\"window__main__section\"> \r\n          <h3 className=\"window__main__section__title\">Features</h3>\r\n          <p className=\"window__main__section__text\">You can manually set your daily demand as well as your exercises\r\n           which you are doing on training. An app saves data you entered\r\n           and makes a several operations on these like counting macronutrients,\r\n           progression made in training, or just storing these for any time you want.</p>\r\n        </section>\r\n\r\n        <section className=\"window__main__section\"> \r\n          <h3 className=\"window__main__section__title\">Idea</h3>\r\n          <p className=\"window__main__section__text\">Whole idea of the app is about my main hobby which are dietetics and\r\n           bodybuilding. After 3 years of being a fit, I have included the most useful\r\n           features to control your fit life.</p>\r\n        </section>\r\n\r\n        <section className=\"window__main__section\" style={{ marginTop: \"40px\" }}>\r\n          <h3 className=\"window__main__section__text\">© 2021 Karol Jurczyński</h3>\r\n        </section>\r\n      </main>\r\n\r\n      <section className=\"window__bottom\">\r\n        <div></div>\r\n        <button className=\"window__bottom__primary-button\" type=\"button\" onClick={ handleBackToPreviousPage }>Back</button>\r\n      </section>\r\n\r\n    </div>,\r\n    document.getElementById('portal')\r\n  )\r\n}","export default \"data:image/png;base64,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\"","// IMPORTS\r\n\r\nimport { React, useReducer, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { FaChevronCircleLeft, FaChevronCircleRight } from 'react-icons/fa';\r\n\r\n\r\nimport { db } from '../../index'; \r\nimport { collection, addDoc, getDocs } from \"firebase/firestore\";\r\n\r\nimport { init, send } from 'emailjs-com'\r\n\r\ninit(\"user_f86s58XiiAbqNCi2GgiUB\");\r\n\r\n\r\n// VARIABLES\r\n\r\nconst warnings = {\r\n  \"loginFail\": \"Incorrect login or password!\",\r\n  \"passwordsFail\": \"Passwords are not the same!\",\r\n  \"emailFail\": \"Incorrect e-mail!\",\r\n  \"minLengthFail\": \"Field is too short!\",\r\n  \"maxLengthFail\": \"Field is too long!\",\r\n  \"emptyFail\": \"Field is empty!\",\r\n  \"usernameExist\": \"Username exists in database!\",\r\n  \"emailExist\": \"E-mail exists in database!\",\r\n}\r\n\r\nconst initialState = {\r\n  isSignUpWindow: false,\r\n  isPasswordForgotten: false,\r\n  isFormCompleted: false,\r\n  warnings: {\r\n    signUpUsername: \"\",\r\n    signUpPassword: \"\",\r\n    signUpConfirmPassword: \"\",\r\n    signUpEmail: \"\",\r\n    logInUsername: \"\",\r\n    logInPassword: \"\"\r\n  },\r\n  formData: {\r\n    signUpUsername: \"\",\r\n    signUpPassword: \"\",\r\n    signUpConfirmPassword: \"\",\r\n    signUpEmail: \"\",\r\n    logInUsername: \"user\",\r\n    logInPassword: \"password\",\r\n    forgotPasswordEmail: \"\"\r\n  }\r\n}\r\n\r\nconst ACTIONS = {\r\n  NEGATE_SIGN_UP_WINDOW: 'negate-sign-up-window',\r\n  NEGATE_IS_PASSWORD_FORGOTTEN: 'negate-is-password-forgotten',\r\n  CHANGE_USER_DATA: 'change-user-data',\r\n  CHANGE_IS_FORM_COMPLETED: 'changer-is-form-completed',\r\n  SET_WARNING: 'set-warning',\r\n  CLEAR_ALL_WARNINGS: 'clear-all-warnings'\r\n}\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function Login({ isLogout, setUserStatus, setUserId, closeWindow }) {\r\n\r\n  // HOOKS\r\n\r\n  const reducer = (state, action) => {\r\n    switch (action.type) {\r\n      case ACTIONS.NEGATE_SIGN_UP_WINDOW: {\r\n        return { ...state, isSignUpWindow: !state.isSignUpWindow }\r\n      }\r\n\r\n      case ACTIONS.NEGATE_IS_PASSWORD_FORGOTTEN: {\r\n        return { ...state, isPasswordForgotten: !state.isPasswordForgotten }\r\n      }\r\n\r\n      case ACTIONS.CHANGE_USER_DATA: {\r\n        return { ...state, formData: { ...state.formData, [action.payload.key]: action.payload.value }};\r\n      }\r\n\r\n      case ACTIONS.CHANGE_IS_FORM_COMPLETED: {\r\n        return { ...state, isFormCompleted: action.payload }\r\n      }\r\n\r\n      case ACTIONS.SET_WARNING: {\r\n        return { ...state, warnings: { ...state.warnings, [action.payload.field]: action.payload.warning }}\r\n      }\r\n\r\n      case ACTIONS.CLEAR_ALL_WARNINGS: {\r\n        return { ...state, warnings: initialState.warnings }\r\n      }\r\n    }\r\n  }\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n\r\n  // EFFECTS\r\n\r\n  // BLURING AND DISABLING POINTER EVENTS ON BACKGROUND AFTER MOUNTING\r\n  useEffect(() => {\r\n    const wrapper = document.querySelector(\".wrapper\");\r\n    const rootElement = document.querySelector(\"#root\");\r\n    const hamburger = document.querySelector(\".left-section__hamburger\");\r\n    wrapper.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n    wrapper.style.pointerEvents = \"none\";\r\n    rootElement.style.zIndex = 97;\r\n    hamburger.style.display = \"none\";\r\n    \r\n    return (() => {\r\n      wrapper.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      wrapper.style.pointerEvents = \"auto\";\r\n      rootElement.style.zIndex = 99;\r\n      if (window.innerWidth < 769)\r\n        hamburger.style.display = \"flex\";\r\n    })\r\n\r\n  }, []);\r\n\r\n  // BLURING AND DISABLING POINTER EVENTS ON LOGIN WINDOW AFTER RESTORING PASSWORD WINDOW MOUNTING\r\n  useEffect(() => {\r\n    const loginWindow = document.querySelector(\".window--login\");\r\n    if (loginWindow) {\r\n      if (state.isPasswordForgotten) {\r\n        loginWindow.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n        loginWindow.style.pointerEvents = \"none\";\r\n      }\r\n      else {\r\n        loginWindow.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n        loginWindow.style.pointerEvents = \"auto\";\r\n      }\r\n    }\r\n\r\n  }, [ state.isPasswordForgotten ]);\r\n\r\n  // CHECKS IF FORM IS COMPLETED\r\n  useEffect(() => {\r\n    const signUpCondition = state.formData.signUpUsername && state.formData.signUpPassword && state.formData.signUpConfirmPassword && state.formData.signUpEmail;\r\n    const logInCondition = state.formData.logInUsername && state.formData.logInPassword;\r\n\r\n    if (state.isSignUpWindow) {\r\n      if (signUpCondition)\r\n        dispatch({ type: ACTIONS.CHANGE_IS_FORM_COMPLETED, payload: true });\r\n      else\r\n        dispatch({ type: ACTIONS.CHANGE_IS_FORM_COMPLETED, payload: false });\r\n    }\r\n\r\n    else {\r\n      if (logInCondition)\r\n        dispatch({ type: ACTIONS.CHANGE_IS_FORM_COMPLETED, payload: true });\r\n      else\r\n        dispatch({ type: ACTIONS.CHANGE_IS_FORM_COMPLETED, payload: false });\r\n    }\r\n     \r\n  }, [ state.formData ]);\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const isFieldTooShort = (field) => {\r\n    if (field.length < 3)\r\n      return true;\r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isFieldTooLong = (field) => {\r\n    if (field.length > 32)\r\n      return true;\r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isFieldEmpty = (field) => {\r\n    if (field.length === 0)\r\n      return true;\r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isEmailCorrect = (email) => {\r\n    const regEx = /^[\\w.-]{3,}@{1}[\\w.-]{1,}[.]{1}\\w{1,}/i;\r\n    if (regEx.test(email))\r\n      return true;\r\n    else\r\n      return false;\r\n  }\r\n\r\n  const handleFormTypeChanging = (e) => {\r\n    e.preventDefault();\r\n    dispatch({ type: ACTIONS.NEGATE_SIGN_UP_WINDOW });\r\n  }\r\n\r\n  const handlePrimaryButton = (e) => {\r\n    e.preventDefault();\r\n    state.isSignUpWindow ? handleSignUpUser() : handleLoginUser();\r\n  }\r\n\r\n  const validateSignUpInputs = async () => {\r\n    const formDataValues = [ \r\n      state.formData.signUpUsername, \r\n      state.formData.signUpPassword, \r\n      state.formData.signUpConfirmPassword, \r\n      state.formData.signUpEmail\r\n    ];\r\n    const formDataKeys = [ \r\n      \"signUpUsername\", \r\n      \"signUpPassword\",   \r\n      \"signUpConfirmPassword\", \r\n      \"signUpEmail\"\r\n    ];\r\n    let isValidatedSuccessfully = true;\r\n\r\n    formDataValues.forEach((formValue, index) => {\r\n      if (!isFieldEmpty(formValue)) {\r\n        if (!isFieldTooShort(formValue)) {\r\n          if (!isFieldTooLong(formValue)) {\r\n            dispatch({type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: ''}});\r\n          }\r\n          else {\r\n            dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: warnings[\"maxLengthFail\"]} });\r\n            dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[index], value: \"\" }});\r\n            isValidatedSuccessfully = false;\r\n          }\r\n        }\r\n        else {\r\n          dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: warnings[\"minLengthFail\"]} });\r\n          dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[index], value: \"\" }});\r\n          isValidatedSuccessfully = false;\r\n        }\r\n      }\r\n      else {\r\n        dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: warnings[\"emptyFail\"]} });\r\n        dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[index], value: \"\" }});\r\n        isValidatedSuccessfully = false;\r\n      }\r\n      \r\n      if (formDataKeys[index] === \"signUpEmail\") {\r\n        if (!isEmailCorrect(formDataValues[index])) {\r\n          dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: warnings[\"emailFail\"]} });\r\n          dispatch({ type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[index], value: \"\" }});\r\n          isValidatedSuccessfully = false;\r\n        }\r\n        else {\r\n          dispatch({type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: ''}});\r\n        }\r\n      }\r\n\r\n      if (formDataKeys[index] === \"signUpConfirmPassword\") {\r\n        if (state.formData.signUpConfirmPassword !== state.formData.signUpPassword) {\r\n          dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: warnings[\"passwordsFail\"]} });\r\n          dispatch({ type: ACTIONS.SET_WARNING, payload: {field: \"signUpPassword\", warning: warnings[\"passwordsFail\"]} });\r\n          dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[index], value: \"\" }});\r\n          dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: \"signUpPassword\", value: \"\" }});\r\n          isValidatedSuccessfully = false;\r\n        }\r\n        else {\r\n          dispatch({type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: ''}});\r\n        }\r\n      }\r\n    });\r\n\r\n    if (await isEmailExist(formDataValues[3])) {\r\n      console.log(\"exist\");\r\n      dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[3], warning: warnings[\"emailExist\"]} });\r\n      dispatch({ type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[3], value: \"\" }});\r\n      isValidatedSuccessfully = false;\r\n    }\r\n\r\n    if (await isUsernameExist(formDataValues[0])) {\r\n      console.log(\"exist\");\r\n      dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[0], warning: warnings[\"usernameExist\"]} });\r\n      dispatch({ type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[0], value: \"\" }});\r\n      isValidatedSuccessfully = false;\r\n    }\r\n\r\n    if (isValidatedSuccessfully) {\r\n      addUser();\r\n      dispatch({ type: ACTIONS.NEGATE_SIGN_UP_WINDOW });\r\n      dispatch({ type: ACTIONS.CLEAR_ALL_WARNINGS });\r\n    }\r\n  }\r\n\r\n  const validateLogInInputs = async () => {\r\n    const formDataValues = [ \r\n      state.formData.logInUsername, \r\n      state.formData.logInPassword, \r\n    ];\r\n    const formDataKeys = [ \r\n      \"logInUsername\", \r\n      \"logInPassword\",   \r\n    ];\r\n    let isValidatedSuccessfully = true;\r\n\r\n    formDataValues.forEach((formValue, index) => {\r\n      if (!isFieldEmpty(formValue)) {\r\n        if (!isFieldTooShort(formValue)) {\r\n          if (!isFieldTooLong(formValue)) {\r\n            dispatch({type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: ''}});\r\n          }\r\n          else {\r\n            dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: warnings[\"maxLengthFail\"]} });\r\n            dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[index], value: \"\" }});\r\n            isValidatedSuccessfully = false;\r\n          }\r\n        }\r\n        else {\r\n          dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: warnings[\"minLengthFail\"]} });\r\n          dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[index], value: \"\" }});\r\n          isValidatedSuccessfully = false;\r\n        }\r\n      }\r\n      else {\r\n        dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: warnings[\"emptyFail\"]} });\r\n        dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[index], value: \"\" }});\r\n        isValidatedSuccessfully = false;\r\n      }\r\n    });\r\n\r\n    if (isValidatedSuccessfully)\r\n      await logInUser();\r\n  }\r\n\r\n  const handleSignUpUser = async () => {\r\n    validateSignUpInputs();\r\n  }\r\n\r\n  const addUser = async () => {\r\n    try {\r\n      await addDoc(collection(db, \"users\"), {\r\n        username: state.formData.signUpUsername,\r\n        password: state.formData.signUpPassword,\r\n        email: state.formData.signUpEmail\r\n      });\r\n      \r\n    } \r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const handleLoginUser = async () => {\r\n    validateLogInInputs(); \r\n  }\r\n\r\n  const logInUser = async () => {\r\n    let isLoggedSuccessfully = false;\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.data().username === state.formData.logInUsername) {\r\n          if (user.data().password === state.formData.logInPassword) {\r\n            isLoggedSuccessfully = true;\r\n            setUserId(user.id);\r\n            setUserStatus(\"Logged\");\r\n            closeWindow();\r\n          }\r\n          else {\r\n            isLoggedSuccessfully = false;\r\n            clearFormData();\r\n          }   \r\n        }\r\n\r\n        else {\r\n          isLoggedSuccessfully = false;\r\n          clearFormData(); \r\n        }\r\n      });\r\n    }\r\n\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n    return isLoggedSuccessfully;\r\n  }\r\n\r\n  const handleLogoutUser = (e) => {\r\n    e.preventDefault();\r\n    setUserStatus(\"Log in\");\r\n    setUserId(0);\r\n    closeWindow();\r\n  }\r\n\r\n  const handleCancel = (e) => {\r\n    e.preventDefault();\r\n    closeWindow();\r\n  }\r\n  \r\n  const clearFormData = () => {\r\n    Object.keys(state.formData).forEach(key => {\r\n      dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: [key], value: \"\" }});\r\n    });\r\n  }\r\n\r\n  const handlePasswordRestoringWindow = (e) => {\r\n    e.preventDefault();\r\n    dispatch({ type: ACTIONS.NEGATE_IS_PASSWORD_FORGOTTEN });\r\n    clearFormData();\r\n  }\r\n\r\n  const isEmailExist = async (email) => {\r\n    let isExist = false;\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.data().email === email) {\r\n          isExist = true;\r\n        }});\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    return isExist;\r\n  }\r\n\r\n  const isUsernameExist = async (username) => {\r\n    let isExist = false;\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.data().username === username) {\r\n          isExist = true;\r\n        }});\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    return isExist;\r\n  }\r\n\r\n  const getUserPasswordFromEmail = async () => {\r\n    let password = \"\";\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.data().email === state.formData.forgotPasswordEmail) {\r\n          password = user.data().password;\r\n        }});\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    return password;\r\n  }\r\n\r\n  const handlePasswordRestoring = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (await isEmailExist(state.formData.forgotPasswordEmail)) {\r\n      const templateParams = {\r\n        user_email: state.formData.forgotPasswordEmail,\r\n        user_password: await getUserPasswordFromEmail()\r\n      };\r\n\r\n      await send(\"service_vvs15qe\", \"template_698pq4k\", templateParams)\r\n      .then(res => { alert(\"Check your e-mail inbox.\") })\r\n      .catch(err => { alert(\"Error with email sending, check console.\"); console.error(err) })\r\n    }\r\n    else {\r\n      alert(\"Account with entered e-mail does not exist!\");\r\n    }\r\n    \r\n    clearFormData();\r\n    dispatch({ type: ACTIONS.NEGATE_IS_PASSWORD_FORGOTTEN });\r\n  }\r\n\r\n  const handleOnChange = (e) => {\r\n    if (e.target.id !== \"confirmSignUpPassword\")\r\n      dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: e.target.id, value: e.target.value }});\r\n  }\r\n\r\n  \r\n  // RETURN\r\n\r\n  return ReactDOM.createPortal (\r\n    <>\r\n    { state.isPasswordForgotten \r\n    ? <div className=\"window window--forgotpassword\">\r\n\r\n        <header className=\"window__header\">\r\n          <h2 className=\"window__header__heading\">Forgotten password</h2>\r\n          <button\r\n            className=\"window__header__back-button\"\r\n            type=\"button\"\r\n            onClick={ handlePasswordRestoringWindow }\r\n            style={{ zIndex: 11 }}><FaChevronCircleLeft />\r\n          </button>\r\n          <button \r\n            className=\"window__header__add-button\"\r\n            type=\"button\"\r\n            onClick={ handlePasswordRestoring }\r\n            style={{ zIndex: 11 }}><FaChevronCircleRight />\r\n          </button>\r\n        </header>\r\n\r\n        <main className=\"window__main\">\r\n          <span className=\"window__main__input-line\">\r\n            <label className=\"window__main__input-line__label\" htmlFor=\"forgotPasswordEmail\">E-mail</label>\r\n            <input \r\n              className=\"window__main__input-line__input\" \r\n              type=\"email\" \r\n              id=\"forgotPasswordEmail\" \r\n              value={ state.formData.forgotPasswordEmail } \r\n              onChange={ handleOnChange } \r\n              placeholder={ state.warnings[\"forgotPasswordEmail\"] ? state.warnings[\"forgotPasswordEmail\"] : null }>\r\n            </input>\r\n          </span>\r\n        </main>\r\n\r\n        <section className=\"window__bottom\">\r\n          <button className=\"window__bottom__secondary-button\" type=\"button\" onClick={ handlePasswordRestoringWindow }>Cancel</button>\r\n          <button \r\n            className={ state.formData.forgotPasswordEmail ? \"window__bottom__primary-button\" : \"window__bottom__primary-button window__bottom__primary-button--disabled\"} \r\n            type=\"submit\" \r\n            disabled={ state.formData.forgotPasswordEmail ? false : true } \r\n            onClick={ state.formData.forgotPasswordEmail ? handlePasswordRestoring : null }>\r\n            Send\r\n          </button>\r\n        </section>\r\n      </div>\r\n    : null }\r\n\r\n    { isLogout \r\n      ? <div className=\"window window--logout\">\r\n          <header className=\"window__header\">\r\n            <h2 className=\"window__header__heading\">Log out?</h2>\r\n\r\n            <button \r\n              className=\"window__header__back-button\"\r\n              type=\"button\"\r\n              onClick={ handleCancel }\r\n              style={{ zIndex: 11 }}><FaChevronCircleLeft />\r\n            </button>\r\n\r\n            <button \r\n              className=\"window__header__add-button\"\r\n              type=\"button\"\r\n              onClick={ handleLogoutUser }\r\n              style={{ zIndex: 11 }}><FaChevronCircleRight />\r\n            </button>\r\n          </header>\r\n\r\n          <main className=\"window__main\">\r\n            <h3 className=\"window__main__section__title\">Confirm</h3>\r\n            <p className=\"window__main__message\">Are you sure you want to log out?</p>\r\n          </main>\r\n\r\n          <section className=\"window__bottom\">\r\n            <button className=\"window__bottom__secondary-button\" type=\"button\" onClick={ handleCancel }>Cancel</button>\r\n            <button className=\"window__bottom__primary-button\" type=\"button\" onClick={ handleLogoutUser }>Log out</button>\r\n          </section>\r\n        </div>\r\n\r\n      : <div className=\"window window--login\">\r\n          <header className=\"window__header\">\r\n            <h2 className=\"window__header__heading\">{ state.isSignUpWindow ? \"Sign up\" : \"Log in\"}</h2>\r\n            \r\n            <button \r\n              className=\"window__header__back-button\"\r\n              type=\"button\"\r\n              onClick={ handleCancel }\r\n              style={{ zIndex: 11 }}><FaChevronCircleLeft />\r\n            </button>\r\n\r\n            <button \r\n              className=\"window__header__add-button\"\r\n              type=\"submit\"\r\n              onClick={ handleLoginUser }\r\n              style={{ zIndex: 11 }}><FaChevronCircleRight />\r\n            </button>\r\n          </header>\r\n\r\n          { state.isSignUpWindow\r\n            ? <main className=\"window__main\">\r\n\r\n                <span className=\"window__main__input-line\">\r\n                  <label className=\"window__main__input-line__label\" htmlFor=\"signUpUsername\">Username</label>\r\n                  <input \r\n                    className=\"window__main__input-line__input\" \r\n                    type=\"text\" \r\n                    id=\"signUpUsername\" \r\n                    value={ state.formData.signUpUsername }\r\n                    onChange={ handleOnChange } \r\n                    placeholder={ state.warnings[\"signUpUsername\" ] ? state.warnings[\"signUpUsername\" ] : null }>\r\n                  </input>\r\n                </span>\r\n\r\n                <span className=\"window__main__input-line\">\r\n                  <label className=\"window__main__input-line__label\" htmlFor=\"signUpEmail\">Email</label>\r\n                  <input \r\n                    className=\"window__main__input-line__input\" \r\n                    type=\"email\" \r\n                    id=\"signUpEmail\" \r\n                    value={ state.formData.signUpEmail } \r\n                    onChange={ handleOnChange } \r\n                    placeholder={ state.warnings[\"signUpEmail\"] ? state.warnings[\"signUpEmail\"] : null }>\r\n                  </input>\r\n                </span>\r\n\r\n                <span className=\"window__main__input-line\">\r\n                  <label className=\"window__main__input-line__label\" htmlFor=\"signUpPassword\">Password</label>\r\n                  <input \r\n                    className=\"window__main__input-line__input\" \r\n                    type=\"password\" \r\n                    id=\"signUpPassword\" \r\n                    value={ state.formData.signUpPassword } \r\n                    onChange={ handleOnChange } \r\n                    placeholder={ state.warnings[\"signUpPassword\"] ? state.warnings[\"signUpPassword\"] : null }>\r\n                  </input>\r\n                </span>\r\n\r\n                <span className=\"window__main__input-line\">\r\n                  <label className=\"window__main__input-line__label\" htmlFor=\"signUpConfirmPassword\">Confirm Password</label>\r\n                  <input \r\n                    className=\"window__main__input-line__input\" \r\n                    type=\"password\" \r\n                    id=\"signUpConfirmPassword\" \r\n                    value={ state.formData.signUpConfirmPassword }\r\n                    onChange={ handleOnChange } \r\n                    placeholder={ state.warnings[\"signUpConfirmPassword\"] ? state.warnings[\"signUpConfirmPassword\"] : null }>\r\n                  </input>\r\n                </span>\r\n\r\n                <section className=\"window__main__login-options\">\r\n                  <span className=\"window__main__login-options__line\">{`Already had an account? `}\r\n                  </span>\r\n                  <span className=\"window__main__login-options__line\">\r\n                    <a className=\"window__main__login-options__line__link\" onClick={ handleFormTypeChanging } href=\"\">Log in</a>\r\n                  </span>\r\n                </section>\r\n              </main>\r\n\r\n            : <main className=\"window__main\">\r\n\r\n                <span className=\"window__main__input-line\">\r\n                  <label className=\"window__main__input-line__label\" htmlFor=\"logInUsername\">Username</label>\r\n                  <input \r\n                    className=\"window__main__input-line__input\" \r\n                    type=\"text\" \r\n                    id=\"logInUsername\" \r\n                    value={ state.formData.logInUsername } \r\n                    onChange={ handleOnChange } \r\n                    placeholder={ state.warnings[\"logInUsername\"] ? state.warnings[\"logInUsername\"] : null }>\r\n                  </input>\r\n                </span>\r\n\r\n                <span className=\"window__main__input-line\">\r\n                  <label className=\"window__main__input-line__label\" htmlFor=\"logInPassword\">Password</label>\r\n                  <input \r\n                    className=\"window__main__input-line__input\" \r\n                    type=\"password\" \r\n                    id=\"logInPassword\" \r\n                    value={ state.formData.logInPassword } \r\n                    onChange={ handleOnChange } \r\n                    placeholder={ state.warnings[\"logInPassword\"] ? state.warnings[\"logInPassword\"] : null }>\r\n                  </input>\r\n                  <a className=\"window__main__input-line__link\" href=\"\" onClick={ handlePasswordRestoringWindow }>Forgot your password?</a>\r\n                </span>\r\n\r\n                <section className=\"window__main__login-options\">\r\n                  <span className=\"window__main__login-options__line\">{`Don't have an account? `}\r\n                  </span>\r\n                  <span className=\"window__main__login-options__line\">\r\n                    <a className=\"window__main__login-options__line__link\" onClick={ handleFormTypeChanging } href=\"\">Sign up</a>\r\n                  </span>\r\n                </section>\r\n              </main>\r\n          }\r\n          \r\n          <section className=\"window__bottom\">\r\n            <button className=\"window__bottom__secondary-button\" type=\"button\" onClick={ handleCancel }>Cancel</button>\r\n            <button \r\n              className={ state.isFormCompleted ? \"window__bottom__primary-button\" : \"window__bottom__primary-button window__bottom__primary-button--disabled\"} \r\n              type=\"submit\" \r\n              disabled={ state.isFormCompleted ? false : true } \r\n              onClick={ state.isFormCompleted ? handlePrimaryButton : null }>\r\n              { state.isSignUpWindow ? \"Sign up\" : \"Log in\"}\r\n            </button>\r\n          </section>\r\n        </div>\r\n    }\r\n    </>,\r\n    document.getElementById('portal')\r\n  )\r\n}","export default __webpack_public_path__ + \"static/media/logo_white.cf6920f8.png\";","// IMPORTS\n\n// portal isn't 100vh on mobile\n\nimport { React, useReducer, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { Logo, Title, Hamburger, MenuItem, Quotation } from './components/left/left';\nimport DateChanger from './components/center/DateChanger';\nimport Meal from './components/meal/Meal';\nimport Gauge from './components/right/Gauge';\nimport Exercise from './components/exercise/Exercise';\nimport Settings from './components/settings/Settings';\nimport About from './components/about/About';\nimport Login from './components/login/Login';\nimport { exercises } from './exercisesList';\n\nimport logo from '../src/logo_white.png';\nimport './styles/index/index.css';\nimport './components/left/styles/left.css';\nimport './components/center/styles/center.css';\nimport './components/right/styles/right.css';\n\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore, collection, getDocs, setDoc, doc } from \"firebase/firestore\";\n\n\n// FUNCTIONS\n\nconst countPercentOfEatenIngredient = (eatenAmount, maxAmount) => {\n  if (Number.isNaN((Math.round(eatenAmount / maxAmount * 100))))\n    return 0;\n  else\n  return Math.round(eatenAmount / maxAmount * 100);\n}\n\nconst countAmountOfIngredientLeft = (eatenAmount, maxAmount) => {\n  if (eatenAmount >= maxAmount)\n    return 0;\n  else\n    return maxAmount - eatenAmount;\n}\n\n\n// VARIABLES\n\nconst ACTIONS = {\n  UPDATE_MEALS_INGREDIENTS_SUMMARY: 'update-meals-ingredients-summary',\n  UPDATE_DAILY_INGREDIENTS_SUMMARY: 'update-daily-ingredients-summary',\n  COUNT_GAUGES_DATA: 'count-gauges-data',\n  CHANGE_DATE: 'change-date',\n  CHANGE_PAGE_TITLE: 'change-page-title',\n  RESET_GAUGES: 'reset-gauges',\n  LOAD_SETTINGS: 'load-settings',\n  SET_WINDOW: 'set-window',\n  SET_USER_STATUS: 'set-user-status',\n  CHANGE_HAMBURGER_STATE: 'change-hamburger-state',\n  UPDATE_WINDOW_WIDTH: 'update-window-width',\n  SET_NEW_SETTINGS: 'set-new-settings',\n  SET_USER_ID: 'set-user-id'\n}\n\nconst initialState = {\n  dateIds: { dayId: 0, monthId: 0, yearId: 0 },\n  pageTitle: 'Dashboard',\n  previousPageTitle: 'Dashboard',\n  isLoginWindowEnabled: false,\n  isSettingsWindowEnabled: false,\n  isAboutWindowEnabled: false,\n  isAddWindowsEnabled: false,\n  isRemoveWindowsEnabled: false,\n  isMoreWindowsEnabled: false,\n  hamburgerState: false,\n  windowWidth: window.innerWidth,\n  userStatus: \"Log in\",\n  userId: 0,\n  mealsIngredientsSummary: [],\n  dailyIngredientsSummary: { kcal: 0, proteins: 0, fats: 0, carbs: 0 },\n  gaugesData: {\n    kcal: { eaten: 0, left: 0, max: 0, percent: 0 },\n    proteins: { eaten: 0, left: 0, max: 0, percent: 0 },\n    fats: { eaten: 0, left: 0, max: 0, percent: 0 },\n    carbs: { eaten: 0, left: 0, max: 0, percent: 0 }\n  },\n\n  settingsData: {\n    account: {\n\n    },\n\n    nutrition: {\n      dailyDemand: { kcal: 2000, proteins: 120, fats: 55, carbs: 240 },\n      namesOfMeals: { 0: \"Breakfast\", 1: \"II Breakfast\", 2: \"Lunch\", 3: \"Snack\", 4: \"Dinner\", 5: \"\", 6: \"\", 7: \"\", 8: \"\", 9: \"\" },\n      numberOfMeals: 5\n    },\n\n    training: {\n      selectedExercises: [0, 1, 2, 3, 4]\n    }\n  },\n\n  clearAllProducts: false,\n  clearAllSeries: false,\n  isSettingsChanged: false\n}\n\nconst firebaseApp = initializeApp({\n  apiKey: \"AIzaSyBw4pfmnfKQq187qJJ4UZ0VLtxhg8Ymy3E\",\n  authDomain: \"dietapp-557db.firebaseapp.com\",\n  projectId: \"dietapp-557db\"\n});\n\nexport const db = getFirestore();\n\n\n// COMPONENTS\n\nfunction App() {\n\n  // HOOKS\n\n  const reducer = (state, action) => {\n    switch (action.type) {\n\n      case ACTIONS.UPDATE_MEALS_INGREDIENTS_SUMMARY: {\n        const newMealsIngredientsSummary = [...state.mealsIngredientsSummary];\n\n        newMealsIngredientsSummary[action.payload.mealId] = {\n                                                              proteins: action.payload.data.proteins,\n                                                              fats: action.payload.data.fats, \n                                                              carbs: action.payload.data.carbs, \n                                                              kcal: action.payload.data.kcal };\n\n        return {...state, mealsIngredientsSummary: newMealsIngredientsSummary};                                                                 \n      }\n\n      case ACTIONS.UPDATE_DAILY_INGREDIENTS_SUMMARY: {\n        let dailyIngredientsSum = { proteins: 0, fats: 0, carbs: 0, kcal: 0 };\n        let mealsIngredientsSum = { proteins: 0, fats: 0, carbs: 0, kcal: 0 };\n\n        state.mealsIngredientsSummary.forEach(meal => {\n          mealsIngredientsSum = {\n                                  proteins: meal.proteins,\n                                  fats:     meal.fats,\n                                  carbs:    meal.carbs,\n                                  kcal:     meal.kcal };\n\n          dailyIngredientsSum = {\n                                  proteins: dailyIngredientsSum.proteins + mealsIngredientsSum.proteins,\n                                  fats:     dailyIngredientsSum.fats     + mealsIngredientsSum.fats,\n                                  carbs:    dailyIngredientsSum.carbs    + mealsIngredientsSum.carbs,\n                                  kcal:     dailyIngredientsSum.kcal     + mealsIngredientsSum.kcal };\n\n          mealsIngredientsSum = { proteins: 0,\n                                  fats: 0,\n                                  carbs: 0,\n                                  kcalS: 0 };\n        });\n\n        return {...state, dailyIngredientsSummary: dailyIngredientsSum };\n      }\n\n      case ACTIONS.COUNT_GAUGES_DATA: {\n        const ingredient = action.payload.typeOfIngredient;\n\n        return {...state, gaugesData: {...state.gaugesData, \n          [ingredient]: { \n            eaten: state.dailyIngredientsSummary[ingredient], \n            left: countAmountOfIngredientLeft(state.dailyIngredientsSummary[ingredient], state.settingsData.nutrition.dailyDemand[ingredient]), \n            max: state.settingsData.nutrition.dailyDemand[ingredient], \n            percent: countPercentOfEatenIngredient(state.dailyIngredientsSummary[ingredient], state.settingsData.nutrition.dailyDemand[ingredient]) }\n          }\n        }\n      }\n\n      case ACTIONS.RESET_GAUGES: {\n        return { ...state, gaugesData: initialState.gaugesData }\n      }\n\n      case ACTIONS.CHANGE_DATE: {\n        return {...state, dateIds: { dayId: action.payload.currentDay,  \n                                     monthId: action.payload.currentMonth,\n                                     yearId: action.payload.currentYear }};\n      }\n\n      case ACTIONS.CHANGE_PAGE_TITLE: {\n        return {...state, previousPageTitle: state.pageTitle, pageTitle: action.payload};\n      }\n      \n      case ACTIONS.LOAD_SETTINGS: {\n        let newSettings = JSON.parse(localStorage.getItem(\"settings\"));\n        return {...state, settingsData: newSettings }\n      }\n\n      case ACTIONS.SET_WINDOW: {\n        return {...state, [action.payload.window]: action.payload.value }\n      }\n\n      case ACTIONS.SET_USER_STATUS: {\n        return {...state, userStatus: action.payload}\n      }\n\n      case ACTIONS.CHANGE_HAMBURGER_STATE: {\n        return { ...state, hamburgerState: action.payload }\n      }\n\n      case ACTIONS.UPDATE_WINDOW_WIDTH: {\n        return { ...state, windowWidth: window.innerWidth };\n      }\n\n      case ACTIONS.SET_USER_NAME: {\n        return { ...state, userName: action.payload }\n      }\n\n      case ACTIONS.SET_NEW_SETTINGS: {\n        return { ...state, settingsData: action.payload }\n      }\n\n      case ACTIONS.SET_USER_ID: {\n        return { ...state, userId: action.payload }\n      }\n\n      default: return console.error(`Unknown action type: ${action.type}`);\n    }\n  }\n  const [state, dispatch] = useReducer(reducer, initialState);\n  \n\n  // VARIABLES\n\n  const MENU_CATEGORIES = [state.userStatus, \"Nutrition\", \"Training\", \"Settings\", \"About\"];\n\n\n  // EFFECTS\n\n  // GET USER NAME AND STATUS FROM COOKIE\n  useEffect(() => {\n    // IF COOKIE EXIST THEN LOAD IT\n    if (document.cookie) {\n      const cookie = document.cookie.split(\";\");  // user=default; status=Log in\n      let cookieData = {};\n\n      cookie.forEach(data => {\n        let key = data.split(\"=\")[0];\n        let value = data.split(\"=\")[1];\n        cookieData[key.trim()] = value.trim();\n      });\n  \n      dispatch({ type: ACTIONS.SET_USER_STATUS, payload: cookieData.status });\n      dispatch({ type: ACTIONS.SET_USER_ID, payload: cookieData.user });\n    }\n\n    // IF COOKIE NOT EXIST THEN MAKE IT WITH DEFAULT DATA\n    else {\n      document.cookie = \"user=\" + state.userId;\n      document.cookie = \"status=\" + state.userStatus;\n    }\n    \n  }, []);\n\n  // UPDATE COOKIE DATA AFTER CHANGE OF USER STATUS\n  useEffect(() => {\n    document.cookie = \"user=\" + state.userId;\n    document.cookie = \"status=\" + state.userStatus;\n\n  }, [ state.userStatus, state.userId ]);\n\n  // WINDOW WIDTH STUFF\n  useEffect(() => {\n\n    // WINDOW REAL HEIGHT COUNTING\n    let vh = window.innerHeight * 0.01;\n    const hamburger = document.querySelector(\".left-section__hamburger\");\n    \n    document.documentElement.style.setProperty('--vh', `${vh}px`);\n\n    window.addEventListener(\"resize\", () => {\n      dispatch({ type: ACTIONS.UPDATE_WINDOW_WIDTH });\n      dispatch({ type: ACTIONS.CHANGE_HAMBURGER_STATE, payload: false });\n\n      if (window.innerWidth < 769 && (state.isLoginWindowEnabled || state.isSettingsWindowEnabled || state.isAboutWindowEnabled))\n        hamburger.style.display = \"block\";\n      else\n        hamburger.style.display = \"none\";\n\n      // WINDOW REAL HEIGHT COUNTING AFTER RESIZING\n      vh = window.innerHeight * 0.01;\n      document.documentElement.style.setProperty('--vh', `${vh}px`);\n    });\n\n  }, []);\n\n  const saveSettingsToDatabase = async (user) => {\n    try {\n      await setDoc(doc(db, \"users\", String(user.id)), {\n        settings: state.settingsData\n      }, \n      { merge: true });\n    }\n    catch (e) {\n      console.error(e);\n    }\n  }\n\n  const getSettingsFromDatabase = async () => {\n    try {\n      const querySnapshot = await getDocs(collection(db, \"users\"));\n      querySnapshot.forEach(user => {\n        if (user.id === state.userId) {\n          if (user.data().settings)\n            dispatch({ type: ACTIONS.SET_NEW_SETTINGS, payload: user.data().settings });\n          else\n            saveSettingsToDatabase(user);\n        }\n      });\n    }\n\n    catch (e) {\n      console.error(e);\n    }\n  }\n\n  // LOADS SETTINGS\n  useEffect(() => {\n    if (state.userStatus === \"Logged\") {\n      getSettingsFromDatabase();\n      updateGauges();\n    }\n      \n    else {\n      dispatch({ type: ACTIONS.SET_NEW_SETTINGS, payload: initialState.settingsData });\n      dispatch({ type: ACTIONS.RESET_GAUGES });\n    }\n      \n  }, [ state.userStatus ]);\n\n  // TIMEOUT AFTER CHANGING DATE\n  useEffect(() => {\n    const dateChanger = document.querySelector(\".center-section__top__date-changer\");\n    dateChanger.style.pointerEvents = \"none\";\n    setTimeout(() => { dateChanger.style.pointerEvents = \"auto\" }, 100);\n\n  }, [ state.dateIds ])\n\n  // BLURING AND DISABLING POINTER EVENTS ON BACKGROUND AFTER LOG IN WINDOW MOUNTING \n  useEffect(() => {\n    if (state.hamburgerState)\n      dispatch({ type: ACTIONS.CHANGE_HAMBURGER_STATE, payload: false });\n\n  }, [ state.isLoginWindowEnabled, state.isSettingsWindowEnabled, state.isAboutWindowEnabled ]);\n\n  // TRANSFORMS HAMBURGER AND MENU\n  useEffect(() => {\n    const wrapper = document.querySelector(\".wrapper\");\n    const menu = document.querySelector(\".left-section__menu-container\");\n    const hamburger = document.querySelector(\".left-section__hamburger\");\n    const hamburgerLines = document.querySelectorAll(\".left-section__hamburger__line\");\n\n    if (state.windowWidth < 769) {\n      if (state.hamburgerState) {\n        wrapper.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\n        wrapper.style.pointerEvents = \"none\";\n        menu.style.display = \"flex\";\n        menu.style.right = 0;\n        hamburger.style.right = 200 - 28 - 15 + \"px\";\n        hamburgerLines[0].style.cssText =\"left: 0px; background: #FFFFFF; width: 100%; transform: rotate(45deg); border-radius: 10px\";\n        hamburgerLines[1].style.cssText =\"left: 10px; background: #FFFFFF; visibility: hidden\";\n        hamburgerLines[2].style.cssText =\"left: 0px; background: #FFFFFF; width: 100%; transform: rotate(-45deg); border-radius: 10px\";\n      }\n\n      else {\n        menu.style.display = \"none\";\n        menu.style.right = \"-200px\";\n        hamburger.style.right = \"10px\"\n        hamburgerLines[0].style.cssText =\"left: 0px; background: #7500AF; width: 8px; transform: rotate(0deg); border-radius: 50%\";\n        hamburgerLines[1].style.cssText =\"left: 10px; background: #7500AF; visibility: visible\";\n        hamburgerLines[2].style.cssText =\"left: 20px; background: #7500AF; width: 8px; transform: rotate(0deg); border-radius: 50%\";\n        \n        if (!state.isLoginWindowEnabled && !state.isSettingsWindowEnabled && !state.isAboutWindowEnabled) {\n          wrapper.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\n          wrapper.style.pointerEvents = \"auto\";\n        }\n      }\n    }\n    \n  }, [ state.hamburgerState ])\n\n  useEffect(() => {\n    getSettingsFromDatabase();\n\n  }, [ state.isSettingsWindowEnabled ])\n\n  \n  // FUNCTIONS\n\n  const updateMealSummary = (object, mealId) => {\n    dispatch({ type: ACTIONS.UPDATE_MEALS_INGREDIENTS_SUMMARY, payload: {data: object, mealId: mealId} });\n    updateDailySummary();\n  } \n\n  const updateDailySummary = () => {\n    dispatch({ type: ACTIONS.UPDATE_DAILY_INGREDIENTS_SUMMARY });\n    updateGauges();\n  }\n\n  const updateGauges = () => {\n    Object.keys(state.settingsData.nutrition.dailyDemand).forEach(ingredient => {\n      dispatch({ type: ACTIONS.COUNT_GAUGES_DATA, payload: { typeOfIngredient: ingredient} });\n    });\n  }\n\n  const updateDateIds = (newDateIds) => {\n    dispatch({ type: ACTIONS.CHANGE_DATE, payload: newDateIds })\n  }\n\n  const setUserId = (newUserId) => {\n    dispatch({ type: ACTIONS.SET_USER_ID, payload: newUserId });\n  }\n\n  const changePageTitle = (categoryTitle) => {\n    let newPageTitle = '';\n\n    if (categoryTitle === 'Nutrition')\n      newPageTitle = 'Dashboard';\n    else\n      newPageTitle = categoryTitle;\n\n    dispatch({type: ACTIONS.CHANGE_PAGE_TITLE, payload: newPageTitle });\n    dispatch({ type: ACTIONS.CHANGE_HAMBURGER_STATE, payload: false });\n  }\n\n  const handleMenu = (categoryTitle) => {\n    if (state.userStatus !== \"Log in\") {\n      switch (categoryTitle) {\n        case state.userStatus: {\n          dispatch({ type: ACTIONS.SET_WINDOW, payload: { window: \"isLoginWindowEnabled\", value: true } });\n          break;\n        }\n        case \"Nutrition\": {\n          changePageTitle(categoryTitle);\n          break;\n        }\n        case \"Training\": {\n          changePageTitle(categoryTitle);\n          break;\n        }\n        case \"Settings\": {\n          dispatch({ type: ACTIONS.SET_WINDOW, payload: { window: \"isSettingsWindowEnabled\", value: true } });\n          break;\n        }\n        case \"About\": {\n          dispatch({ type: ACTIONS.SET_WINDOW, payload: { window: \"isAboutWindowEnabled\", value: true } });\n          break;\n        }\n      }\n    }\n\n    else {\n      dispatch({ type: ACTIONS.SET_WINDOW, payload: { window: \"isLoginWindowEnabled\", value: true } });\n    }\n  }\n\n  const closeLoginWindow = () => {\n    dispatch({ type: ACTIONS.SET_WINDOW, payload: { window: \"isLoginWindowEnabled\", value: false } });\n  }\n\n  const closeSettingsWindow = () => {\n    dispatch({ type: ACTIONS.SET_WINDOW, payload: { window: \"isSettingsWindowEnabled\", value: false } });\n  }\n\n  const closeAboutWindow = () => {\n    dispatch({ type: ACTIONS.SET_WINDOW, payload: { window: \"isAboutWindowEnabled\", value: false } });\n  }\n\n  const setUserStatus = (newStatus) => {\n    dispatch({ type: ACTIONS.SET_USER_STATUS, payload: newStatus });\n  }\n\n  const handleHamburger = () => {\n    if (state.hamburgerState)\n      dispatch({ type: ACTIONS.CHANGE_HAMBURGER_STATE, payload: false });\n    else  \n      dispatch({ type: ACTIONS.CHANGE_HAMBURGER_STATE, payload: true });\n  }\n\n  const settingsShortcut = (e) => {\n    e.preventDefault();\n    handleMenu(\"Settings\");\n  }\n\n  const loginShortcut = (e) => {\n    e.preventDefault();\n    handleMenu(state.userStatus);\n  }\n\n  \n  // RETURN\n\n  return (\n    <>\n\n    { state.isLoginWindowEnabled &&\n\n          <Login \n            setUserStatus={ setUserStatus }\n            setUserId={ setUserId }\n            isLogout={ state.userStatus === \"Logged\" ? true : false }\n            closeWindow={ closeLoginWindow }\n          /> \n\n    }\n\n    { state.isSettingsWindowEnabled &&\n  \n          <Settings \n            initialData={ initialState.settingsData }\n            updateGauges={ updateGauges }\n            userId={ state.userId } \n            closeWindow={ closeSettingsWindow } \n          />\n\n    }\n\n    { state.isAboutWindowEnabled  &&\n\n          <About \n            closeWindow={ closeAboutWindow }\n          />\n    }\n\n    <Hamburger handleHamburger={ handleHamburger } />\n\n    { state.windowWidth < 769 &&\n      <>\n        <div className=\"left-section__menu-container__closer\" onClick={ state.hamburgerState ? handleHamburger : null }></div>\n        <ul className=\"left-section__menu-container\">\n\n          { MENU_CATEGORIES.map((category, index) => {\n              return <MenuItem key={ index } value={ category } href=\"\" isActive={ false } linkTo={ handleMenu } />\n            })\n          }\n\n          <div className=\"left-section__menu-container__logo\">\n            <img src={ logo } alt=\"Dietapp logo\"></img>\n          </div>\n\n        </ul>\n      </>\n    }\n\n    <div className=\"wrapper\">\n\n      <aside className=\"left-section\">\n\n        <header className=\"left-section__logo-container\" onClick={ loginShortcut }>\n          <Logo />\n          <Title />\n        </header>\n\n        { state.windowWidth > 768 && \n          <ul className=\"left-section__menu-container\">\n\n            { MENU_CATEGORIES.map((category, index) => {\n                return <MenuItem key={ index } value={ category } href=\"\" isActive={ false } linkTo={ handleMenu } />\n              })\n            }\n\n          </ul>\n        }\n        \n        <h2 className=\"left-section__quotation-container\">\n          <Quotation />\n        </h2>\n        \n      </aside>\n\n\n      <main className=\"center-section\">\n\n        <section className=\"center-section__top\">\n        \n          <h3 className=\"center-section__top__title\">{ state.pageTitle }</h3>\n\n          { ((state.pageTitle === 'Dashboard') || (state.pageTitle === 'Training')) && \n            <DateChanger \n              changeDate={ updateDateIds } \n              loginShortcut={ loginShortcut }\n              userStatus={ state.userStatus } />\n          }\n\n        </section>\n\n      \n        <section className=\"center-section__main\">\n\n        { state.pageTitle === 'Training' &&\n\n          state.settingsData.training.selectedExercises.map(selectedExerciseId => {\n            return (\n              <Exercise\n                key={ selectedExerciseId }\n                userId={ state.userId }\n                userStatus={ state.userStatus }\n                exerciseId={ selectedExerciseId } \n                dateIds={ state.dateIds } \n                name={ exercises[selectedExerciseId].name } \n                difficulty={ exercises[selectedExerciseId].difficulty } \n                description={ exercises[selectedExerciseId].description } \n                muscles={ exercises[selectedExerciseId].muscles } \n                typeOfExercise={ exercises[selectedExerciseId].typeOfExercise } \n                properFormLink={ exercises[selectedExerciseId].properFormLink }\n                loginShortcut={ loginShortcut }>\n              </Exercise>\n            )})\n        }\n\n        { state.pageTitle === 'Dashboard' && \n\n          Object.values(state.settingsData.nutrition.namesOfMeals).map((meal, index) => {\n            if (state.settingsData.nutrition.numberOfMeals > index)\n              return <Meal key={ index } userId={ state.userId } userStatus={ state.userStatus } isSettingsOpened={ state.isSettingsWindowEnabled } name={ meal } mealId={ index } dateIds={ state.dateIds } updateGauges={ updateMealSummary } loginShortcut={ loginShortcut } />\n            })\n\n        }\n\n        </section>\n\n\n      </main>\n\n\n      <aside className=\"right-section\" onClick={ settingsShortcut }>\n\n        <Gauge \n          amount={ state.gaugesData.kcal.eaten }\n          name=\"kcal\"\n          percent={ state.gaugesData.kcal.percent }\n          left={ state.gaugesData.kcal.left }\n          isKcal={true} />\n\n        <Gauge \n          amount={ state.gaugesData.proteins.eaten }\n          name=\"proteins\" \n          percent={ state.gaugesData.proteins.percent }\n          left={ state.gaugesData.proteins.left } />\n        \n        <Gauge \n          amount={ state.gaugesData.fats.eaten }\n          name=\"fats\" \n          percent={ state.gaugesData.fats.percent }\n          left={ state.gaugesData.fats.left } />\n        \n        <Gauge \n          amount={ state.gaugesData.carbs.eaten }   \n          name=\"carbohydrates\" \n          percent={ state.gaugesData.carbs.percent }\n          left={ state.gaugesData.carbs.left } />\n\n      </aside>\n\n\n    </div>\n    </>\n  )\n}\n\n\n// RENDERING\n\nReactDOM.render(<App />, document.querySelector(\"#root\"));"],"sourceRoot":""}
(this.webpackJsonpDietapp=this.webpackJsonpDietapp||[]).push([[0],[,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(3),c=a(6),s=a(1),r=a(7),i=a(2),o=a(13),l=a.n(o),d=(a(10),a.p+"static/media/logo.92f8fff8.png"),u=a(0);function _(){return Object(u.jsx)("img",{className:"left-section__logo-container__logo",src:d,alt:"Dietapp logo"})}function m(){return Object(u.jsxs)("h1",{className:"left-section__logo-container__title",children:["Diet",Object(u.jsx)("span",{className:"left-section__logo-container__title__right",children:"app"})]})}function b(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("span",{className:"left-section__quotation-container__top",children:"Be healthy,"}),Object(u.jsx)("span",{className:"left-section__quotation-container__bottom",children:"be happy!"})]})}function j(e){return Object(u.jsx)("li",{className:"left-section__menu-container__list-item",children:Object(u.jsx)("a",{className:e.isActive?"left-section__menu-container__list-item__content left-section__menu-container__list-item__content--active":"left-section__menu-container__list-item__content",href:e.href,title:e.value,children:e.value})})}a(11);var O=a(9);function p(e){var t=Object(i.useState)(0),a=Object(n.a)(t,2),c=a[0],s=a[1];return Object(i.useEffect)((function(){e.changeDay(c)}),[c]),Object(u.jsxs)("div",{className:"center-section__top__date-changer",children:[Object(u.jsx)("button",{className:"center-section__top__date-changer__previous-button",onClick:function(){s((function(e){return e-1}))},disabled:0===c,children:Object(u.jsx)(O.a,{})}),Object(u.jsx)("h4",{className:"center-section__top__date-changer__current-date",children:c}),Object(u.jsx)("button",{className:"center-section__top__date-changer__next-button",onClick:function(){s((function(e){return e+1}))},children:Object(u.jsx)(O.b,{})})]})}a(19);var g={NEGATE_MEAL_STATE:"negate-meal-state",NEGATE_ADDING_WINDOW_STATE:"negate-adding-window-state",NEGATE_REMOVING_WINDOW_STATE:"negate-removing-window-state",ADD_PRODUCT:"add-product",ENABLE_PLACEHOLDER:"enable-placeholder",DISABLE_PLACEHOLDER:"disable-placeholder",REMOVE_PRODUCT:"remove-product",ADD_TO_SUMMARY:"add-to-summary",SUB_FROM_SUMMARY:"sub-from-summary",CLEAR_PRODUCTLIST_BEFORE_DAY_CHANGING:"clear-productlist-before-day-changing",ADD_PRODUCT_TO_PRODUCTLIST:"add-product-to-productlist"};function f(e){var t={isMealOpened:!1,isAddingWindowOpened:!1,isRemovingWindowOpened:!1,countIngredients:!1,productList:[],newProduct:{id:0,mealId:e.mealId,dayId:0,name:"",weight:"",proteins:"",fats:"",carbs:"",kcal:""},summary:{proteins:0,fats:0,carbs:0,kcal:0}},a=Object(i.useReducer)((function(t,a){switch(a.type){case g.NEGATE_MEAL_STATE:return Object(s.a)(Object(s.a)({},t),{},{isMealOpened:!t.isMealOpened});case g.NEGATE_ADDING_WINDOW_STATE:return Object(s.a)(Object(s.a)({},t),{},{isAddingWindowOpened:!t.isAddingWindowOpened});case g.NEGATE_REMOVING_WINDOW_STATE:return Object(s.a)(Object(s.a)({},t),{},{isRemovingWindowOpened:!t.isRemovingWindowOpened});case g.CHANGE_NEW_PRODUCT_DATA:switch(a.payload.key){case"name":return Object(s.a)(Object(s.a)({},t),{},{newProduct:Object(s.a)(Object(s.a)({},t.newProduct),{},{name:a.payload.value})});case"weight":return Object(s.a)(Object(s.a)({},t),{},{newProduct:Object(s.a)(Object(s.a)({},t.newProduct),{},{weight:a.payload.value})});case"proteins":return Object(s.a)(Object(s.a)({},t),{},{newProduct:Object(s.a)(Object(s.a)({},t.newProduct),{},{proteins:a.payload.value})});case"fats":return Object(s.a)(Object(s.a)({},t),{},{newProduct:Object(s.a)(Object(s.a)({},t.newProduct),{},{fats:a.payload.value})});case"carbs":return Object(s.a)(Object(s.a)({},t),{},{newProduct:Object(s.a)(Object(s.a)({},t.newProduct),{},{carbs:a.payload.value})});case"kcal":return Object(s.a)(Object(s.a)({},t),{},{newProduct:Object(s.a)(Object(s.a)({},t.newProduct),{},{kcal:a.payload.value})})}case g.ADD_PRODUCT:return t.newProduct.id=Date.now(),t.newProduct.dayId=e.dayId,t.productList.push(t.newProduct),localStorage.setItem(t.newProduct.id,JSON.stringify(t.newProduct)),Object(s.a)(Object(s.a)({},t),{},{newProduct:{id:"",mealId:e.mealId,name:"",weight:"",proteins:"",fats:"",carbs:"",kcal:""}});case g.REMOVE_PRODUCT:var n=t.productList;return a.payload.forEach((function(e){n.forEach((function(t,a){Number(t.id)===Number(e)&&(n.splice(a,1),localStorage.removeItem(t.id))}))})),Object(s.a)(Object(s.a)({},t),{},{productList:n});case g.ADD_TO_SUMMARY:switch(a.payload.ingredient){case"proteins":return Object(s.a)(Object(s.a)({},t),{},{summary:Object(s.a)(Object(s.a)({},t.summary),{},{proteins:t.summary.proteins+Number(a.payload.value)})});case"fats":return Object(s.a)(Object(s.a)({},t),{},{summary:Object(s.a)(Object(s.a)({},t.summary),{},{fats:t.summary.fats+Number(a.payload.value)})});case"carbs":return Object(s.a)(Object(s.a)({},t),{},{summary:Object(s.a)(Object(s.a)({},t.summary),{},{carbs:t.summary.carbs+Number(a.payload.value)})});case"kcal":return Object(s.a)(Object(s.a)({},t),{},{summary:Object(s.a)(Object(s.a)({},t.summary),{},{kcal:t.summary.kcal+Number(a.payload.value)})})}case g.SUB_FROM_SUMMARY:switch(a.payload.ingredient){case"proteins":return Object(s.a)(Object(s.a)({},t),{},{summary:Object(s.a)(Object(s.a)({},t.summary),{},{proteins:t.summary.proteins-Number(a.payload.value)})});case"fats":return Object(s.a)(Object(s.a)({},t),{},{summary:Object(s.a)(Object(s.a)({},t.summary),{},{fats:t.summary.fats-Number(a.payload.value)})});case"carbs":return Object(s.a)(Object(s.a)({},t),{},{summary:Object(s.a)(Object(s.a)({},t.summary),{},{carbs:t.summary.carbs-Number(a.payload.value)})});case"kcal":return Object(s.a)(Object(s.a)({},t),{},{summary:Object(s.a)(Object(s.a)({},t.summary),{},{kcal:t.summary.kcal-Number(a.payload.value)})})}case g.ADD_PRODUCT_TO_PRODUCTLIST:return Object(s.a)(Object(s.a)({},t),{},{productList:[].concat(Object(r.a)(t.productList),[a.payload])});case g.CLEAR_PRODUCTLIST_BEFORE_DAY_CHANGING:return Object(s.a)(Object(s.a)({},t),{},{productList:[]});default:return console.error("Unknown action type: ".concat(a.type))}}),t),c=Object(n.a)(a,2),o=c[0],l=c[1],d=Object(i.useState)(!1),_=Object(n.a)(d,2),m=_[0],b=_[1];Object(i.useEffect)((function(){Object.keys(localStorage).forEach((function(t){var a=JSON.parse(localStorage.getItem(t));a.mealId===e.mealId&&a.dayId===e.dayId&&l({type:g.ADD_PRODUCT_TO_PRODUCTLIST,payload:a})}))}),[e.dayId]),Object(i.useEffect)((function(){return function(){return l({type:g.CLEAR_PRODUCTLIST_BEFORE_DAY_CHANGING})}}),[e.dayId]),Object(i.useEffect)((function(){var e=function(e,t){e&&l({type:t})};e(o.isMealOpened,g.NEGATE_MEAL_STATE),e(o.isAddingWindowOpened,g.NEGATE_ADDING_WINDOW_STATE),e(o.isRemovingWindowOpened,g.NEGATE_REMOVING_WINDOW_STATE)}),[e.dayId]),Object(i.useEffect)((function(){e.updateGauges(o.summary,e.mealId)}),[o.summary]),Object(i.useEffect)((function(){var e=function(e){document.querySelectorAll(".meal").forEach((function(t){t.childNodes[t.childNodes.length-3].style.pointerEvents=e}))};o.isAddingWindowOpened||o.isRemovingWindowOpened?e("none"):e("auto")}),[o.isAddingWindowOpened,o.isRemovingWindowOpened]);var j=function(e){Object.keys(e).forEach((function(t){l({type:g.ADD_TO_SUMMARY,payload:{ingredient:t,value:e[t]}})}))},O=function(e){Object.keys(e).forEach((function(t){l({type:g.SUB_FROM_SUMMARY,payload:{ingredient:t,value:e[t]}})}))},p=function(){l({type:g.NEGATE_ADDING_WINDOW_STATE})},f=function(){l({type:g.NEGATE_REMOVING_WINDOW_STATE})},y=function(e){var t=function(){l({type:g.CHANGE_NEW_PRODUCT_DATA,payload:{key:e.target.id,value:""}}),b(!0)},a=function(){l({type:g.CHANGE_NEW_PRODUCT_DATA,payload:{key:e.target.id,value:e.target.value}}),b(!1)};"name"===e.target.id?/[a-z\s]/i.test(e.target.value[e.target.value.length-1])?a():t():/[0-9]/.test(e.target.value[e.target.value.length-1])?/^[0]{1}/.test(e.target.value)?"weight"===e.target.id?t():(l({type:g.CHANGE_NEW_PRODUCT_DATA,payload:{key:e.target.id,value:"0"}}),b(!1)):a():t()};return Object(u.jsxs)("div",{className:"meal",style:o.isMealOpened?{marginLeft:"-10px"}:{marginLeft:"0px"},children:[Object(u.jsxs)("section",{className:"meal__top-section",onClick:function(){l({type:g.NEGATE_MEAL_STATE})},children:[Object(u.jsx)("h2",{className:"meal__top-section__meal-title",children:e.name}),Object(u.jsxs)("ul",{className:"meal__top-section__meal-stats-list",children:[Object(u.jsxs)("li",{className:"meal__top-section__meal-stats-list__item",children:[o.summary.proteins," g"]}),Object(u.jsxs)("li",{className:"meal__top-section__meal-stats-list__item",children:[o.summary.fats," g"]}),Object(u.jsxs)("li",{className:"meal__top-section__meal-stats-list__item",children:[o.summary.carbs," g"]}),Object(u.jsxs)("li",{className:"meal__top-section__meal-stats-list__item",children:[o.summary.kcal," kcal"]})]})]}),0!==o.productList.length?Object(u.jsx)("section",{className:"meal__products-section",style:o.isMealOpened?{display:"flex"}:{display:"none"},children:o.productList.map((function(e){return Object(u.jsx)(h,{name:e.name,weight:e.weight,proteins:e.proteins,fats:e.fats,carbs:e.carbs,kcal:e.kcal,addIngredientsFunction:j,subIngredientsFunction:O},e.id)}))}):null,Object(u.jsxs)("section",{className:"meal__buttons-section",style:o.isMealOpened?{display:"flex"}:{display:"none"},children:[Object(u.jsx)("button",{className:"meal__buttons-section__remove-button",onClick:o.productList.length?f:null,disabled:!(!o.isAddingWindowOpened&&!o.isRemovingWindowOpened),children:"Remove"}),Object(u.jsx)("button",{className:"meal__buttons-section__add-button",onClick:p,disabled:!(!o.isAddingWindowOpened&&!o.isRemovingWindowOpened),children:"Add"})]}),Object(u.jsxs)("div",{className:"meal__adding-window",style:o.isAddingWindowOpened?{display:"flex"}:{display:"none"},children:[Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l({type:g.ADD_PRODUCT}),l({type:g.NEGATE_ADDING_WINDOW_STATE})},children:[Object(u.jsx)("label",{htmlFor:"name",children:"Product name: "}),Object(u.jsx)("input",{type:"text",id:"name",value:o.newProduct.name,onChange:y,placeholder:m?"Product name must be a string!":null,maxLength:"32",required:!0}),Object(u.jsx)("label",{htmlFor:"weight",children:"Product weight: "}),Object(u.jsx)("input",{type:"text",id:"weight",value:o.newProduct.weight,onChange:y,placeholder:m?"Weight must be a number different than zero!":null,maxLength:"5",required:!0}),Object(u.jsx)("label",{htmlFor:"proteins",children:"Proteins: "}),Object(u.jsx)("input",{type:"text",id:"proteins",value:o.newProduct.proteins,onChange:y,placeholder:m?"Proteins must be a number!":null,maxLength:"5",required:!0}),Object(u.jsx)("label",{htmlFor:"fats",children:"Fats: "}),Object(u.jsx)("input",{type:"text",id:"fats",value:o.newProduct.fats,onChange:y,placeholder:m?"Fats must be a number!":null,maxLength:"5",required:!0}),Object(u.jsx)("label",{htmlFor:"carbs",children:"Carbs: "}),Object(u.jsx)("input",{type:"text",id:"carbs",value:o.newProduct.carbs,onChange:y,placeholder:m?"Carbs must be a number!":null,maxLength:"5",required:!0}),Object(u.jsx)("label",{htmlFor:"kcal",children:"Calories: "}),Object(u.jsx)("input",{type:"text",id:"kcal",value:o.newProduct.kcal,onChange:y,placeholder:m?"Calories must be a number!":null,maxLength:"5",required:!0}),Object(u.jsx)("input",{type:"submit",value:"Add"})]}),Object(u.jsx)("button",{onClick:p,children:"Cancel"})]}),Object(u.jsxs)("div",{className:"meal__removing-window",style:o.isRemovingWindowOpened?{display:"flex"}:{display:"none"},children:[Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();for(var t=[],a=0;a<o.productList.length;a++)e.target[a].checked&&t.push(e.target[a].id);l({type:g.REMOVE_PRODUCT,payload:t}),l({type:g.NEGATE_REMOVING_WINDOW_STATE})},children:[o.productList.map((function(e){return Object(u.jsxs)("span",{children:[Object(u.jsx)("label",{htmlFor:e.name,children:e.name}),Object(u.jsx)("input",{type:"checkbox",id:e.id,name:e.name})]},e.id)})),Object(u.jsx)("input",{type:"submit",value:"Remove"})]}),Object(u.jsx)("button",{onClick:f,children:"Cancel"})]})]})}function h(e){return Object(i.useEffect)((function(){var t={proteins:e.proteins,fats:e.fats,carbs:e.carbs,kcal:e.kcal};return e.addIngredientsFunction(t),function(){e.subIngredientsFunction(t)}}),[]),Object(u.jsxs)("div",{className:"meal__products-section__product",children:[Object(u.jsxs)("div",{className:"meal__products-section__product__info",children:[Object(u.jsx)("h2",{className:"meal__products-section__product__title",children:e.name}),Object(u.jsxs)("p",{className:"meal__products-section__product__weight",children:[e.weight," g"]})]}),Object(u.jsxs)("ul",{className:"meal__products-section__product__stats-list",children:[Object(u.jsxs)("li",{className:"meal__products-section__product__stats-list__item",children:[e.proteins," g"]}),Object(u.jsxs)("li",{className:"meal__products-section__product__stats-list__item",children:[e.fats," g"]}),Object(u.jsxs)("li",{className:"meal__products-section__product__stats-list__item",children:[e.carbs," g"]}),Object(u.jsxs)("li",{className:"meal__products-section__product__stats-list__item",children:[e.kcal," kcal"]})]})]})}a(12);function y(e){return Object(u.jsxs)("div",{className:e.isKcal?"right-section__gauge-container right-section__gauge-container--kcal":"right-section__gauge-container",children:[Object(u.jsx)("div",{className:e.isKcal?"right-section__gauge-container__bar right-section__gauge-container__bar--kcal":"right-section__gauge-container__bar",style:e.percent<100?function(){var t=2.7*e.percent;return t<90?{transform:"rotate(".concat(t,"deg)")}:t>=90&&t<180?{transform:"rotate(".concat(t,"deg)"),borderRightColor:"#ffffff80"}:t>=180?{transform:"rotate(".concat(t,"deg)"),borderRightColor:"#ffffff80",borderTopColor:"#ffffff80"}:void 0}():{borderColor:"#e00000"}}),Object(u.jsxs)("div",{className:e.isKcal?"right-section__gauge-container__text right-section__gauge-container__text--kcal":"right-section__gauge-container__text",children:[Object(u.jsxs)("h4",{className:e.isKcal?"right-section__gauge-container__text__amount right-section__gauge-container__text__amount--kcal":"right-section__gauge-container__text__amount",children:[e.amount," ",e.isKcal?null:"g"]}),Object(u.jsxs)("h6",{className:e.isKcal?"right-section__gauge-container__text__name right-section__gauge-container__text__name--kcal":"right-section__gauge-container__text__name",children:[e.name," "]}),Object(u.jsxs)("p",{className:e.isKcal?"right-section__gauge-container__text__percent right-section__gauge-container__text__percent--kcal":"right-section__gauge-container__text__percent",children:[e.percent," %"]}),Object(u.jsxs)("h5",{className:e.isKcal?"right-section__gauge-container__text__left right-section__gauge-container__text__left--kcal":"right-section__gauge-container__text__left",children:[e.left," ",e.isKcal?null:"g"," left"]})]})]})}a(20);var x={kcal:2e3,proteins:120,fats:55,carbs:240},N="update-meals-ingredients-summary",E="update-daily-ingredients-summary",v="count-gauges-data",A="change-day",D=function(e,t){return Math.round(e/t*100)};function I(){var e=Object(i.useReducer)((function(e,t){switch(t.type){case N:var a=Object(r.a)(e.mealsIngredientsSummary);return a[t.payload.mealId]={proteins:t.payload.data.proteins,fats:t.payload.data.fats,carbs:t.payload.data.carbs,kcal:t.payload.data.kcal},Object(s.a)(Object(s.a)({},e),{},{mealsIngredientsSummary:a});case E:var n={proteins:0,fats:0,carbs:0,kcal:0},i={proteins:0,fats:0,carbs:0,kcal:0};return e.mealsIngredientsSummary.forEach((function(e){i={proteins:e.proteins,fats:e.fats,carbs:e.carbs,kcal:e.kcal},n={proteins:n.proteins+i.proteins,fats:n.fats+i.fats,carbs:n.carbs+i.carbs,kcal:n.kcal+i.kcal},i={proteins:0,fats:0,carbs:0,kcalS:0}})),Object(s.a)(Object(s.a)({},e),{},{dailyIngredientsSummary:n});case v:var o=t.payload.typeOfIngredient;return Object(s.a)(Object(s.a)({},e),{},{gaugesData:Object(s.a)(Object(s.a)({},e.gaugesData),{},Object(c.a)({},o,{eaten:e.dailyIngredientsSummary[o],left:(l=e.dailyIngredientsSummary[o],d=x[o],l>=d?0:d-l),max:x[o],percent:D(e.dailyIngredientsSummary[o],x[o])}))});case A:return Object(s.a)(Object(s.a)({},e),{},{dayId:t.payload});default:return console.error("Unknown action type: ".concat(t.type))}var l,d}),{dayId:0,mealsIngredientsSummary:[],dailyIngredientsSummary:{},gaugesData:{kcal:{eaten:0,left:0,max:0,percent:0},proteins:{eaten:0,left:0,max:0,percent:0},fats:{eaten:0,left:0,max:0,percent:0},carbs:{eaten:0,left:0,max:0,percent:0}}}),t=Object(n.a)(e,2),a=t[0],o=t[1],l=function(e,t){o({type:N,payload:{data:e,mealId:t}}),d()},d=function(){o({type:E}),O()},O=function(){Object.keys(x).forEach((function(e){o({type:v,payload:{typeOfIngredient:e}})}))};return Object(u.jsxs)("div",{className:"wrapper",children:[Object(u.jsxs)("aside",{className:"left-section",children:[Object(u.jsxs)("header",{className:"left-section__logo-container",children:[Object(u.jsx)(_,{}),Object(u.jsx)(m,{})]}),Object(u.jsxs)("ul",{className:"left-section__menu-container",children:[Object(u.jsx)(j,{value:"Log in",href:"#",isActive:!0}),Object(u.jsx)(j,{value:"Settings",href:"#",isActive:!1}),Object(u.jsx)(j,{value:"Training",href:"#",isActive:!1}),Object(u.jsx)(j,{value:"About",href:"#",isActive:!1})]}),Object(u.jsx)("h2",{className:"left-section__quotation-container",children:Object(u.jsx)(b,{})})]}),Object(u.jsxs)("main",{className:"center-section",children:[Object(u.jsxs)("section",{className:"center-section__top",children:[Object(u.jsx)("h3",{className:"center-section__top__title",children:"Dashboard"}),Object(u.jsx)(p,{changeDay:function(e){o({type:A,payload:e})}})]}),Object(u.jsxs)("section",{className:"center-section__meals",children:[Object(u.jsx)(f,{name:"Breakfast",mealId:0,dayId:a.dayId,updateGauges:l}),Object(u.jsx)(f,{name:"II Breakfast",mealId:1,dayId:a.dayId,updateGauges:l}),Object(u.jsx)(f,{name:"Lunch",mealId:2,dayId:a.dayId,updateGauges:l}),Object(u.jsx)(f,{name:"Snack",mealId:3,dayId:a.dayId,updateGauges:l}),Object(u.jsx)(f,{name:"Dinner",mealId:4,dayId:a.dayId,updateGauges:l})]})]}),Object(u.jsxs)("aside",{className:"right-section",children:[Object(u.jsx)(y,{amount:a.gaugesData.kcal.eaten,name:"kcal",percent:a.gaugesData.kcal.percent,left:a.gaugesData.kcal.left,isKcal:!0}),Object(u.jsx)(y,{amount:a.gaugesData.proteins.eaten,name:"proteins",percent:a.gaugesData.proteins.percent,left:a.gaugesData.proteins.left}),Object(u.jsx)(y,{amount:a.gaugesData.fats.eaten,name:"fats",percent:a.gaugesData.fats.percent,left:a.gaugesData.fats.left}),Object(u.jsx)(y,{amount:a.gaugesData.carbs.eaten,name:"carbohydrates",percent:a.gaugesData.carbs.percent,left:a.gaugesData.carbs.left})]})]})}l.a.render(Object(u.jsx)(I,{}),document.querySelector("#root"))}],[[21,1,2]]]);
//# sourceMappingURL=main.756bbe9d.chunk.js.map
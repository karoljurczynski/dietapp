{"version":3,"sources":["components/left/styles/logo.png","components/left/left.js","components/center/DateChanger.js","components/product_adding_window/AddingForm.js","components/product_adding_window/EditForm.js","components/product_adding_window/AddingList.js","components/product_adding_window/ProductAddingWindow.js","components/product_removing_window/ProductRemovingWindow.js","components/meal/Product.js","components/meal/Meal.js","components/right/Gauge.js","components/MoreWindow/MoreWindow.js","components/exercise/Exercise.js","exercisesList.js","components/settings/Settings.js","components/about/About.js","logo.png","components/login/Login.js","logo_white.png","index.js"],"names":["Logo","className","src","logo","alt","Title","Hamburger","props","onClick","handleHamburger","Quotation","Account","useState","isLogged","handleAccount","MenuItem","isActive","e","preventDefault","linkTo","target","title","href","value","DateChanger","initialDate","Date","getDate","currentDay","setCurrentDay","getMonth","currentMonth","setCurrentMonth","getFullYear","currentYear","setCurrentYear","useEffect","changeDate","isLeapYear","changeNextDay","previousYear","previousMonth","previousDay","changePreviousDay","userStatus","loginShortcut","translateMonth","initialOptionsStates","AddingForm","optionsStates","setOptionsStates","isFormCompleted","setIsFormCompleted","isStateEqualToProps","setIsStateEqualToProps","checkIfFormCompleted","checkIfStateIsEqualToProps","updatePredefinedProductsInDatabase","newList","a","setDoc","doc","db","list","merge","console","error","getPredefinedProductsFromDatabase","predefinedProductsList","getDoc","querySnapshot","data","handleClearButton","handleFormClearing","handleCancelButton","handleAddWindow","Object","keys","forEach","option","key","type","name","document","querySelector","weight","proteins","fats","carbs","kcal","reps","saveNewProductToList","newProduct","push","onSubmit","handleSerieAdding","htmlFor","id","lastTimeData","training","serie","onChange","handleOnChange","placeholder","warning","maxLength","disabled","style","zIndex","handleProductAdding","keysArray","checkedOptions","searchForCheckedOptions","checkedKey","now","Number","prevOptions","backgroundColor","EditForm","ACTIONS","initialState","productData","useReducer","state","action","payload","warnings","dispatch","addingWindow","filter","pointerEvents","idOfSelectedProduct","handleEditingWindow","handleSavingChanges","handleProductEditing","ReactDOM","createPortal","test","length","nutritionPerOneGram","setValueAsNull","Math","round","getElementById","savedProductList","productSendForEdit","isEditWindowOpened","isAddButtonDisabled","AddingList","newSavedProductList","index","handleAddButtonDisabling","handleSelected","product","currentTarget","productName","fontWeight","background","updateProductSendForEdit","getIndexOfProduct","selectedProduct","isInteger","products","querySelectorAll","returnedBoolean","i","handleProductsAdding","selectedProducts","handlePredefinedProductsAdding","targetId","productList","returnedIndex","editedProduct","indexOfEditedProduct","color","map","AddWindow","isAddingTypeSetAtLeftOption","setAddingType","wrapper","rootElement","hamburger","accountIcon","display","window","innerWidth","isPlaceholderEnabled","RemoveWindow","isRemovingAllButtonPressed","setRemovingAllButtonPressed","isRemoveButtonDisabled","setIsRemoveButtonDisabled","removingWindow","handleRemoveButtonDisabling","item","itemName","handleRemoveButton","selectedIds","handleRemoving","items","handleRemoveWindow","serieCount","Product","ingredients","addIngredientsFunction","subIngredientsFunction","macros","NEGATE_MEAL_STATE","NEGATE_ADDING_WINDOW_STATE","NEGATE_REMOVING_WINDOW_STATE","ADD_PRODUCT","ENABLE_PLACEHOLDER","DISABLE_PLACEHOLDER","SET_WARNING","CLEAR_WARNING","REMOVE_PRODUCT","ADD_TO_SUMMARY","SUB_FROM_SUMMARY","CLEAR_PRODUCTLIST_BEFORE_DAY_CHANGING","ADD_PRODUCT_TO_PRODUCTLIST","Meal","saveProductInDatabase","newProductList","oldProductList","getDocs","collection","user","userId","concat","String","removeProductsFromDatabase","selectedId","splice","isMealOpened","isAddingWindowOpened","isRemovingWindowOpened","countIngredients","mealId","dateIds","dayId","monthId","yearId","summary","CHANGE_NEW_PRODUCT_DATA","checkedIdList","ingredient","setPlaceholderState","loadProductListFromDatabase","clearProductList","isSettingsOpened","disableVisibilityIfEnabled","updateGauges","changePointerEvents","meals","center","meal","overflowY","handleAddingToSummary","object","handleSubstractingFromSummary","left","setValueAsCorrect","setTimeout","modifiedSelectedProducts","checkedIdsList","Gauge","isKcal","percent","rotationDegrees","transform","borderRightColor","borderTopColor","handleRotation","borderColor","amount","MoreWindow","iframe","opacity","handleBackButton","handleMoreWindow","description","marginBottom","difficulty","typeOfExercise","muscles","muscle","allowFullScreen","width","height","properFormLink","Exercise","isExerciseOpened","isAddWindowOpened","isRemoveWindowOpened","isMoreWindowOpened","seriesList","newSerie","exerciseId","trainingId","removeSeriesFromDatabase","selectedSeries","newSeriesList","currentExerciseSeries","databaseSerie","saveSerieInDatabase","getPreviousTrainingDate","previousDateIds","potentialPreviousDateIds","updatedSeriesList","currentlyAddingSerieNumber","indexOfLastSerie","updatedLastSerieData","updatedLastTrainingData","potentialSeries","seriesBackup","JSON","parse","localStorage","getItem","previousTrainingSerie","undefined","clearSeriesList","loadSeriesListFromDatabase","getPotentialSeries","stringify","setItem","countProgress","potentialTrainings","lastTrainingData","message","percentValue","progressValue","lastTrainingTotal","countTotalWeight","toFixed","top","bottom","totalWeight","countTotalReps","totalReps","exercises","isCategoryOpened","isAccountCategory","isNutritionCategory","isTrainingCategory","username","email","password","editMealName","setMealsNumber","settingsData","account","nutrition","dailyDemand","namesOfMeals","0","1","2","3","4","5","6","7","8","9","numberOfMeals","selectedExercises","clearAllProducts","clearAllSeries","isSettingsChanged","Settings","newSettings","updatedSelectedExercises","indexOfExerciseToRemoving","indexOf","category","field","saveSettingsToDatabase","settings","updateUserPersonalData","clearDatabase","getSettingsFromDatabase","newUsername","newEmail","newPassword","settingsWindow","backupSettings","currentSettings","values","resetOptionsStates","handleSettingsSaved","personalDataValues","personalDataKeys","isValidatedSuccessfully","personalDataValue","log","isFieldTooShort","isFieldEmpty","isFieldTooLong","isEmailCorrect","isEmailExist","isUsernameExist","handleSettingsCanceled","closeWindow","handleSettingsReset","isExist","handleExerciseChoosing","children","handleSettingOnChange","attributes","handleCheckboxOnClick","handleCategorySwitch","required","data-key","exercise","includes","About","previousPage","handleBackToPreviousPage","marginTop","init","isSignUpWindow","isPasswordForgotten","signUpUsername","signUpPassword","signUpConfirmPassword","signUpEmail","logInUsername","logInPassword","formData","forgotPasswordEmail","Login","isLogout","setUserStatus","setUserId","setUserPersonalData","loginWindow","signUpCondition","logInCondition","handleFormTypeChanging","validateSignUpInputs","formDataValues","formDataKeys","formValue","addUser","validateLogInInputs","logInUser","handleSignUpUser","addDoc","handleLoginUser","isLoggedSuccessfully","clearFormData","handleLogoutUser","handleCancel","handlePasswordRestoringWindow","getUserPasswordFromEmail","handlePasswordRestoring","templateParams","user_email","user_password","send","then","res","alert","catch","err","countPercentOfEatenIngredient","eatenAmount","maxAmount","isNaN","SET_BOOLEAN_STATE","UPDATE_MEALS_INGREDIENTS_SUMMARY","UPDATE_DAILY_INGREDIENTS_SUMMARY","COUNT_GAUGES_DATA","CHANGE_DATE","CHANGE_PAGE_TITLE","RESET_GAUGES","LOAD_SETTINGS","SET_WINDOW","SET_USER_STATUS","CHANGE_HAMBURGER_STATE","UPDATE_WINDOW_WIDTH","SET_NEW_SETTINGS","SET_USER_ID","SET_USER_PERSONAL_DATA","SET_USERNAME","pageTitle","previousPageTitle","isLoginWindowEnabled","isSettingsWindowEnabled","isAboutWindowEnabled","isAddWindowsEnabled","isRemoveWindowsEnabled","isMoreWindowsEnabled","hamburgerState","accountState","windowWidth","mealsIngredientsSummary","dailyIngredientsSummary","gaugesData","eaten","max","initializeApp","apiKey","authDomain","projectId","getFirestore","App","newMealsIngredientsSummary","dailyIngredientsSum","mealsIngredientsSum","kcalS","typeOfIngredient","SET_USER_NAME","userName","MENU_CATEGORIES","cookie","split","cookieData","trim","status","vh","innerHeight","documentElement","setProperty","addEventListener","getUsername","dateChanger","menu","menuCloser","hamburgerLines","cssText","accountCloser","accountContainer","updateMealSummary","updateDailySummary","changePageTitle","categoryTitle","handleMenu","settingsShortcut","newStatus","newUserId","initialData","newDateIds","selectedExerciseId","render"],"mappings":"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","file":"static/js/main.8717dbd7.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.92f8fff8.png\";","// IMPORTS\r\n\r\nimport { React, useState } from 'react';\r\nimport logo from './styles/logo.png';\r\nimport { FaUser } from 'react-icons/fa';\r\n\r\n\r\n// COMPONENTS\r\n\r\nexport function Logo() {\r\n  return (\r\n    <img className=\"left-section__logo-container__logo\" src={logo} alt=\"Dietapp logo\" />\r\n  )\r\n}\r\n\r\nexport function Title() {\r\n  return (\r\n    <h1 className=\"left-section__logo-container__title\">Diet\r\n      <span className=\"left-section__logo-container__title__right\">app</span>\r\n    </h1>\r\n  )\r\n}\r\n\r\nexport function Hamburger(props) {\r\n  return (\r\n    <button className=\"left-section__hamburger\" onClick={ props.handleHamburger }>\r\n      <span className=\"left-section__hamburger__line\"></span>\r\n      <span className=\"left-section__hamburger__line\"></span>\r\n      <span className=\"left-section__hamburger__line\"></span>\r\n    </button>\r\n  )\r\n}\r\n\r\nexport function Quotation() {\r\n  return (\r\n    <>\r\n      <span className=\"left-section__quotation-container__top\">Be healthy,</span>\r\n      <span className=\"left-section__quotation-container__bottom\">be happy!</span>\r\n    </>\r\n  )\r\n}\r\n\r\nexport function Account(props) {\r\n  const [isLogged, setIsLogged] = useState(props.isLogged);\r\n  const handleClick = (e) => {\r\n    e.preventDefault();\r\n    props.handleAccount(e);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <button \r\n        className={ props.isLogged ? \"left-section__account left-section__account--logged\" : \"left-section__account\" }\r\n        onClick={ props.handleAccount }>\r\n        <FaUser className=\"left-section__account__icon\"/>\r\n      </button>\r\n    </>\r\n  )\r\n}\r\n\r\nexport function MenuItem(props) {\r\n\r\n  // FUNCTIONS\r\n\r\n  const handleClick = (e) => {\r\n    e.preventDefault();\r\n    props.linkTo(e.target.title);\r\n  }\r\n\r\n  \r\n  // RETURN\r\n\r\n  return (\r\n    <li className=\"left-section__menu-container__list-item\">\r\n        <a \r\n          className={ props.isActive \r\n                      ? \"left-section__menu-container__list-item__content left-section__menu-container__list-item__content--active\" \r\n                      : \"left-section__menu-container__list-item__content\" }\r\n          onClick={ handleClick }\r\n          href={ props.href }\r\n          title={ props.value }>{ props.value }</a>\r\n    </li>\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useState, useEffect } from 'react';\r\nimport './styles/center.css';\r\nimport { FaChevronCircleLeft, FaChevronCircleRight } from 'react-icons/fa';\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function DateChanger(props) {\r\n\r\n  // VARIABLES\r\n\r\n  const initialDate = new Date();\r\n\r\n\r\n  // HOOKS\r\n\r\n  const [currentDay, setCurrentDay] = useState(initialDate.getDate());\r\n  const [currentMonth, setCurrentMonth] = useState(initialDate.getMonth() + 1);\r\n  const [currentYear, setCurrentYear] = useState(initialDate.getFullYear());\r\n\r\n  \r\n  // EFFECTS\r\n\r\n  // CHANGES DATE AFTER MODIFYING STATES\r\n  useEffect(() => { \r\n    props.changeDate({ currentDay, currentMonth, currentYear });\r\n\r\n  }, [currentDay, currentMonth, currentYear]);\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const translateMonth = () => {\r\n    switch(currentMonth) {\r\n      case 1: return 'January';\r\n      case 2: return 'February';\r\n      case 3: return 'March';\r\n      case 4: return 'April';\r\n      case 5: return 'May';\r\n      case 6: return 'June';\r\n      case 7: return 'July';\r\n      case 8: return 'August';\r\n      case 9: return 'September';\r\n      case 10: return 'October';\r\n      case 11: return 'November';\r\n      case 12: return 'December';\r\n    }\r\n  }\r\n\r\n  const isLeapYear = () => {\r\n    if (((currentYear % 4 === 0) && (currentYear % 100 !== 0)) || currentYear % 400 === 0)\r\n       return true;\r\n    \r\n    else\r\n       return false;\r\n  }\r\n\r\n  const isDayLastInMonth = () => {\r\n    if ((currentDay === 29 && currentMonth === 2 && isLeapYear()) ||\r\n        (currentDay === 28 && currentMonth === 2 && !isLeapYear()) ||\r\n        (currentDay === 30 && ((currentMonth === 4) || \r\n                            (currentMonth === 6) || \r\n                            (currentMonth === 9) ||\r\n                            (currentMonth === 11))) ||\r\n        (currentDay === 31))\r\n      return true;\r\n    \r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isDayLastInDecember = () => {\r\n    if ((currentDay === 31) && (currentMonth === 12))\r\n      return true;\r\n    \r\n    else\r\n      return false;\r\n  }\r\n\r\n  const changeNextDay = () => {\r\n    if(isDayLastInMonth()) {\r\n\r\n      if(isDayLastInDecember()) {\r\n        setCurrentDay(1);\r\n        setCurrentMonth(1);\r\n        setCurrentYear(previousYear => previousYear + 1);\r\n      }\r\n\r\n      else {\r\n        setCurrentDay(1);\r\n        setCurrentMonth(previousMonth => previousMonth + 1);\r\n      }\r\n    }\r\n\r\n    else {\r\n      setCurrentDay(previousDay => previousDay + 1);\r\n    }\r\n  }\r\n\r\n  const handleNextButton = () => {\r\n    changeNextDay();\r\n  }\r\n\r\n  const isDayFirstInMonth = () => {\r\n    if(currentDay === 1)\r\n      return true;\r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isDayFirstInJanuary = () => {\r\n    if ((currentDay === 1) && (currentMonth === 1))\r\n      return true;\r\n    \r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isDayFirstInMarch = () => {\r\n    if ((currentDay === 1) && (currentMonth === 3))\r\n      return true;\r\n    \r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isDayFirstIn30DayMonths = () => {\r\n    if ((currentDay === 1) && ((currentMonth === 4) || (currentMonth === 6) || (currentMonth === 8) || (currentMonth === 9) || (currentMonth === 11)))\r\n      return true;\r\n    \r\n    else\r\n      return false;\r\n  }\r\n\r\n  const changePreviousDay = () => {\r\n    if (isDayFirstInJanuary()) {\r\n      setCurrentDay(31);\r\n      setCurrentMonth(12);\r\n      setCurrentYear(previousYear => previousYear - 1);\r\n    }\r\n\r\n    else if (isDayFirstInMarch()) {\r\n      if(isLeapYear())\r\n        setCurrentDay(29);\r\n      else\r\n        setCurrentDay(28);\r\n      \r\n      setCurrentMonth(2);\r\n    }\r\n\r\n    else if (isDayFirstIn30DayMonths()) {\r\n      setCurrentDay(31);\r\n      setCurrentMonth(previousMonth => previousMonth - 1);\r\n    }\r\n\r\n    else if (isDayFirstInMonth()) {\r\n      setCurrentDay(30);\r\n      setCurrentMonth(previousMonth => previousMonth - 1);\r\n    }\r\n    \r\n    else {\r\n      setCurrentDay(previousDay => previousDay - 1);\r\n    }\r\n  }\r\n\r\n  const handlePreviousButton = () => {\r\n    changePreviousDay();\r\n  }\r\n\r\n  \r\n  // RETURN\r\n\r\n  return (\r\n    <div className=\"center-section__top__date-changer\">\r\n\r\n      <button \r\n        className=\"center-section__top__date-changer__previous-button\"\r\n        onClick={ props.userStatus === \"Log in\" ? props.loginShortcut : handlePreviousButton }>\r\n        <FaChevronCircleLeft />\r\n      </button>\r\n\r\n      <h4 className=\"center-section__top__date-changer__current-date\">{ `${translateMonth()} ${currentDay}` }</h4>\r\n\r\n      <button \r\n        className=\"center-section__top__date-changer__next-button\"\r\n        onClick={ props.userStatus === \"Log in\" ? props.loginShortcut : handleNextButton }>\r\n        <FaChevronCircleRight />\r\n      </button>\r\n\r\n    </div>\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useState, useEffect } from 'react';\r\nimport { FaPlusCircle } from 'react-icons/fa';\r\n\r\nimport { db } from '../../index'; \r\nimport { getDoc, setDoc, doc } from \"firebase/firestore\";\r\n\r\n\r\n// VARIABLES\r\n\r\nconst initialOptionsStates = {\r\n  'list-saving': false\r\n};\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function AddingForm(props) {\r\n\r\n  // HOOKS\r\n  \r\n  const [optionsStates, setOptionsStates] = useState(initialOptionsStates);\r\n  const [isFormCompleted, setIsFormCompleted] = useState(false);\r\n  const [isStateEqualToProps, setIsStateEqualToProps] = useState(true);\r\n  \r\n\r\n  // EFFECTS\r\n\r\n  // CHECKING IF FORM IS COMPLETED\r\n  useEffect(() => { \r\n    checkIfFormCompleted();\r\n    checkIfStateIsEqualToProps();\r\n  }, [ props, optionsStates ]);\r\n\r\n  \r\n  // FUNCTIONS\r\n\r\n  const updatePredefinedProductsInDatabase = async (newList) => {\r\n    try {\r\n      await setDoc(doc(db, \"predefinedProducts\", \"predefinedProductsList\"), {\r\n        list: newList\r\n      },\r\n      { merge: true });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const getPredefinedProductsFromDatabase = async () => {\r\n    let predefinedProductsList = [];\r\n    try {\r\n      const querySnapshot = await getDoc(doc(db, \"predefinedProducts\", \"predefinedProductsList\"));\r\n      predefinedProductsList = querySnapshot.data().list;\r\n      if (!predefinedProductsList)\r\n        updatePredefinedProductsInDatabase([]);\r\n    }    \r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n    return predefinedProductsList;\r\n  }\r\n\r\n  const handleClearButton = () => {\r\n    setOptionsStates(initialOptionsStates);\r\n    props.handleFormClearing();\r\n    setIsStateEqualToProps(true);\r\n  }\r\n\r\n  const handleCancelButton = () => {\r\n    props.handleAddWindow();\r\n  }\r\n\r\n  const checkIfStateIsEqualToProps = () => {\r\n    // CHECKING OPTIONS\r\n    Object.keys(optionsStates).forEach(option => {\r\n      setIsStateEqualToProps(true);\r\n      if (optionsStates[option] !== initialOptionsStates[option])\r\n        setIsStateEqualToProps(false);\r\n    });\r\n\r\n    // CHECKING INPUTS\r\n    Object.keys(props.data).forEach(key => {\r\n      if (props.data[key])\r\n        setIsStateEqualToProps(false);\r\n    });\r\n  }\r\n\r\n  const checkIfFormCompleted = () => {\r\n    if (props.type === 'nutrition') {\r\n      const name = document.querySelector(\"#name\").value;\r\n      const weight = document.querySelector(\"#weight\").value;\r\n      const proteins = document.querySelector(\"#proteins\").value;\r\n      const fats = document.querySelector(\"#fats\").value;\r\n      const carbs = document.querySelector(\"#carbs\").value;\r\n      const kcal = document.querySelector(\"#kcal\").value;\r\n\r\n      if(name && weight && proteins && fats && carbs && kcal)\r\n        setIsFormCompleted(true);\r\n      else\r\n        setIsFormCompleted(false);\r\n    }\r\n\r\n    else {\r\n      const weight = document.querySelector(\"#weight\").value;\r\n      const reps = document.querySelector(\"#reps\").value;\r\n\r\n      if (weight && reps)\r\n        setIsFormCompleted(true);\r\n      else\r\n        setIsFormCompleted(false);\r\n    }\r\n  }\r\n\r\n  const searchForCheckedOptions = (keysArray) => {\r\n    let checkedOptions = [];\r\n    keysArray.forEach(key => {\r\n      if (optionsStates[key])\r\n        checkedOptions.push(key);\r\n    });\r\n\r\n    return checkedOptions;\r\n  }\r\n\r\n  const handleAddProduct = (e) => {\r\n    props.handleProductAdding(e);\r\n    \r\n    const keys = Object.keys(optionsStates);\r\n\r\n    const checkedOptions = searchForCheckedOptions(keys);\r\n\r\n    checkedOptions.forEach(checkedKey => {\r\n\r\n      switch(checkedKey) {\r\n        case 'list-saving': {\r\n\r\n          const newProduct = {\r\n            id:       Date.now(), \r\n            name:     document.querySelector(\"#name\").value, \r\n            weight:   Number(document.querySelector(\"#weight\").value), \r\n            proteins: Number(document.querySelector(\"#proteins\").value), \r\n            fats:     Number(document.querySelector(\"#fats\").value),\r\n            carbs:    Number(document.querySelector(\"#carbs\").value),\r\n            kcal:     Number(document.querySelector(\"#kcal\").value),\r\n          }\r\n\r\n          saveNewProductToList(newProduct);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  const handleAddSerie = (e) => {\r\n    props.handleSerieAdding(e);\r\n\r\n  }\r\n\r\n  const saveNewProductToList = async (newProduct) => {\r\n    const newList =  await getPredefinedProductsFromDatabase();\r\n    newList.push(newProduct);\r\n    updatePredefinedProductsInDatabase(newList);\r\n  }\r\n\r\n  const handleCheckboxOnClick = (e) => {\r\n    setOptionsStates(prevOptions => { return {...prevOptions, [e.target.id]: !optionsStates[e.target.id]} });\r\n  }\r\n\r\n\r\n  // RETURN\r\n\r\n  return (\r\n    <>\r\n    { props.type !== 'nutrition' \r\n      ? <form className=\"window__main window__main--add\" onSubmit={ handleAddSerie }>\r\n\r\n          <section className=\"window__main__section window__main__section--form\">\r\n\r\n            <h3 className=\"window__main__section__title\">Last time</h3>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"oldWeight\">Weight: </label>\r\n              <p \r\n                className=\"window__main__input-line__input window__main__input-line__input--unchanging\" \r\n                id=\"oldWeight\">\r\n                { props.type === 'last-training' ? props.lastTimeData.training.weight : props.lastTimeData.serie.weight }\r\n              </p>\r\n              <span className=\"window__main__input-line__unit\">kg</span>\r\n            </div>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"oldReps\">Reps: </label>\r\n              <p \r\n                className=\"window__main__input-line__input window__main__input-line__input--unchanging\" \r\n                id=\"oldReps\">\r\n                { props.type === 'last-training' ? props.lastTimeData.training.reps : props.lastTimeData.serie.reps }\r\n              </p>\r\n              <span className=\"window__main__input-line__unit\">reps</span>\r\n            </div>\r\n          \r\n          </section>\r\n\r\n          <section className=\"window__main__section window__main__section--form\">\r\n\r\n            <h3 className=\"window__main__section__title\">New serie</h3>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"weight\">Weight: </label>\r\n              <input\r\n                className=\"window__main__input-line__input\" \r\n                type=\"text\" \r\n                id=\"weight\"\r\n                value={ props.data.weight } \r\n                onChange={ props.handleOnChange }\r\n                placeholder={ props.warning[1] === 'weight' ? props.warning[0] : null }\r\n                maxLength=\"3\">\r\n              </input>\r\n              <span className=\"window__main__input-line__unit\">kg</span>\r\n            </div>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"reps\">Reps: </label>\r\n              <input \r\n                className=\"window__main__input-line__input\" \r\n                type=\"text\" \r\n                id=\"reps\"\r\n                value={ props.data.reps } \r\n                onChange={ props.handleOnChange }\r\n                placeholder={ props.warning[1] === 'reps' ? props.warning[0] : null }\r\n                maxLength=\"2\">\r\n              </input>\r\n              <span className=\"window__main__input-line__unit\">reps</span>\r\n            </div>\r\n            \r\n          </section>\r\n\r\n          <button \r\n                className={ isFormCompleted\r\n                            ? \"window__header__add-button\"\r\n                            : \"window__header__add-button window__header__add-button--disabled\" }\r\n                type=\"submit\"\r\n                disabled={ isFormCompleted ? false : true }><FaPlusCircle /></button>\r\n\r\n          <section className=\"window__bottom\">\r\n\r\n            <button \r\n              className={ isStateEqualToProps ? \"window__bottom__tertiary-button window__bottom__tertiary-button--disabled\" : \"window__bottom__tertiary-button\" } \r\n              disabled={ isStateEqualToProps ? true : false }\r\n              type=\"button\" \r\n              onClick={ handleClearButton }>\r\n              Clear</button>\r\n\r\n            <div>\r\n              <button className=\"window__bottom__secondary-button\" type=\"button\" onClick={ handleCancelButton }>Cancel</button>\r\n              <button \r\n                className={ isFormCompleted\r\n                            ? \"window__bottom__primary-button\"\r\n                            : \"window__bottom__primary-button window__bottom__primary-button--disabled\" }\r\n                type=\"submit\"\r\n                disabled={ isFormCompleted ? false : true }>Add</button>\r\n            </div>\r\n\r\n          </section>\r\n\r\n          <button \r\n            className={ isFormCompleted\r\n                        ? \"window__header__add-button\"\r\n                        : \"window__header__add-button window__header__add-button--disabled\" }\r\n            type=\"submit\"\r\n            style={{ zIndex: 11 }}\r\n            disabled={ isFormCompleted ? false : true }><FaPlusCircle />\r\n          </button>\r\n\r\n        </form>\r\n\r\n      : <form className=\"window__main window__main--add\" onSubmit={ handleAddProduct }>\r\n\r\n          <section className=\"window__main__section window__main__section--form\">\r\n\r\n            <h3 className=\"window__main__section__title\">Product info</h3>\r\n            \r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"name\">Product name: </label>\r\n              <input\r\n                className=\"window__main__input-line__input\"\r\n                type=\"text\"\r\n                id=\"name\"\r\n                value={ props.data.name }\r\n                onChange={ props.handleOnChange }\r\n                placeholder={ props.warning[1] === 'name' ? props.warning[0] : null }\r\n                maxLength=\"32\">\r\n              </input>\r\n            </div>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"weight\">Product weight: </label>\r\n              <input \r\n                className=\"window__main__input-line__input\"\r\n                type=\"text\"\r\n                id=\"weight\"\r\n                value={ props.data.weight } \r\n                onChange={ props.handleOnChange }\r\n                placeholder={ props.warning[1] === 'weight' ? props.warning[0] : null }\r\n                maxLength=\"4\">\r\n              </input>\r\n              <span className=\"window__main__input-line__unit\">g</span>\r\n            </div>\r\n\r\n\r\n          </section>\r\n\r\n          <section className=\"window__main__section window__main__section--form\">\r\n            \r\n            <h3 className=\"window__main__section__title\">Nutrition facts</h3>\r\n            \r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"proteins\">Proteins: </label>\r\n              <input \r\n                className=\"window__main__input-line__input\" \r\n                type=\"text\" \r\n                id=\"proteins\"\r\n                value={ props.data.proteins } \r\n                onChange={ props.handleOnChange }\r\n                placeholder={ props.warning[1] === 'proteins' ? props.warning[0] : null }\r\n                maxLength=\"4\">\r\n              </input>\r\n              <span className=\"window__main__input-line__unit\">g</span>\r\n            </div>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"fats\">Fats: </label>\r\n              <input\r\n                className=\"window__main__input-line__input\"  \r\n                type=\"text\" \r\n                id=\"fats\"\r\n                value={ props.data.fats } \r\n                onChange={ props.handleOnChange }\r\n                placeholder={ props.warning[1] === 'fats' ? props.warning[0] : null }\r\n                maxLength=\"4\">\r\n              </input>\r\n              <span className=\"window__main__input-line__unit\">g</span>\r\n            </div>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"carbs\">Carbs: </label>\r\n              <input\r\n                className=\"window__main__input-line__input\"  \r\n                type=\"text\" \r\n                id=\"carbs\"\r\n                value={ props.data.carbs } \r\n                onChange={ props.handleOnChange }\r\n                placeholder={ props.warning[1] === 'carbs' ? props.warning[0] : null }\r\n                maxLength=\"4\">\r\n              </input>\r\n              <span className=\"window__main__input-line__unit\">g</span>\r\n            </div>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label\" htmlFor=\"kcal\">Calories: </label>\r\n              <input\r\n                className=\"window__main__input-line__input\"  \r\n                type=\"text\" \r\n                id=\"kcal\"\r\n                value={ props.data.kcal }\r\n                onChange={ props.handleOnChange }\r\n                placeholder={ props.warning[1] === 'kcal' ? props.warning[0] : null }\r\n                maxLength=\"4\">\r\n              </input>\r\n              <span className=\"window__main__input-line__unit\">kcal</span>\r\n            </div>\r\n\r\n\r\n          </section>\r\n\r\n          <section className=\"window__main__section window__main__section--form\">\r\n\r\n            <h3 className=\"window__main__section__title\">Options</h3>\r\n\r\n            <div className=\"window__main__input-line\">\r\n              <label className=\"window__main__input-line__label window__main__input-line__label--checkbox\" htmlFor=\"list-saving\">Save to list</label>\r\n              <button \r\n                className=\"window__main__input-line__checkbox\"\r\n                id=\"list-saving\"\r\n                type=\"button\"\r\n                onClick={ handleCheckboxOnClick }>\r\n                <div \r\n                  className=\"window__main__input-line__checkbox__background\" \r\n                  id=\"list-saving\"\r\n                  style={ optionsStates['list-saving'] ? {backgroundColor: \"#7500AF\"} : {backgroundColor: \"transparent\"} }>\r\n                </div>\r\n              </button>\r\n            </div>\r\n\r\n          </section>\r\n\r\n          <button \r\n            className={ isFormCompleted\r\n                        ? \"window__header__add-button\"\r\n                        : \"window__header__add-button window__header__add-button--disabled\" }\r\n            type=\"submit\"\r\n            style={{ zIndex: 11 }}\r\n            disabled={ isFormCompleted ? false : true }><FaPlusCircle />\r\n          </button>\r\n\r\n          <section className=\"window__bottom\">\r\n\r\n            <button \r\n              className={ isStateEqualToProps ? \"window__bottom__tertiary-button window__bottom__tertiary-button--disabled\" : \"window__bottom__tertiary-button\" } \r\n              disabled={ isStateEqualToProps ? true : false }\r\n              type=\"button\" \r\n              onClick={ handleClearButton }>\r\n              Clear</button>\r\n\r\n            <div>\r\n              <button className=\"window__bottom__secondary-button\" type=\"button\" onClick={ handleCancelButton }>Cancel</button>\r\n              <button \r\n                className={ isFormCompleted\r\n                            ? \"window__bottom__primary-button\"\r\n                            : \"window__bottom__primary-button window__bottom__primary-button--disabled\" }\r\n                type=\"submit\"\r\n                disabled={ isFormCompleted ? false : true }>Add</button>\r\n            </div>\r\n\r\n          </section>\r\n\r\n        </form>\r\n    }\r\n    </>\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useReducer, useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { warnings } from '../meal/Meal';\r\nimport { FaChevronCircleLeft, FaSave } from 'react-icons/fa';\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function EditForm(props) {\r\n\r\n  // VARIABLES\r\n\r\n  const ACTIONS = {\r\n    UPDATE_PRODUCT_DATA: 'update-product-data',\r\n    RESET_FORM: 'reset-form',\r\n    SET_WARNING: 'set-warning',\r\n    CLEAR_WARNING: 'clear-warning'\r\n  }\r\n\r\n  const initialState = {\r\n    productData: {\r\n      id: props.data.id,\r\n      name: props.data.name,\r\n      weight: props.data.weight,\r\n      proteins: props.data.proteins,\r\n      fats: props.data.fats,\r\n      carbs: props.data.carbs,\r\n      kcal: props.data.kcal\r\n    },\r\n    warning: ['' ,'']\r\n  }\r\n\r\n\r\n  // HOOKS\r\n\r\n  const reducer = (state, action) => {\r\n    switch (action.type) {\r\n      case ACTIONS.UPDATE_PRODUCT_DATA: {\r\n        switch (action.payload.key) {\r\n          case 'name':     { return { ...state, productData: {...state.productData, name:     action.payload.value } }};\r\n          case 'weight':   { return { ...state, productData: {...state.productData, weight:   action.payload.value } }};\r\n          case 'proteins': { return { ...state, productData: {...state.productData, proteins: action.payload.value } }};\r\n          case 'fats':     { return { ...state, productData: {...state.productData, fats:     action.payload.value } }};\r\n          case 'carbs':    { return { ...state, productData: {...state.productData, carbs:    action.payload.value } }};\r\n          case 'kcal':     { return { ...state, productData: {...state.productData, kcal:     action.payload.value } }};\r\n          default:         { return console.error(`Unknown action type: ${action.type}`) };\r\n        }\r\n      }\r\n\r\n      case ACTIONS.RESET_FORM: {\r\n        return {...state, productData: \r\n          { id: props.data.id,\r\n            name: props.data.name,\r\n            weight: props.data.weight,\r\n            proteins: props.data.proteins,\r\n            fats: props.data.fats,\r\n            carbs: props.data.carbs,\r\n            kcal: props.data.kcal \r\n        }};\r\n      }\r\n\r\n      case ACTIONS.SET_WARNING: {\r\n        if (action.payload === 'name')\r\n          return { ...state, warning: [warnings.name, action.payload] }\r\n        else \r\n          return { ...state, warning: [warnings.weight, action.payload] }\r\n      }\r\n\r\n      case ACTIONS.CLEAR_WARNING: {\r\n        return { ...state, warning: ['', action.payload] }\r\n      }\r\n      \r\n      default: return console.error(`Unknown action type: ${action.type}`);\r\n    }\r\n  }\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  const [isFormCompleted, setIsFormCompleted] = useState(false);\r\n  const [isStateEqualToProps, setIsStateEqualToProps] = useState(true);\r\n\r\n  \r\n  // EFFECTS\r\n\r\n  // BLURING AND DISABLING WINDOW AFTER CONFIRM WINDOW MOUNTING\r\n  useEffect(() => {\r\n    const addingWindow = document.querySelector(\".window--add\");\r\n    addingWindow.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n    addingWindow.style.pointerEvents = \"none\";\r\n\r\n    return () => {\r\n      addingWindow.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      addingWindow.style.pointerEvents = \"auto\";\r\n    }\r\n\r\n  }, []);\r\n\r\n  // CHECKING IF FORM IS COMPLETED\r\n  useEffect(() => { \r\n    checkIfFormCompleted();\r\n    checkIfStateIsEqualToProps();\r\n    \r\n  }, [ state.productData ])\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const checkIfFormCompleted = () => {\r\n    const name = document.querySelector(\"#name\").value;\r\n    const weight = document.querySelector(\"#weight\").value;\r\n\r\n    if(name && weight)\r\n      setIsFormCompleted(true);\r\n    else\r\n      setIsFormCompleted(false);\r\n  }\r\n\r\n  const handleResetingForm = (e) => {\r\n    e.preventDefault();\r\n    dispatch({ type: ACTIONS.RESET_FORM });\r\n    dispatch({ type: ACTIONS.CLEAR_WARNING });\r\n    setIsStateEqualToProps(true);\r\n  }\r\n\r\n  const checkIfStateIsEqualToProps = () => {\r\n    Object.keys(props.data).forEach(key => {\r\n      if (props.data[key] !== state.productData[key])\r\n        setIsStateEqualToProps(false); \r\n      });\r\n  }\r\n\r\n  const handleCancelButton = () => {\r\n    const idOfSelectedProduct = props.data.id;\r\n\r\n    // IF USER CANCEL EDITING, PRODUCT HAS TO BE UNSELECTED\r\n    props.handleEditingWindow(idOfSelectedProduct);\r\n  }\r\n\r\n  const calculateNutritionFacts = (e) => {\r\n    const isNumber = /[0-9]/;\r\n    const isZero = /^[0]{1}/;\r\n\r\n    const nutritionPerOneGram = {\r\n      proteins: Number(props.data.proteins) / Number(props.data.weight),\r\n      fats: Number(props.data.fats) / Number(props.data.weight),\r\n      carbs: Number(props.data.carbs) / Number(props.data.weight),\r\n      kcal: Number(props.data.kcal) / Number(props.data.weight)\r\n    };\r\n\r\n    const setValueAsNull = () => {\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'weight', value: '' }});\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'proteins', value: 0 }});\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'fats', value: 0 }});\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'carbs', value: 0 }});\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'kcal', value: 0 }});\r\n      dispatch({ type: ACTIONS.SET_WARNING, payload: 'weight' });\r\n    }\r\n\r\n    const setValueAsCorrect = () => {\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'weight', value: Number(e.target.value) } });\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'proteins', value: Math.round( e.target.value * nutritionPerOneGram.proteins) } });\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'fats', value: Math.round( e.target.value * nutritionPerOneGram.fats) } });\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'carbs', value: Math.round( e.target.value * nutritionPerOneGram.carbs) } });\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'kcal', value: Math.round( e.target.value * nutritionPerOneGram.kcal) } });\r\n      dispatch({ type: ACTIONS.CLEAR_WARNING, payload: 'weight' });\r\n    }\r\n\r\n    if (isNumber.test(e.target.value[e.target.value.length - 1])) {\r\n      isZero.test(e.target.value)\r\n      ? setValueAsNull()\r\n      : setValueAsCorrect();\r\n    }\r\n\r\n    else {\r\n      setValueAsNull();\r\n    }\r\n  }\r\n\r\n  const handleNameChanging = (e) => {\r\n    const isWord = /[a-z\\s]/i;\r\n    e.preventDefault();\r\n    if (isWord.test(e.target.value[e.target.value.length - 1])) {\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'name', value: e.target.value }})\r\n      dispatch({ type: ACTIONS.CLEAR_WARNING, payload: 'name'});\r\n    }\r\n    else {\r\n      dispatch({ type: ACTIONS.UPDATE_PRODUCT_DATA, payload: { key: 'name', value: \"\" }});\r\n      dispatch({ type: ACTIONS.SET_WARNING, payload: 'name'});\r\n    }\r\n  }\r\n\r\n  const handleSavingChanges = (e) => {\r\n    e.preventDefault();\r\n    props.handleProductEditing(state.productData);\r\n  }\r\n\r\n\r\n  // RETURN\r\n\r\n  return ReactDOM.createPortal (\r\n    <form className=\"window window--edit\" onSubmit={ handleSavingChanges }>\r\n\r\n      <header className=\"window__header\">\r\n        <h3 className=\"window__header__heading\">Edit product</h3>\r\n        <button className=\"window__header__back-button\" onClick={ handleCancelButton }><FaChevronCircleLeft /></button>\r\n        <button \r\n          className={ \r\n            isFormCompleted\r\n            ? \"window__header__add-button\"\r\n            : \"window__header__add-button window__header__add-button--disabled\" } \r\n          disabled={ isFormCompleted ? false : true } \r\n          onClick={ handleSavingChanges }><FaSave /></button>\r\n      </header>\r\n\r\n      <main className=\"window__form\">\r\n\r\n        <section className=\"window__main__section window__main__section--form\">\r\n          \r\n          <h3 className=\"window__main__section__title\">Product info</h3>\r\n\r\n          <div className=\"window__main__input-line\">\r\n            <label className=\"window__main__input-line__label\" htmlFor=\"name\">Product name: </label>\r\n            <input\r\n                className=\"window__main__input-line__input\" \r\n                type=\"text\"\r\n                id=\"name\"\r\n                value={ state.productData.name } \r\n                onChange={ handleNameChanging }\r\n                placeholder={ state.warning[1] === 'name' ? state.warning[0] : null }\r\n                maxLength=\"32\">\r\n            </input>\r\n          </div>\r\n\r\n          <div className=\"window__main__input-line\">\r\n            <label className=\"window__main__input-line__label\" htmlFor=\"weight\">Product weight: </label>\r\n            <input\r\n                className=\"window__main__input-line__input\" \r\n                type=\"text\"\r\n                id=\"weight\"\r\n                value={ state.productData.weight } \r\n                onChange={ calculateNutritionFacts }\r\n                placeholder={ state.warning[1] === 'weight' ? state.warning[0] : null }\r\n                maxLength=\"32\">\r\n            </input>\r\n            <span className=\"window__main__input-line__unit\">g</span>\r\n          </div>\r\n        \r\n        </section>\r\n        \r\n        <section className=\"window__main__section window__main__section--form\">\r\n          \r\n          <h3 className=\"window__main__section__title\">Nutrition facts</h3>\r\n\r\n          <div className=\"window__main__input-line\">\r\n            <label className=\"window__main__input-line__label\" htmlFor=\"proteins\">Proteins: </label>\r\n            <p\r\n              className=\"window__main__input-line__input window__main__input-line__input--unchanging\" \r\n              id=\"proteins\">\r\n              { state.productData.proteins }\r\n            </p>\r\n            <span className=\"window__main__input-line__unit\">g</span>\r\n          </div>\r\n\r\n          <div className=\"window__main__input-line\">\r\n            <label className=\"window__main__input-line__label\" htmlFor=\"fats\">Fats: </label>\r\n            <p\r\n              className=\"window__main__input-line__input window__main__input-line__input--unchanging\" \r\n              id=\"fats\">\r\n              { state.productData.fats }\r\n            </p>\r\n            <span className=\"window__main__input-line__unit\">g</span>\r\n          </div>\r\n\r\n          <div className=\"window__main__input-line\">\r\n            <label className=\"window__main__input-line__label\" htmlFor=\"carbs\">Carbs: </label>\r\n            <p\r\n              className=\"window__main__input-line__input window__main__input-line__input--unchanging\" \r\n              id=\"carbs\">\r\n              { state.productData.carbs }\r\n            </p>\r\n            <span className=\"window__main__input-line__unit\">g</span>\r\n          </div>\r\n\r\n          <div className=\"window__main__input-line\">\r\n            <label className=\"window__main__input-line__label\" htmlFor=\"kcal\">Calories: </label>\r\n            <p\r\n              className=\"window__main__input-line__input window__main__input-line__input--unchanging\" \r\n              id=\"kcal\">\r\n              { state.productData.kcal }\r\n            </p>\r\n            <span className=\"window__main__input-line__unit\">kcal</span>\r\n          </div>\r\n        \r\n        </section>\r\n        \r\n      </main>\r\n\r\n      <section className=\"window__bottom\">\r\n        <button \r\n          className={ isStateEqualToProps ? \"window__bottom__tertiary-button window__bottom__tertiary-button--disabled\" : \"window__bottom__tertiary-button\" } \r\n          disabled={ isStateEqualToProps ? true : false } \r\n          type=\"button\" \r\n          onClick={ handleResetingForm }>\r\n          Reset</button>\r\n        \r\n        <div>\r\n          <button className=\"window__bottom__secondary-button\" type=\"button\" onClick={ handleCancelButton }>Cancel</button>\r\n          <button \r\n            className={ isFormCompleted\r\n                        ? \"window__bottom__primary-button\"\r\n                        : \"window__bottom__primary-button window__bottom__primary-button--disabled\"\r\n                        } \r\n            type=\"submit\"\r\n            disabled={ isFormCompleted ? false : true }>\r\n            Save</button>\r\n        </div>\r\n\r\n      </section>\r\n\r\n    </form>,\r\n    document.getElementById(\"portal\")\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useReducer, useEffect } from 'react';\r\nimport EditForm from './EditForm';\r\nimport { FaPlusCircle } from 'react-icons/fa';\r\n\r\nimport { db } from '../../index'; \r\nimport { getDoc, setDoc, doc } from \"firebase/firestore\";\r\n\r\n\r\n// VARIABLES\r\n\r\nconst ACTIONS = {\r\n  SET_PRODUCT_SEND_FOR_EDIT: \"set-product-send-for-edit\",\r\n  NEGATE_EDIT_WINDOW_STATE: \"negate-edit-window-state\",\r\n  UPDATE_SAVED_PRODUCTS_LIST: \"update-saved-products-list\",\r\n  LOAD_PREDEFINED_PRODUCTS_LIST_FROM_LOCAL_STORAGE: 'load-predefined-products-list-from-local-storage',\r\n  SET_IS_ADD_BUTTON_DISABLED: 'set-is-add-button-disabled'\r\n}\r\n\r\nconst initialState = {\r\n  savedProductList: [\r\n    { id: 0, name: \"Cottage cheese\", weight: 100, proteins: 20, fats: 10, carbs: 15, kcal: 250 },\r\n    { id: 1, name: \"Skyr\", weight: 100, proteins: 20, fats: 0, carbs: 12, kcal: 100 },\r\n    { id: 2, name: \"Potatos\", weight: 100, proteins: 9, fats: 2, carbs: 80, kcal: 126 },\r\n    { id: 3, name: \"Coca Cola\", weight: 100, proteins: 0, fats: 0, carbs: 100, kcal: 400 },\r\n    { id: 4, name: \"Banana\", weight: 100, proteins: 5, fats: 3, carbs: 52, kcal: 173 }],\r\n  \r\n  productSendForEdit: { id: 0, name: '', weight: 0, proteins: 0, fats: 0, carbs: 0, kcal: 0 },\r\n  isEditWindowOpened: false,\r\n  isAddButtonDisabled: false\r\n}\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function AddingList(props) {\r\n\r\n  // HOOKS\r\n\r\n  const reducer = (state, action) => {\r\n    switch (action.type) {\r\n\r\n      case ACTIONS.LOAD_PREDEFINED_PRODUCTS_LIST_FROM_LOCAL_STORAGE: {\r\n        return {...state, savedProductList: action.payload}\r\n      }\r\n\r\n      case ACTIONS.NEGATE_EDIT_WINDOW_STATE: {\r\n        return { ...state, isEditWindowOpened: !state.isEditWindowOpened };\r\n      }\r\n\r\n      case ACTIONS.SET_PRODUCT_SEND_FOR_EDIT: {\r\n        return {...state, productSendForEdit: {\r\n                          id: action.payload.id,\r\n                          name: action.payload.name,\r\n                          weight: action.payload.weight,\r\n                          proteins: action.payload.proteins,\r\n                          fats: action.payload.fats,\r\n                          carbs: action.payload.carbs,\r\n                          kcal: action.payload.kcal }\r\n        };\r\n      }\r\n\r\n      case ACTIONS.UPDATE_SAVED_PRODUCTS_LIST: {\r\n        const newSavedProductList = state.savedProductList;\r\n        newSavedProductList[action.payload.index] = action.payload.newProduct;\r\n        return {...state, savedProductList: newSavedProductList};\r\n      }\r\n\r\n      case ACTIONS.SET_IS_ADD_BUTTON_DISABLED: {\r\n        return {...state, isAddButtonDisabled: action.payload};\r\n      }\r\n\r\n      default: return console.error(`Unknown action type: ${action.type}`);\r\n    }\r\n  }\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n\r\n  // EFFECTS\r\n\r\n  const updatePredefinedProductsInDatabase = async (newList) => {\r\n    try {\r\n      await setDoc(doc(db, \"predefinedProducts\", \"predefinedProductsList\"), {\r\n        list: newList\r\n      },\r\n      { merge: true });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const getPredefinedProductsFromDatabase = async () => {\r\n    let predefinedProductsList = [];\r\n    try {\r\n      const querySnapshot = await getDoc(doc(db, \"predefinedProducts\", \"predefinedProductsList\"));\r\n      predefinedProductsList = querySnapshot.data().list;\r\n      if (!predefinedProductsList)\r\n        updatePredefinedProductsInDatabase(state.savedProductList)\r\n    }    \r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n    dispatch({ type: ACTIONS.LOAD_PREDEFINED_PRODUCTS_LIST_FROM_LOCAL_STORAGE, payload: predefinedProductsList });\r\n  }\r\n\r\n  // LOADS PREDEFINED PRODUCTS LIST FROM LOCALSTORAGE OR CREATES IF DOESN'T EXIST\r\n  useEffect(() => { \r\n    getPredefinedProductsFromDatabase();\r\n  }, []);\r\n\r\n  // DISABLES ADD BUTTON AFTER MOUNTING\r\n  useEffect(() => { \r\n    handleAddButtonDisabling() \r\n  }, [])\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const handleSelected = (e) => {\r\n    const product = document.getElementById(e.currentTarget.id);\r\n    if (e.currentTarget.id) {\r\n      const productName = product.querySelector(\".window__main__section__large-list__item__name\");\r\n\r\n      // \"UNSELECTING\"\r\n      if (productName.style.fontWeight === \"bold\") {\r\n        product.style.background = \"#ffffff\";\r\n        productName.style.fontWeight = \"normal\";\r\n        handleAddButtonDisabling();\r\n      }\r\n\r\n      // \"SELECTING\"\r\n      else {\r\n        product.style.background = \"#7500AF30\";\r\n        productName.style.fontWeight = \"bold\";\r\n        updateProductSendForEdit(state.savedProductList[getIndexOfProduct(e.currentTarget.id)]);\r\n        handleEditingWindow();\r\n      }\r\n    }\r\n  }\r\n\r\n  const updateProductSendForEdit = (selectedProduct) => {\r\n    dispatch({ type: ACTIONS.SET_PRODUCT_SEND_FOR_EDIT, payload: selectedProduct });\r\n  }\r\n\r\n  const handleProductEditing = (editedProduct) => {\r\n    const indexOfEditedProduct = getIndexOfProduct(editedProduct.id);\r\n    dispatch({ type: ACTIONS.UPDATE_SAVED_PRODUCTS_LIST, payload: { index: indexOfEditedProduct, newProduct: editedProduct }})\r\n    \r\n    // SAVING CHANGES TO LOCAL STORAGE\r\n    updatePredefinedProductsInDatabase(state.savedProductList);\r\n    handleEditingWindow();\r\n  }\r\n\r\n  const handleEditingWindow = (idOfSelectedProduct = false) => {\r\n    \r\n    // UNSELECTING PRODUCT AFTER EDIT CANCELED\r\n    if (Number.isInteger(idOfSelectedProduct)) {\r\n      const product = document.getElementById(idOfSelectedProduct);\r\n      const productName = product.querySelector(\".window__main__section__large-list__item__name\");\r\n      product.style.background = \"#ffffff\";\r\n      productName.style.fontWeight = \"normal\";\r\n    }\r\n    \r\n    dispatch({ type: ACTIONS.NEGATE_EDIT_WINDOW_STATE });\r\n    handleAddButtonDisabling();\r\n  }\r\n\r\n  const handleAddButtonDisabling = () => {\r\n    const products = document.querySelectorAll(\".window__main__section__large-list__item\");\r\n    let returnedBoolean = false;\r\n   \r\n    for (let i = 0; i < products.length; i++) {\r\n      const name = products[i].querySelector(\".window__main__section__large-list__item__name\");\r\n      if (name.style.fontWeight === \"bold\") {\r\n        returnedBoolean = false;\r\n        break;\r\n      }\r\n\r\n      else\r\n        returnedBoolean = true;\r\n    }\r\n\r\n    dispatch({type: ACTIONS.SET_IS_ADD_BUTTON_DISABLED, payload: returnedBoolean});\r\n  }\r\n\r\n  const handleProductsAdding = () => {\r\n    const selectedProducts = [];\r\n    const products = document.querySelectorAll(\".window__main__section__large-list__item\");\r\n\r\n    products.forEach((product, index) => {\r\n      const name = product.querySelector(\".window__main__section__large-list__item__name\");\r\n      if (name.style.fontWeight === \"bold\")\r\n        selectedProducts.push(\r\n          { \r\n            name:     state.savedProductList[index - 1].name,\r\n            weight:   state.savedProductList[index - 1].weight, \r\n            proteins: state.savedProductList[index - 1].proteins, \r\n            fats:     state.savedProductList[index - 1].fats, \r\n            carbs:    state.savedProductList[index - 1].carbs, \r\n            kcal:     state.savedProductList[index - 1].kcal \r\n          }\r\n        );\r\n    });\r\n\r\n    if (selectedProducts.length !== 0)\r\n      props.handlePredefinedProductsAdding(selectedProducts);\r\n  }\r\n\r\n  const getIndexOfProduct = (targetId) => {\r\n    const productList = state.savedProductList;\r\n    let returnedIndex = 0;\r\n\r\n    productList.forEach((product, index) => {\r\n      if (product.id === Number(targetId))\r\n        returnedIndex = index;\r\n    });\r\n    return returnedIndex;\r\n  }\r\n\r\n  \r\n  // RETURN\r\n\r\n  return (\r\n    <>\r\n      <button \r\n        className={ !state.isAddButtonDisabled\r\n                    ? \"window__header__add-button\"\r\n                    : \"window__header__add-button window__header__add-button--disabled\" }\r\n        type=\"button\"\r\n        style={{ zIndex: 11 }}\r\n        onClick={ handleProductsAdding }\r\n        disabled={ state.isAddButtonDisabled ? true : false }><FaPlusCircle />\r\n      </button>\r\n\r\n       { state.isEditWindowOpened \r\n        ? <EditForm \r\n          data={{\r\n            id: state.productSendForEdit.id,\r\n            name: state.productSendForEdit.name,\r\n            weight: state.productSendForEdit.weight,\r\n            proteins: state.productSendForEdit.proteins,\r\n            fats: state.productSendForEdit.fats,\r\n            carbs: state.productSendForEdit.carbs,\r\n            kcal: state.productSendForEdit.kcal\r\n          }}\r\n          warning={ props.warning }\r\n          handleProductEditing={ handleProductEditing }\r\n          handleEditingWindow={ handleEditingWindow }\r\n          />\r\n\r\n        :  null }\r\n        \r\n      <ul className=\"window__main__section__large-list window__main__section__large-list--heading\">\r\n        <li className=\"window__main__section__large-list__item window__main__section__large-list__item--heading\">\r\n          <div className=\"window__main__section__large-list__wrapper\">\r\n            <span className=\"window__main__section__large-list__item__name\" style={{ color: \"white\" }}>Product name</span>\r\n            <span className=\"window__main__section__large-list__item__nutrition-facts\">\r\n              <p className=\"window__main__section__large-list__item__nutrition-facts__proteins\" title=\"Proteins\">P</p>\r\n              <p className=\"window__main__section__large-list__item__nutrition-facts__fats\" title=\"Fats\">F</p>\r\n              <p className=\"window__main__section__large-list__item__nutrition-facts__carbs\" title=\"Carbohydrates\">C</p>\r\n            </span>\r\n            <span className=\"window__main__section__large-list__item__calories\">Calories</span>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n\r\n      <ul className=\"window__main__section__large-list\">\r\n\r\n        { state.savedProductList.map(product => {\r\n          return (\r\n            <li id={ product.id } key={ product.id } className=\"window__main__section__large-list__item\" onClick={ handleSelected }>\r\n              <div className=\"window__main__section__large-list__wrapper\">\r\n                <span id={ product.id } className=\"window__main__section__large-list__item__name\">{ product.name }</span>\r\n                <span id={ product.id } className=\"window__main__section__large-list__item__nutrition-facts\">\r\n                  <p id={ product.id } className=\"window__main__section__large-list__item__nutrition-facts__proteins\" title=\"Proteins\">{ product.proteins } g</p>\r\n                  <p id={ product.id } className=\"window__main__section__large-list__item__nutrition-facts__fats\" title=\"Fats\">{ product.fats } g</p>\r\n                  <p id={ product.id } className=\"window__main__section__large-list__item__nutrition-facts__carbs\" title=\"Carbohydrates\">{ product.carbs } g</p>\r\n                </span>\r\n                <span id={ product.id } className=\"window__main__section__large-list__item__calories\">{ product.kcal } kcal</span>\r\n              \r\n              </div>\r\n              <span id={ product.id } className=\"window__main__section__large-list__item__weight\">{ product.weight } g</span>\r\n            </li>\r\n          )\r\n        })\r\n        }\r\n\r\n      </ul>\r\n      \r\n      <section className=\"window__bottom\">\r\n        <div></div>\r\n        <div>\r\n          <button \r\n            className=\"window__bottom__secondary-button\" \r\n            onClick={ props.handleAddWindow }>\r\n            Cancel\r\n          </button>\r\n          \r\n          <button \r\n            className={ state.isAddButtonDisabled\r\n                        ? \"window__bottom__primary-button window__bottom__primary-button--disabled\" \r\n                        : \"window__bottom__primary-button\" } \r\n            onClick={ handleProductsAdding }>\r\n            Add\r\n          </button>\r\n        </div>\r\n      </section>\r\n    </> \r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { FaChevronCircleLeft } from 'react-icons/fa';\r\nimport AddingForm from './AddingForm';\r\nimport AddingList from './AddingList';\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function AddWindow(props) {\r\n\r\n  // HOOKS\r\n\r\n  const [isAddingTypeSetAtLeftOption, setAddingType] = useState(true);\r\n\r\n  // EFFECTS\r\n\r\n  // BLURING AND DISABLING POINTER EVENTS ON BACKGROUND\r\n  useEffect(() => {\r\n    const wrapper = document.querySelector(\".wrapper\");\r\n    const rootElement = document.querySelector(\"#root\");\r\n    const hamburger = document.querySelector(\".left-section__hamburger\");\r\n    const accountIcon = document.querySelector(\".left-section__account\");\r\n    wrapper.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n    wrapper.style.pointerEvents = \"none\";\r\n    rootElement.style.zIndex = 97;\r\n    hamburger.style.display = \"none\";\r\n    accountIcon.style.display = \"none\";\r\n    \r\n    return (() => {\r\n      wrapper.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      wrapper.style.pointerEvents = \"auto\";\r\n      rootElement.style.zIndex = 99;\r\n      if (window.innerWidth < 769)\r\n        hamburger.style.display = \"flex\";\r\n        accountIcon.style.display = \"flex\";\r\n    })\r\n\r\n  }, []);\r\n\r\n  // CLEARING FORM AFTER CHANGE OF SWITCH OPTION\r\n  useEffect(() => {\r\n    props.handleFormClearing();\r\n  },[ isAddingTypeSetAtLeftOption ]);\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const changeAddingType = () => {\r\n    setAddingType(!isAddingTypeSetAtLeftOption);\r\n  }\r\n  \r\n\r\n  // RETURN\r\n\r\n  return ReactDOM.createPortal (\r\n    <>\r\n    <div className=\"window__closer\" onClick={ props.handleAddWindow }></div> \r\n    <div className=\"window window--add\">\r\n      \r\n      <header className=\"window__header\">\r\n        \r\n        <h2 className=\"window__header__heading\" >{ props.type === 'exercises' ? \"Add serie\" : \"Add product\" }</h2>\r\n    \r\n        <button className=\"window__header__back-button\" onClick={ props.handleAddWindow }><FaChevronCircleLeft /></button>        \r\n        <button className=\"window__header__switch\" onClick={ changeAddingType }>\r\n          <h3 \r\n            className={ isAddingTypeSetAtLeftOption \r\n                        ? \"window__header__switch__left window__header__switch__left--selected\"\r\n                        : \"window__header__switch__left\" }>\r\n            { props.type === 'exercises' ? \"Last training\" : \"From list\" }\r\n          </h3>\r\n          <h3 \r\n            className={ isAddingTypeSetAtLeftOption \r\n                        ? \"window__header__switch__right\"\r\n                        : \"window__header__switch__right window__header__switch__right--selected\" }>\r\n            { props.type === 'exercises' ? \"Last serie\" : \"Your own\" }\r\n          </h3>\r\n        </button>\r\n\r\n      </header>\r\n\r\n      { props.type === 'exercises'\r\n\r\n        ? <main className=\"window__form\">\r\n          { isAddingTypeSetAtLeftOption\r\n\r\n            ? <AddingForm \r\n                type=\"last-training\"\r\n                data={{ \r\n                  weight: props.data.weight,\r\n                  reps: props.data.reps\r\n                }}\r\n                warning={ props.warning }\r\n                handleOnChange={ props.handleOnChange }\r\n                handleSerieAdding={ props.handleSerieAdding }\r\n                handleFormClearing={ props.handleFormClearing }\r\n                handleAddWindow={ props.handleAddWindow }\r\n                lastTimeData={ props.lastTimeData }\r\n              />\r\n\r\n            : <AddingForm \r\n                type=\"last-serie\"\r\n                data={{ \r\n                  weight: props.data.weight,\r\n                  reps: props.data.reps\r\n                }}\r\n                warning={ props.warning }\r\n                handleOnChange={ props.handleOnChange }\r\n                handleSerieAdding={ props.handleSerieAdding }\r\n                handleFormClearing={ props.handleFormClearing }\r\n                handleAddWindow={ props.handleAddWindow }\r\n                lastTimeData={ props.lastTimeData }\r\n              />\r\n          }\r\n        </main>\r\n\r\n        : <main className=\"window__form\">\r\n          { isAddingTypeSetAtLeftOption\r\n\r\n            ? <AddingList \r\n                warning={ props.warning }\r\n                handleAddWindow={ props.handleAddWindow }\r\n                handlePredefinedProductsAdding={ props.handlePredefinedProductsAdding }\r\n              />\r\n              \r\n            : <AddingForm\r\n                type=\"nutrition\"\r\n                data={{ \r\n                  isPlaceholderEnabled: props.data.isPlaceholderEnabled,\r\n                  name: props.data.name, \r\n                  weight: props.data.weight,\r\n                  proteins: props.data.proteins,\r\n                  fats: props.data.fats,\r\n                  carbs: props.data.carbs,\r\n                  kcal: props.data.kcal }}\r\n                warning={ props.warning }\r\n                handleOnChange={ props.handleOnChange }\r\n                handleFormClearing={ props.handleFormClearing }\r\n                handleProductAdding={ props.handleProductAdding }\r\n                handleAddWindow={ props.handleAddWindow }\r\n              />\r\n          }\r\n        </main>\r\n      \r\n      }\r\n\r\n    </div>\r\n    </>,\r\n    document.getElementById('portal')\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport '../styles/window/window.css';\r\nimport { FaChevronCircleLeft, FaTrashAlt } from 'react-icons/fa';\r\n\r\n\r\n// COMPONENTS\r\n\r\nexport default function RemoveWindow(props) {\r\n\r\n  // HOOKS\r\n\r\n  const [isRemovingAllButtonPressed, setRemovingAllButtonPressed] = useState(false);\r\n  const [isRemoveButtonDisabled, setIsRemoveButtonDisabled] = useState(false);\r\n\r\n\r\n  // EFFECTS\r\n\r\n  // BLURING AND DISABLING POINTER EVENTS ON WINDOW AFTER CONFIRM WINDOW MOUNTING\r\n  useEffect(() => {\r\n    const removingWindow = document.querySelector(\".window\");\r\n\r\n    if (isRemovingAllButtonPressed) {\r\n      removingWindow.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n      removingWindow.style.pointerEvents = \"none\";\r\n    }\r\n    else {\r\n      removingWindow.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      removingWindow.style.pointerEvents = \"auto\";\r\n    }\r\n\r\n  }, [ isRemovingAllButtonPressed ]);\r\n\r\n  // BLURING AND DISABLING POINTER EVENTS ON BACKGROUND AFTER MOUNTING\r\n  useEffect(() => {\r\n    const wrapper = document.querySelector(\".wrapper\");\r\n    const rootElement = document.querySelector(\"#root\");\r\n    const hamburger = document.querySelector(\".left-section__hamburger\");\r\n    const accountIcon = document.querySelector(\".left-section__account\");\r\n    wrapper.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n    wrapper.style.pointerEvents = \"none\";\r\n    rootElement.style.zIndex = 97;\r\n    hamburger.style.display = \"none\";\r\n    accountIcon.style.display = \"none\";\r\n    \r\n    return (() => {\r\n      wrapper.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      wrapper.style.pointerEvents = \"auto\";\r\n      rootElement.style.zIndex = 99;\r\n      \r\n      if (window.innerWidth < 769)\r\n        hamburger.style.display = \"flex\";\r\n        accountIcon.style.display = \"flex\";\r\n    })\r\n\r\n  }, []);\r\n\r\n  // DISABLING REMOVE BUTTON AFTER MOUNTING\r\n  useEffect(() => { \r\n    handleRemoveButtonDisabling() \r\n  }, []);\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const handleSelected = (e) => {\r\n    const item = document.getElementById(e.currentTarget.id);\r\n    \r\n    if(e.currentTarget.id) {\r\n      const itemName = item.querySelector(\".window__main__section__large-list__item__name\");\r\n\r\n      // \"UNSELECTING\"\r\n      if (itemName.style.fontWeight === \"bold\") {\r\n        item.style.background = \"#ffffff\";\r\n        itemName.style.fontWeight = \"normal\";\r\n      }\r\n\r\n      // \"SELECTING\"\r\n      else {\r\n        item.style.background = \"#7500AF30\";\r\n        itemName.style.fontWeight = \"bold\";\r\n      }\r\n\r\n      handleRemoveButtonDisabling();\r\n    }\r\n  }\r\n\r\n  const handleRemoveButton = () => {\r\n    const selectedIds = [];\r\n    const items = document.querySelectorAll(\".window__main__section__large-list__item\");\r\n\r\n    items.forEach(item => {\r\n      const name = item.querySelector(\".window__main__section__large-list__item__name\")\r\n      if(name.style.fontWeight === \"bold\")\r\n        selectedIds.push(Number(item.id));\r\n    });\r\n\r\n    if (selectedIds.length !== 0)\r\n      props.handleRemoving(selectedIds);\r\n  }\r\n\r\n  const handleRemoveButtonDisabling = () => {\r\n    const items = document.querySelectorAll(\".window__main__section__large-list__item\");\r\n    let returnedBoolean = false;\r\n   \r\n    for (let i = 0; i < items.length; i++) {\r\n      const name = items[i].querySelector(\".window__main__section__large-list__item__name\");\r\n      if (name.style.fontWeight === \"bold\") {\r\n        returnedBoolean = false;\r\n        break;\r\n      }\r\n      \r\n      else\r\n        returnedBoolean = true;\r\n    }\r\n    setIsRemoveButtonDisabled(returnedBoolean);\r\n  }\r\n\r\n  const handleRemovingAllButton = () => {\r\n    setRemovingAllButtonPressed(true);\r\n  }\r\n\r\n  const handleRemovingAllCancel = () => {\r\n    setRemovingAllButtonPressed(false);\r\n  }\r\n\r\n  const handleRemovingAllConfirm = () => {\r\n    const selectedIds = [];\r\n    const items = document.querySelectorAll(\".window__main__section__large-list__item\");\r\n\r\n    items.forEach(item => {\r\n      selectedIds.push(Number(item.id))\r\n    });\r\n\r\n    props.handleRemoving(selectedIds);\r\n  }\r\n  \r\n\r\n  // RETURN\r\n\r\n  return ReactDOM.createPortal (\r\n    <>\r\n    <div className=\"window__closer\" onClick={ props.handleRemoveWindow }></div> \r\n    <section className=\"window\">\r\n\r\n      <header className=\"window__header\">\r\n        <h1 className=\"window__header__heading\">{ props.type === 'exercises' ? \"Remove serie\" : \"Remove product\" }</h1>\r\n        <button className=\"window__header__back-button\" onClick={ props.handleRemoveWindow }><FaChevronCircleLeft /></button>\r\n        <button \r\n          className={ \r\n            isRemoveButtonDisabled\r\n            ? \"window__header__add-button window__header__add-button--disabled\" \r\n            : \"window__header__add-button\" }\r\n          onClick={ handleRemoveButton }><FaTrashAlt /></button>\r\n\r\n      </header>\r\n\r\n      <main className=\"window__main window__main--list\">\r\n\r\n        <ul className=\"window__main__section__large-list window__main__section__large-list--heading\">\r\n          <li className=\"window__main__section__large-list__item window__main__section__large-list__item--heading\">\r\n              { props.type === 'exercises'\r\n                ? <div className=\"window__main__section__large-list__wrapper\">\r\n                    <span className=\"window__main__section__large-list__item__name\" style={{color: \"white\"}}>Serie</span>\r\n                    <span className=\"window__main__section__large-list__item__nutrition-facts\">\r\n                      <p className=\"window__main__section__large-list__item__nutrition-facts__weight\">Weight</p>\r\n                    </span>\r\n                    <span className=\"window__main__section__large-list__item__calories\">Repetitions</span>\r\n                  </div>\r\n\r\n                : <div className=\"window__main__section__large-list__wrapper\">\r\n                    <span className=\"window__main__section__large-list__item__name\" style={{color: \"white\"}}>Product name</span>\r\n                    <span className=\"window__main__section__large-list__item__nutrition-facts\">\r\n                      <p className=\"window__main__section__large-list__item__nutrition-facts__proteins\" title=\"Proteins\">P</p>\r\n                      <p className=\"window__main__section__large-list__item__nutrition-facts__fats\" title=\"Fats\">F</p>\r\n                      <p className=\"window__main__section__large-list__item__nutrition-facts__carbs\" title=\"Carbohydrates\">C</p>\r\n                    </span>\r\n                    <span className=\"window__main__section__large-list__item__calories\">Calories</span>\r\n                  </div> \r\n              }\r\n          </li>\r\n        </ul>\r\n\r\n        <ul className=\"window__main__section__large-list\">\r\n\r\n          { props.list.map(item => {\r\n            return (\r\n              props.type === 'exercises'\r\n\r\n              ? <li onClick={ handleSelected } id={ item.id } key={ item.id } className=\"window__main__section__large-list__item\">\r\n                  <div className=\"window__main__section__large-list__wrapper\">\r\n                    <span id={ item.id } className=\"window__main__section__large-list__item__name\">Serie { item.serieCount }</span>\r\n                    <span id={ item.id } className=\"window__main__section__large-list__item__nutrition-facts\">\r\n                      <p id={ item.id } className=\"window__main__section__large-list__item__nutrition-facts__weight\" title=\"Weight\">{ item.weight } kg</p>\r\n                    </span>\r\n                    <span id={ item.id } className=\"window__main__section__large-list__item__calories\">{ item.reps } reps</span>\r\n                  </div>\r\n                </li>\r\n\r\n              : <li onClick={ handleSelected } id={ item.id } key={ item.id } className=\"window__main__section__large-list__item\">\r\n                  <div className=\"window__main__section__large-list__wrapper\">\r\n                    <span id={ item.id } className=\"window__main__section__large-list__item__name\">{ item.name }</span>\r\n                    <span id={ item.id } className=\"window__main__section__large-list__item__nutrition-facts\">\r\n                      <p id={ item.id } className=\"window__main__section__large-list__item__nutrition-facts__proteins\" title=\"Proteins\">{ item.proteins } g</p>\r\n                      <p id={ item.id } className=\"window__main__section__large-list__item__nutrition-facts__fats\" title=\"Fats\">{ item.fats } g</p>\r\n                      <p id={ item.id } className=\"window__main__section__large-list__item__nutrition-facts__carbs\" title=\"Carbohydrates\">{ item.carbs } g</p>\r\n                    </span>\r\n                    <span id={ item.id } className=\"window__main__section__large-list__item__calories\">{ item.kcal } kcal</span>\r\n                  </div>\r\n                  <span id={ item.id } className=\"window__main__section__large-list__item__weight\">{ item.weight } g</span>\r\n                </li>\r\n            )})\r\n          }\r\n\r\n        </ul>\r\n\r\n      </main>\r\n\r\n      <section className=\"window__bottom\">\r\n          <button className=\"window__bottom__tertiary-button\" onClick={ handleRemovingAllButton }>Remove all</button>\r\n          <div>\r\n            <button className=\"window__bottom__secondary-button\" onClick={ props.handleRemoveWindow }>Cancel</button>\r\n            <button \r\n            className={ isRemoveButtonDisabled\r\n                        ? \"window__bottom__primary-button window__bottom__primary-button--disabled\" \r\n                        : \"window__bottom__primary-button\" }\r\n              onClick={ handleRemoveButton }>Remove</button>\r\n          </div>\r\n        </section>\r\n\r\n    </section>\r\n\r\n    { isRemovingAllButtonPressed \r\n        ? <section className=\"window window--login\">\r\n\r\n            <header className=\"window__header\">\r\n              <h2 className=\"window__header__heading\">Remove all?</h2> \r\n            </header>\r\n\r\n            <main className=\"window__main\">\r\n              <h3 className=\"window__main__message\">{props.type === 'exercises' ? \"Are you sure you want to remove all series in current exercise?\" : \"Are you sure you want to remove all products in current meal?\"}</h3>\r\n            </main>\r\n\r\n            <section className=\"window__bottom\">\r\n              <button className=\"window__bottom__secondary-button\" onClick={ handleRemovingAllCancel }>Cancel</button>\r\n              <button className=\"window__bottom__primary-button\" onClick={ handleRemovingAllConfirm }>Remove</button>\r\n            </section>\r\n          </section>\r\n        : null }\r\n    </>,\r\n    document.getElementById(\"portal\")\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useEffect } from 'react';\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function Product(props) {\r\n\r\n  // EFFECTS\r\n\r\n  // ADDS INGREDIENTS VALUES TO SUMMARY OR SUBSTRACTS AFTER DELETING PRODUCT\r\n  useEffect(() => { \r\n    let ingredients = { proteins: props.proteins, fats: props.fats, carbs: props.carbs, kcal: props.kcal };\r\n    props.addIngredientsFunction(ingredients);\r\n\r\n    return () => {\r\n      props.subIngredientsFunction(ingredients);\r\n    }\r\n\r\n  }, []);\r\n\r\n\r\n  // RETURN\r\n\r\n  return (\r\n    <div className=\"meal__products-section__product\">\r\n      <div className=\"meal__products-section__product__info\">\r\n        <h2 className=\"meal__products-section__product__title\">{props.name}</h2>          \r\n        <p className=\"meal__products-section__product__weight\">{props.weight} g</p>           \r\n      </div>\r\n        \r\n      <ul className=\"meal__products-section__product__stats-list\">             \r\n        <li className=\"meal__products-section__product__stats-list__item\">{props.proteins} g</li>\r\n        <li className=\"meal__products-section__product__stats-list__item\">{props.fats} g</li>\r\n        <li className=\"meal__products-section__product__stats-list__item\">{props.carbs} g</li>\r\n        <li className=\"meal__products-section__product__stats-list__item meal__products-section__product__stats-list__item--kcal\">{props.kcal} kcal</li>\r\n      </ul>\r\n    </div>\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useState, useEffect, useReducer } from 'react';\r\nimport AddWindow from '../product_adding_window/ProductAddingWindow';\r\nimport RemoveWindow from '../product_removing_window/ProductRemovingWindow';\r\nimport Product from './Product';\r\nimport './styles/meal.css';\r\n\r\nimport { db } from '../../index'; \r\nimport { collection, getDocs, setDoc, doc } from \"firebase/firestore\";\r\n\r\n\r\n\r\n\r\n// VARIABLES\r\n\r\nexport const warnings = {\r\n  name:   \"Name must be a string of letters only\",\r\n  weight: \"Weight must be a positive number\",\r\n  macros: \"Macronutrient must be a number\"\r\n}\r\n\r\nconst ACTIONS = {\r\n  NEGATE_MEAL_STATE: 'negate-meal-state',\r\n  NEGATE_ADDING_WINDOW_STATE: 'negate-adding-window-state',\r\n  NEGATE_REMOVING_WINDOW_STATE: 'negate-removing-window-state',\r\n  ADD_PRODUCT: 'add-product',\r\n  ENABLE_PLACEHOLDER: 'enable-placeholder',\r\n  DISABLE_PLACEHOLDER: 'disable-placeholder',\r\n  SET_WARNING: 'set-warning',\r\n  CLEAR_WARNING: 'clear-warning',\r\n  REMOVE_PRODUCT: 'remove-product',\r\n  ADD_TO_SUMMARY: 'add-to-summary',\r\n  SUB_FROM_SUMMARY: 'sub-from-summary',\r\n  CLEAR_PRODUCTLIST_BEFORE_DAY_CHANGING: 'clear-productlist-before-day-changing',\r\n  ADD_PRODUCT_TO_PRODUCTLIST: 'add-product-to-productlist'\r\n}\r\n\r\n// COMPONENT\r\n\r\nexport default function Meal(props) {\r\n\r\n  // VARIABLES\r\n\r\n  const saveProductInDatabase = async (productList) => {\r\n    let newProductList = [];\r\n    let oldProductList = [];\r\n\r\n    // CHECKING IF PRODUCTLIST EXIST\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.id === props.userId) {\r\n          if (user.data().productList)\r\n            oldProductList = user.data().productList;\r\n        }\r\n      });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    newProductList = oldProductList.concat(productList);\r\n    \r\n    // OVERWRITING OLD PRODUCTLIST USING NEW LIST\r\n    try {\r\n      await setDoc(doc(db, \"users\", String(props.userId)), {\r\n        productList: newProductList\r\n      },\r\n      { merge: true });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const removeProductsFromDatabase = async (selectedProducts) => {\r\n    let oldProductList = [];\r\n    let newProductList = [];\r\n\r\n    // GETTING ALL PRODUCTS SAVED IN DATABASE\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.id === props.userId) {\r\n          if (user.data().productList)\r\n            oldProductList = user.data().productList;\r\n        }\r\n      });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    newProductList = oldProductList;\r\n\r\n    // DELETING SELECTED PRODUCTS\r\n    selectedProducts.forEach(selectedId => {\r\n      newProductList.forEach((product, index) => {\r\n        if (Number(product.id) === Number(selectedId)) {\r\n          newProductList.splice(index, 1);\r\n        }\r\n      });\r\n    });\r\n\r\n    // OVERWRITING PRODUCTLIST USING NEW\r\n    try {\r\n      await setDoc(doc(db, \"users\", String(props.userId)), {\r\n        productList: newProductList\r\n      },\r\n      { merge: true });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n \r\n  const initialState = {\r\n    isMealOpened: false, \r\n    isAddingWindowOpened: false,\r\n    isRemovingWindowOpened: false,\r\n    countIngredients: false,\r\n    productList: [],\r\n    newProduct: { id: 0, mealId: props.mealId, dateIds: { dayId: 0, monthId: 0, yearId: 0 },  name: '', weight: '', proteins: '', fats: '', carbs: '', kcal: '' },\r\n    warning: ['', ''],\r\n    summary: {\r\n      proteins: 0,\r\n      fats: 0,\r\n      carbs: 0,\r\n      kcal: 0\r\n    }\r\n  };\r\n\r\n\r\n  // HOOKS\r\n\r\n  const reducer = (state, action) => {\r\n    switch(action.type) {\r\n\r\n      case ACTIONS.NEGATE_MEAL_STATE:\r\n        return {...state, isMealOpened: !state.isMealOpened};\r\n      \r\n      case ACTIONS.NEGATE_ADDING_WINDOW_STATE:\r\n        return {...state, isAddingWindowOpened: !state.isAddingWindowOpened};\r\n\r\n      case ACTIONS.NEGATE_REMOVING_WINDOW_STATE:\r\n        return {...state, isRemovingWindowOpened: !state.isRemovingWindowOpened};\r\n\r\n      case ACTIONS.CHANGE_NEW_PRODUCT_DATA: {\r\n        switch (action.payload.key) {\r\n          case 'name':      return {...state, newProduct: {...state.newProduct, name:     action.payload.value}};\r\n          case 'weight':    return {...state, newProduct: {...state.newProduct, weight:   action.payload.value}};\r\n          case 'proteins':  return {...state, newProduct: {...state.newProduct, proteins: action.payload.value}};\r\n          case 'fats':      return {...state, newProduct: {...state.newProduct, fats:     action.payload.value}};\r\n          case 'carbs':     return {...state, newProduct: {...state.newProduct, carbs:    action.payload.value}};\r\n          case 'kcal':      return {...state, newProduct: {...state.newProduct, kcal:     action.payload.value}};\r\n        }\r\n      }\r\n\r\n      case ACTIONS.ADD_PRODUCT: {\r\n        const newProductList = state.productList;\r\n        state.newProduct.id = Date.now();\r\n        state.newProduct.dateIds = props.dateIds;\r\n\r\n        // SAVING IN DATABASE\r\n        saveProductInDatabase([state.newProduct]);\r\n\r\n        // SAVING IN STATE\r\n        newProductList.push(state.newProduct);\r\n\r\n        return {...state, newProduct: { id: 0, mealId: props.mealId, dateIds: { dayId: 0, monthId: 0, yearId: 0 }, name: '', weight: '', proteins: '', fats: '', carbs: '', kcal: ''},\r\n                          productList: newProductList };\r\n      }\r\n\r\n      case ACTIONS.SET_WARNING: {\r\n        switch (action.payload) {\r\n          case 'name':  return { ...state, warning: [warnings.name, action.payload] }\r\n          case 'weight':  return { ...state, warning: [warnings.weight, action.payload] }\r\n          default:  return { ...state, warning: [warnings.macros, action.payload] }\r\n        };\r\n      }\r\n\r\n      case ACTIONS.CLEAR_WARNING: {\r\n        return { ...state, warning: ['', action.payload]};\r\n      }\r\n\r\n      case ACTIONS.REMOVE_PRODUCT: {\r\n        let newProductList = state.productList;\r\n        let checkedIdList = action.payload;\r\n\r\n        // DELETING FROM DATABASE\r\n        removeProductsFromDatabase(checkedIdList);\r\n\r\n        // DELETING FROM STATE\r\n        checkedIdList.forEach(selectedId => {\r\n          newProductList.forEach((product, index) => {\r\n            if (Number(product.id) === Number(selectedId)) { newProductList.splice(index, 1) }\r\n          });\r\n        });\r\n\r\n        return {...state, productList: newProductList};\r\n      }\r\n\r\n      case ACTIONS.ADD_TO_SUMMARY: {\r\n        switch (action.payload.ingredient) {\r\n          case 'proteins': return {...state, summary: {...state.summary, proteins: state.summary.proteins + Number(action.payload.value)}};\r\n          case 'fats':     return {...state, summary: {...state.summary, fats:     state.summary.fats     + Number(action.payload.value)}};\r\n          case 'carbs':    return {...state, summary: {...state.summary, carbs:    state.summary.carbs    + Number(action.payload.value)}};\r\n          case 'kcal':     return {...state, summary: {...state.summary, kcal:     state.summary.kcal     + Number(action.payload.value)}};\r\n        }\r\n      }\r\n      \r\n      case ACTIONS.SUB_FROM_SUMMARY: {\r\n        switch (action.payload.ingredient) {\r\n          case 'proteins': return {...state, summary: {...state.summary, proteins: state.summary.proteins - Number(action.payload.value)}};\r\n          case 'fats':     return {...state, summary: {...state.summary, fats:     state.summary.fats     - Number(action.payload.value)}};\r\n          case 'carbs':    return {...state, summary: {...state.summary, carbs:    state.summary.carbs    - Number(action.payload.value)}};\r\n          case 'kcal':     return {...state, summary: {...state.summary, kcal:     state.summary.kcal     - Number(action.payload.value)}};\r\n        }\r\n      }\r\n\r\n      case ACTIONS.ADD_PRODUCT_TO_PRODUCTLIST: {\r\n        return {...state, productList: [...state.productList, action.payload]};\r\n      }\r\n\r\n      case ACTIONS.CLEAR_PRODUCTLIST_BEFORE_DAY_CHANGING: {\r\n        return {...state, productList: []};\r\n      }\r\n\r\n      default: return console.error(`Unknown action type: ${action.type}`);\r\n    }\r\n  }\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  const [isPlaceholderEnabled, setPlaceholderState] = useState(false);\r\n\r\n  const loadProductListFromDatabase = async () => {\r\n    clearProductList();\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.id === props.userId) {\r\n          if (user.data().productList) {\r\n            user.data().productList.forEach(product => {\r\n              if (product.mealId === props.mealId && ((product.dateIds.dayId === props.dateIds.dayId) &&\r\n                                            (product.dateIds.monthId === props.dateIds.monthId) &&\r\n                                            (product.dateIds.yearId === props.dateIds.yearId)))\r\n                dispatch({ type: ACTIONS.ADD_PRODUCT_TO_PRODUCTLIST, payload: product });\r\n            });\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const clearProductList = () => {\r\n    dispatch({ type: ACTIONS.CLEAR_PRODUCTLIST_BEFORE_DAY_CHANGING });\r\n  }\r\n\r\n\r\n  // EFFECTS\r\n  \r\n  // LOADS PRODUCTS FROM DATABASE\r\n  useEffect(() => {\r\n    loadProductListFromDatabase();\r\n\r\n  }, [ props.userId, props.dateIds ]);\r\n\r\n  // RELOADS PRODUCTS FROM DATABASE AFTER CLOSING SETTINGS PAGE\r\n  useEffect(() => {\r\n    if (props.isSettingsOpened)\r\n      return () => loadProductListFromDatabase();\r\n\r\n  }, [ props.isSettingsOpened ]);\r\n\r\n  // CLOSES WINDOWS AFTER DAY CHANGE\r\n  useEffect(() => {\r\n    const disableVisibilityIfEnabled = (state, action) => {\r\n      if (state)\r\n        dispatch({type: action});\r\n    }\r\n    \r\n    disableVisibilityIfEnabled(state.isMealOpened, ACTIONS.NEGATE_MEAL_STATE);\r\n    disableVisibilityIfEnabled(state.isAddingWindowOpened, ACTIONS.NEGATE_ADDING_WINDOW_STATE);\r\n    disableVisibilityIfEnabled(state.isRemovingWindowOpened, ACTIONS.NEGATE_REMOVING_WINDOW_STATE);\r\n\r\n  }, [ props.userId, props.dateIds ]);\r\n\r\n  // SENDS DATA FROM MEAL TO GAUGES\r\n  useEffect(() => { \r\n    props.updateGauges(state.summary, props.mealId);\r\n\r\n  }, [ state.summary ]);\r\n\r\n  // DISABLES POINTER EVENTS WHEN ONE OF FORM WINDOWS IS OPENED \r\n  useEffect(() => {\r\n    const changePointerEvents = (value) => {\r\n      const meals = document.querySelectorAll(\".meal\");\r\n      const wrapper = document.querySelector(\".wrapper\");\r\n      const center = document.querySelector(\".center-section\");\r\n\r\n      meals.forEach(meal => {\r\n        let buttons = meal.querySelector(\".meal__buttons-section\");\r\n        buttons.style.pointerEvents = value;\r\n        wrapper.style.pointerEvents = value;\r\n\r\n        // DISABLING SCROLL AT CENTER SECTION \r\n        value === \"none\" ? center.style.overflowY = \"hidden\" : center.style.overflowY = \"auto\";\r\n      });\r\n    }\r\n\r\n\r\n    state.isAddingWindowOpened || state.isRemovingWindowOpened\r\n    ? changePointerEvents(\"none\")\r\n    : changePointerEvents(\"auto\");\r\n    \r\n  }, [ state.isAddingWindowOpened, state.isRemovingWindowOpened ]);\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const handleMealOpening = () => {\r\n    dispatch( {type: ACTIONS.NEGATE_MEAL_STATE} );\r\n  }\r\n\r\n  const handleAddingToSummary = (object) => {\r\n    Object.keys(object).forEach(key => {\r\n      dispatch({\r\n        type: ACTIONS.ADD_TO_SUMMARY,\r\n        payload: {\r\n          ingredient: key,\r\n          value: object[key]\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  const handleSubstractingFromSummary = (object) => {\r\n    Object.keys(object).forEach(key => {\r\n      dispatch({\r\n        type: ACTIONS.SUB_FROM_SUMMARY,\r\n        payload: {\r\n          ingredient: key,\r\n          value: object[key]\r\n        }\r\n      });\r\n    });\r\n    \r\n  }\r\n\r\n  const handleAddWindow = () => {\r\n    dispatch( {type: ACTIONS.NEGATE_ADDING_WINDOW_STATE} );\r\n  }\r\n\r\n  const handleRemoveWindow = () => {\r\n    dispatch( {type: ACTIONS.NEGATE_REMOVING_WINDOW_STATE} );\r\n  }\r\n\r\n  const handleProductAdding = (e) => {\r\n    e.preventDefault();\r\n    setTimeout(() => { dispatch({ type: ACTIONS.ADD_PRODUCT }) }, 10);\r\n    dispatch({ type: ACTIONS.NEGATE_ADDING_WINDOW_STATE });\r\n  }\r\n\r\n  const handlePredefinedProductsAdding = (selectedProducts) => {\r\n    let modifiedSelectedProducts = [];\r\n\r\n    modifiedSelectedProducts = selectedProducts.map((item, index) => {\r\n      return {\r\n        ...item,\r\n        mealId: props.mealId,\r\n        dateIds: props.dateIds,\r\n        id: Date.now() + index * 10\r\n      }\r\n    });\r\n\r\n    // ADDING TO STATE\r\n    modifiedSelectedProducts.forEach(product => {\r\n      dispatch({ type: ACTIONS.ADD_PRODUCT_TO_PRODUCTLIST, payload: product });\r\n    });\r\n\r\n    // ADDING TO DATABASE\r\n    saveProductInDatabase(modifiedSelectedProducts, true);\r\n\r\n    dispatch({ type: ACTIONS.NEGATE_ADDING_WINDOW_STATE });\r\n  }\r\n\r\n  const handleProductRemoving = (checkedIdsList) => {\r\n    dispatch({ type: ACTIONS.REMOVE_PRODUCT, payload: checkedIdsList });\r\n    dispatch({ type: ACTIONS.NEGATE_REMOVING_WINDOW_STATE });\r\n  }\r\n\r\n  const handleFormClearing = () => {\r\n    dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: 'name', value: '' }});\r\n    dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: 'weight', value: '' }});\r\n    dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: 'proteins', value: '' }});\r\n    dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: 'fats', value: '' }});\r\n    dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: 'carbs', value: '' }});\r\n    dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: 'kcal', value: '' }});\r\n    setPlaceholderState(false);\r\n  }\r\n\r\n  const handleOnChange = (e) => {\r\n    const isNumber = /[0-9]/;\r\n    const isWord = /[a-z\\s]/i;\r\n    const isZero = /^[0]{1}/;\r\n\r\n    const setValueAsZero = () => {\r\n      dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: e.target.id, value: '0' }});\r\n      dispatch({ type: ACTIONS.CLEAR_WARNING, payload: e.target.id });\r\n    }\r\n\r\n    const setValueAsNull = () => {\r\n      dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: e.target.id, value: \"\" } });\r\n      dispatch({ type: ACTIONS.SET_WARNING, payload: e.target.id });\r\n    }\r\n\r\n    const setValueAsCorrect = () => {\r\n      dispatch({ type: ACTIONS.CHANGE_NEW_PRODUCT_DATA, payload: { key: e.target.id, value: e.target.value }});\r\n      dispatch({ type: ACTIONS.CLEAR_WARNING, payload: e.target.id });\r\n    }\r\n\r\n    if (e.target.id === 'name') {\r\n      isWord.test(e.target.value[e.target.value.length - 1]) ? setValueAsCorrect() : setValueAsNull();\r\n    }\r\n\r\n    else {\r\n      if (isNumber.test(e.target.value[e.target.value.length - 1])) {\r\n        if (isZero.test(e.target.value))\r\n          e.target.id === 'weight' ? setValueAsNull() : setValueAsZero();\r\n        else\r\n          setValueAsCorrect();\r\n      }\r\n      else {\r\n        setValueAsNull();\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // RETURN\r\n\r\n  return (\r\n    <div className=\"meal\" style={ (state.isMealOpened && window.innerWidth > 768) ? {left: '-10px'} : {left: '0px'} }>\r\n      <section className=\"meal__top-section\" onClick={ props.userStatus === \"Log in\" ? props.loginShortcut : handleMealOpening }>\r\n        \r\n        <h2 className=\"meal__top-section__meal-title\">{props.name}</h2>        \r\n        \r\n        <ul className=\"meal__top-section__meal-stats-list\">                   \r\n          <li className=\"meal__top-section__meal-stats-list__item\">{ state.summary.proteins } g</li>\r\n          <li className=\"meal__top-section__meal-stats-list__item\">{ state.summary.fats } g</li>\r\n          <li className=\"meal__top-section__meal-stats-list__item\">{ state.summary.carbs } g</li>\r\n          <li className=\"meal__top-section__meal-stats-list__item\">{ state.summary.kcal } kcal</li>\r\n        </ul> \r\n\r\n      </section>\r\n\r\n      { state.productList.length !== 0 ? (\r\n        <section className=\"meal__products-section\" style={ state.isMealOpened ? {display: \"flex\"} : {display: \"none\"} }>\r\n       \r\n        { state.productList.map(product => {\r\n          return (\r\n            <Product key={ product.id } \r\n              name={ product.name }\r\n              weight={ product.weight }\r\n              proteins={ product.proteins }\r\n              fats={ product.fats }\r\n              carbs={ product.carbs }\r\n              kcal={ product.kcal }\r\n              addIngredientsFunction={ handleAddingToSummary }\r\n              subIngredientsFunction={ handleSubstractingFromSummary }>\r\n            </Product>\r\n          )\r\n        })}\r\n\r\n        </section>\r\n      ) : null }\r\n      \r\n      <section className=\"meal__buttons-section\" style={ state.isMealOpened ? {display: \"flex\"} : {display: \"none\"} }>\r\n        <div>\r\n        <button \r\n          className={ state.productList.length ? \"meal__buttons-section__remove-button\" : \"meal__buttons-section__remove-button meal__buttons-section__remove-button--disabled\" } \r\n          onClick={ state.productList.length ? handleRemoveWindow : null } \r\n          disabled={ state.isAddingWindowOpened || state.isRemovingWindowOpened ? true : false }>\r\n          Remove</button> \r\n\r\n        <button \r\n          className=\"meal__buttons-section__add-button\" \r\n          onClick={ handleAddWindow } \r\n          disabled={ state.isAddingWindowOpened || state.isRemovingWindowOpened ? true : false }>\r\n          Add</button>  \r\n        </div>     \r\n      \r\n      </section>\r\n\r\n      { state.isAddingWindowOpened \r\n        ? <AddWindow \r\n            data={{ \r\n              isPlaceholderEnabled: isPlaceholderEnabled,\r\n              name: state.newProduct.name, \r\n              weight: state.newProduct.weight,\r\n              proteins: state.newProduct.proteins,\r\n              fats: state.newProduct.fats,\r\n              carbs: state.newProduct.carbs,\r\n              kcal: state.newProduct.kcal }}\r\n            warning={ state.warning }\r\n            handleOnChange={ handleOnChange }\r\n            handleFormClearing={ handleFormClearing }\r\n            handleProductAdding={ handleProductAdding }\r\n            handleAddWindow={ handleAddWindow }\r\n            handlePredefinedProductsAdding={ handlePredefinedProductsAdding }\r\n          />\r\n        : null }\r\n\r\n      { state.isRemovingWindowOpened \r\n        ? <RemoveWindow\r\n            list={ state.productList }\r\n            handleRemoving={ handleProductRemoving }\r\n            handleRemoveWindow={ handleRemoveWindow }\r\n          />\r\n        : null }\r\n\r\n    </div>\r\n  )\r\n}","// IMPORTS\r\n\r\nimport React from 'react';\r\nimport './styles/right.css';\r\n\r\n\r\n// PRIMARY COMPONENTS\r\n\r\nexport default function Gauge(props) {\r\n  const handleRotation = () => {\r\n    const rotationDegrees = props.percent * 2.7;\r\n    if (rotationDegrees < 90)\r\n      return {transform: `rotate(${rotationDegrees}deg)`};\r\n    if (rotationDegrees >= 90 && rotationDegrees < 180)\r\n      return {transform: `rotate(${rotationDegrees}deg)`, borderRightColor: `#ffffff80`};  \r\n    if (rotationDegrees >= 180)\r\n      return {transform: `rotate(${rotationDegrees}deg)`, borderRightColor: `#ffffff80`, borderTopColor: '#ffffff80'};\r\n  }\r\n\r\n  return (\r\n\r\n    <div className={ !props.isKcal ? \"right-section__gauge-container\" : \"right-section__gauge-container right-section__gauge-container--kcal\" }>\r\n        \r\n        <div className={ !props.isKcal ? \"right-section__gauge-container__bar\" : \"right-section__gauge-container__bar right-section__gauge-container__bar--kcal\" } \r\n          style={ props.percent < 100 ? handleRotation() : {borderColor: \"#e00000\"}}>    \r\n        </div>\r\n\r\n        <div className={ !props.isKcal ? \"right-section__gauge-container__text\" : \"right-section__gauge-container__text right-section__gauge-container__text--kcal\" }>\r\n           <h4 className={ !props.isKcal ? \"right-section__gauge-container__text__amount\" : \"right-section__gauge-container__text__amount right-section__gauge-container__text__amount--kcal\" }>\r\n             {props.amount} {!props.isKcal ? \"g\" : null}</h4>\r\n           <h6 className={ !props.isKcal ? \"right-section__gauge-container__text__name\" : \"right-section__gauge-container__text__name right-section__gauge-container__text__name--kcal\" }>\r\n             {props.name} </h6>\r\n           <p className={ !props.isKcal ? \"right-section__gauge-container__text__percent\" : \"right-section__gauge-container__text__percent right-section__gauge-container__text__percent--kcal\" }>\r\n             {props.percent} %</p>\r\n           <h5 className={ !props.isKcal ? \"right-section__gauge-container__text__left\" : \"right-section__gauge-container__text__left right-section__gauge-container__text__left--kcal\" }>\r\n             {props.left} {!props.isKcal ? \"g\" : null} left</h5>\r\n        </div>\r\n\r\n    </div>\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { FaChevronCircleLeft } from 'react-icons/fa';\r\n \r\n\r\n// COMPONENT\r\n\r\nexport default function MoreWindow(props) {\r\n\r\n  // EFFECTS\r\n\r\n  // BLURING AND DISABLING POINTER EVENTS ON BACKGROUND AND DELAYING AN IFRAME AFTER MOUNTING\r\n  useEffect(() => {\r\n    const wrapper = document.querySelector(\".wrapper\");\r\n    const iframe = document.querySelector(\".window__main__section__iframe\");\r\n    const rootElement = document.querySelector(\"#root\");\r\n    const hamburger = document.querySelector(\".left-section__hamburger\");\r\n    const accountIcon = document.querySelector(\".left-section__account\");\r\n    wrapper.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n    wrapper.style.pointerEvents = \"none\";\r\n    setTimeout(() => { iframe.style.opacity = \"1\" }, 500);\r\n    rootElement.style.zIndex = 97;\r\n    hamburger.style.display = \"none\";\r\n    accountIcon.style.display = \"none\";\r\n  \r\n    return (() => {\r\n      wrapper.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      wrapper.style.pointerEvents = \"auto\";\r\n      rootElement.style.zIndex = 99;\r\n      \r\n      if (window.innerWidth < 769)\r\n        hamburger.style.display = \"flex\";\r\n        accountIcon.style.display = \"flex\";\r\n    })\r\n\r\n  }, []);\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const handleBackButton = () => {\r\n    props.handleMoreWindow();\r\n  }\r\n\r\n\r\n  // RETURN\r\n\r\n  return ReactDOM.createPortal (\r\n    <>\r\n    <div className=\"window__closer\" onClick={ handleBackButton }></div> \r\n    <div className=\"window window--more\">\r\n\r\n      <header className=\"window__header\">\r\n        <h2 className=\"window__header__heading\">{ props.title }</h2>\r\n        <button className=\"window__header__back-button\" onClick={ handleBackButton }><FaChevronCircleLeft /></button>\r\n      </header>\r\n\r\n      <main className=\"window__main\">\r\n\r\n        <section className=\"window__main__section\"> \r\n          <h3 className=\"window__main__section__title\">Description</h3>\r\n          <p className=\"window__main__section__text\">{ props.description }</p>\r\n        </section>\r\n\r\n        <section className=\"window__main__section window__main__section--halfed\">\r\n          <aside className=\"window__main__section__split-left\">\r\n            <h3 className=\"window__main__section__title\">Difficulty</h3>\r\n            <div className=\"exercise__top-section__grade-container\" style={{ marginBottom: \"15px\" }}>\r\n              <span className=\"exercise__top-section__grade-container__point exercise__top-section__grade-container__point--filled\"></span>\r\n              <span className={ props.difficulty >= 2 ? \"exercise__top-section__grade-container__point exercise__top-section__grade-container__point--filled\" : \"exercise__top-section__grade-container__point\" }></span>\r\n              <span className={ props.difficulty === 3 ? \"exercise__top-section__grade-container__point exercise__top-section__grade-container__point--filled\" : \"exercise__top-section__grade-container__point\" }></span>\r\n            </div>\r\n            <p className=\"window__main__section__text\">{ props.typeOfExercise }</p>\r\n          </aside>\r\n          <aside className=\"window__main__section__split-right\">\r\n            <h3 className=\"window__main__section__title\">Muscles</h3>\r\n            <ul className=\"window__main__section__list\">\r\n              { props.muscles.map((muscle, index) => { return <li key={ index } className=\"window__main__section__list__item\">{ muscle }</li> }) } \r\n            </ul>\r\n          </aside>\r\n        </section>\r\n\r\n        <section className=\"window__main__section\">\r\n          <h3 className=\"window__main__section__title\">Proper form</h3>\r\n          <iframe className=\"window__main__section__iframe\" allowFullScreen width=\"100%\" height=\"300px\" src={ props.properFormLink }></iframe>\r\n        </section>\r\n\r\n      </main>\r\n\r\n      <section className=\"window__bottom\">\r\n        <div></div>\r\n        <button className=\"window__bottom__primary-button\" type=\"button\" onClick={ handleBackButton }>Back</button>\r\n      </section>\r\n\r\n    </div>\r\n    </>,\r\n    document.getElementById('portal')\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useEffect, useReducer } from 'react';\r\nimport './style/exercise.css';\r\nimport './../meal/styles/meal.css';\r\n\r\nimport AddWindow from '../product_adding_window/ProductAddingWindow';\r\nimport RemoveWindow from '../product_removing_window/ProductRemovingWindow';\r\nimport MoreWindow from '../MoreWindow/MoreWindow';\r\n\r\nimport { db } from '../../index'; \r\nimport { collection, getDocs, setDoc, doc } from \"firebase/firestore\";\r\n\r\n\r\n// VARIABLES\r\n\r\nexport const warnings = {\r\n  weight: \"Weight must be a positive number\",\r\n  reps: \"Reps must be a positive number\"\r\n};\r\n\r\n// COMPONENT\r\n\r\nexport default function Exercise(props) {\r\n\r\n  // VARIABLES\r\n\r\n  const ACTIONS = {\r\n    NEGATE_EXERCISE_OPENED: 'negate-exercise-opened',\r\n    NEGATE_ADD_WINDOW_STATE: 'negate-add-window-state',\r\n    NEGATE_REMOVE_WINDOW_STATE: 'negate-remove-window-state',\r\n    NEGATE_MORE_WINDOW_STATE: 'negate-more-window-state',\r\n    SORT_SERIESLIST: 'sort-serieslist',\r\n    CHANGE_NEW_SERIE_DATA: 'change-new-serie-data',\r\n    UPDATE_LASTTIME_DATA: 'update-lasttime-data',\r\n    SET_WARNING: 'set-warning',\r\n    CLEAR_WARNING: 'clear-warning',\r\n    ADD_SERIE: 'add-serie',\r\n    REMOVE_SERIE: 'remove-serie',\r\n    ADD_SERIE_TO_SERIESLIST: 'add-serie-to-serieslist',\r\n    CLEAR_SERIESLIST_BEFORE_DAY_CHANGING: 'clear-serieslist-before-day-change'\r\n  }\r\n\r\n  const initialState = {\r\n    isExerciseOpened: false,\r\n    isAddWindowOpened: false,\r\n    isRemoveWindowOpened: false,\r\n    isMoreWindowOpened: false,\r\n    lastTimeData: { \r\n      training: { weight: \"First time\", reps: \"First time\" },\r\n      serie: { weight: \"First time\", reps: \"First time\" } \r\n    },\r\n    seriesList: [],\r\n    warning: ['', ''],\r\n    newSerie: { id: 0, exerciseId: props.exerciseId, trainingId: 0, dateIds: { dayId: 0, monthId: 0, yearId: 0 }, serieCount: '', weight: '', reps:'' }\r\n  }\r\n\r\n  const removeSeriesFromDatabase = async (selectedSeries, state) => {\r\n    let newSeriesList = [];\r\n    let currentExerciseSeries = state;\r\n    let serieCount = 1;\r\n\r\n    // GETTING ALL SERIES SAVED IN DATABASE\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.id === props.userId) {\r\n          if (user.data().seriesList)\r\n            newSeriesList = user.data().seriesList;\r\n        }\r\n      });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    // DELETING SERIES PRODUCTS\r\n    selectedSeries.forEach(selectedId => {\r\n      newSeriesList.forEach((serie, index) => {\r\n        if (Number(serie.id) === Number(selectedId)) {\r\n          newSeriesList.splice(index, 1);\r\n        }\r\n      });\r\n    });\r\n\r\n    // SERIE ORDER COUNTING\r\n    currentExerciseSeries.forEach(serie => {\r\n      serie.serieCount = serieCount;\r\n      newSeriesList.forEach(databaseSerie => {\r\n        if (databaseSerie.id === serie.id)\r\n          databaseSerie.serieCount = serieCount;\r\n      });\r\n      serieCount++;\r\n    });\r\n\r\n    // OVERWRITING PRODUCTLIST USING NEW LIST\r\n    try {\r\n      await setDoc(doc(db, \"users\", String(props.userId)), {\r\n        seriesList: newSeriesList\r\n      },\r\n      { merge: true });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const saveSerieInDatabase = async (serie) => {\r\n    let newSeriesList = [];\r\n\r\n    // CHECKING IF SERIESLIST EXIST\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.id === props.userId) {\r\n          if (user.data().seriesList)\r\n            newSeriesList = user.data().seriesList;\r\n        }\r\n      });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    newSeriesList.push(serie);\r\n\r\n    // OVERWRITING OLD SERIESLIST USING NEW LIST\r\n    try {\r\n      await setDoc(doc(db, \"users\", String(props.userId)), {\r\n        seriesList: newSeriesList\r\n      },\r\n      { merge: true });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const getPreviousTrainingDate = (previousDateIds) => {\r\n    const isLeapYear = () => {\r\n      if (((previousDateIds.yearId % 4 === 0) && (previousDateIds.yearId % 100 !== 0)) || previousDateIds.yearId % 400 === 0)\r\n         return true;\r\n      \r\n      else\r\n         return false;\r\n    }\r\n    const isDayFirstInMonth = () => {\r\n      if(previousDateIds.dayId === 1)\r\n        return true;\r\n      else\r\n        return false;\r\n    }\r\n    const isDayFirstInJanuary = () => {\r\n      if ((previousDateIds.dayId === 1) && (previousDateIds.monthId === 1))\r\n        return true;\r\n      \r\n      else\r\n        return false;\r\n    }\r\n    const isDayFirstInMarch = () => {\r\n      if ((previousDateIds.dayId === 1) && (previousDateIds.monthId === 3))\r\n        return true;\r\n      \r\n      else\r\n        return false;\r\n    }\r\n    const isDayFirstIn30DayMonths = () => {\r\n      if ((previousDateIds.dayId === 1) && ((previousDateIds.monthId === 4) || (previousDateIds.monthId === 6) || (previousDateIds.monthId === 8) || (previousDateIds.monthId === 9) || (previousDateIds.monthId === 11)))\r\n        return true;\r\n      \r\n      else\r\n        return false;\r\n    }\r\n\r\n    let potentialPreviousDateIds = { dayId: 0, monthId: 0, yearId: 0 };\r\n\r\n    if (isDayFirstInJanuary()) {\r\n      potentialPreviousDateIds.dayId = 31;\r\n      potentialPreviousDateIds.monthId = 12;\r\n      potentialPreviousDateIds.yearId = previousDateIds.yearId - 1;\r\n    }\r\n\r\n    else if (isDayFirstInMarch()) {\r\n      if(isLeapYear())\r\n        potentialPreviousDateIds.dayId = 29;\r\n      else\r\n        potentialPreviousDateIds.dayId = 28;\r\n      \r\n      potentialPreviousDateIds.monthId = 2;\r\n      potentialPreviousDateIds.yearId = previousDateIds.yearId;\r\n    }\r\n\r\n    else if (isDayFirstIn30DayMonths()) {\r\n      potentialPreviousDateIds.dayId = 31;\r\n      potentialPreviousDateIds.monthId = previousDateIds.monthId - 1;\r\n      potentialPreviousDateIds.yearId = previousDateIds.yearId;\r\n    }\r\n\r\n    else if (isDayFirstInMonth()) {\r\n      potentialPreviousDateIds.dayId = 30\r\n      potentialPreviousDateIds.monthId = previousDateIds.monthId - 1;\r\n      potentialPreviousDateIds.yearId = previousDateIds.yearId;\r\n    }\r\n    \r\n    else {\r\n      potentialPreviousDateIds.dayId = previousDateIds.dayId - 1;\r\n      potentialPreviousDateIds.monthId = previousDateIds.monthId;\r\n      potentialPreviousDateIds.yearId = previousDateIds.yearId;\r\n    }\r\n    return potentialPreviousDateIds;\r\n  }\r\n\r\n  \r\n  // HOOKS\r\n\r\n  const reducer = (state, action) => {\r\n    switch(action.type) {\r\n      \r\n      case ACTIONS.NEGATE_EXERCISE_OPENED: {\r\n        return {...state, isExerciseOpened: !state.isExerciseOpened};\r\n      }\r\n    \r\n      case ACTIONS.NEGATE_ADD_WINDOW_STATE: {\r\n        return {...state, isAddWindowOpened: !state.isAddWindowOpened};\r\n      }\r\n\r\n      case ACTIONS.NEGATE_REMOVE_WINDOW_STATE: {\r\n        return {...state, isRemoveWindowOpened: !state.isRemoveWindowOpened};\r\n      }\r\n\r\n      case ACTIONS.NEGATE_MORE_WINDOW_STATE: {\r\n        return {...state, isMoreWindowOpened: !state.isMoreWindowOpened};\r\n      }\r\n\r\n      case ACTIONS.CHANGE_NEW_SERIE_DATA: {\r\n        switch (action.payload.key) {\r\n          case 'weight':      return { ...state, newSerie: { ...state.newSerie, weight: action.payload.value } };\r\n          case 'reps':        return { ...state, newSerie: { ...state.newSerie, reps:   action.payload.value } };\r\n        }\r\n      }\r\n\r\n      case ACTIONS.ADD_SERIE: {\r\n        const newSeriesList = state.seriesList;\r\n        let serieCount = 1;\r\n        state.newSerie.id = Date.now();\r\n        state.newSerie.dateIds = props.dateIds;\r\n\r\n        // SAVING IN DATABASE\r\n        saveSerieInDatabase(state.newSerie);\r\n        \r\n        // SAVING IN STATE\r\n        newSeriesList.push(state.newSerie);\r\n\r\n        // SERIE ORDER COUNTING\r\n        newSeriesList.forEach(serie => {\r\n          serie.serieCount = serieCount;\r\n          serieCount++;\r\n        });\r\n\r\n        return {\r\n          ...state,\r\n          newSerie: { id: 0, exerciseId: props.exerciseId, dateIds: { dayId: 0, monthId: 0, yearId: 0 }, serieCount: '', weight: '', reps: '' },\r\n          seriesList: newSeriesList };\r\n      }\r\n\r\n      case ACTIONS.REMOVE_SERIE: {\r\n        let updatedSeriesList = state.seriesList;\r\n        let checkedIdList = action.payload;\r\n        let serieCount = 1;\r\n\r\n        // DELETING SERIES PRODUCTS\r\n        checkedIdList.forEach(selectedId => {\r\n          updatedSeriesList.forEach((serie, index) => {\r\n            if (Number(serie.id) === Number(selectedId)) {\r\n              updatedSeriesList.splice(index, 1);\r\n            }\r\n          });\r\n        });\r\n\r\n        // SERIE ORDER COUNTING\r\n        updatedSeriesList.forEach(serie => {\r\n          serie.serieCount = serieCount;\r\n          serieCount++;\r\n        });\r\n\r\n        removeSeriesFromDatabase(checkedIdList, updatedSeriesList);\r\n\r\n        return { ...state, seriesList: updatedSeriesList };\r\n      }\r\n\r\n      case ACTIONS.SET_WARNING: {\r\n        switch (action.payload) {\r\n          case 'weight':  return { ...state, warning: [warnings.weight, action.payload] }\r\n          case 'reps':  return { ...state, warning: [warnings.reps, action.payload] }\r\n        };\r\n      }\r\n\r\n      case ACTIONS.CLEAR_WARNING: {\r\n        return { ...state, warning: ['', action.payload]};\r\n      }\r\n\r\n      case ACTIONS.ADD_SERIE_TO_SERIESLIST: {\r\n        return {...state, seriesList: [...state.seriesList, action.payload]};\r\n      }\r\n\r\n      case ACTIONS.SORT_SERIESLIST: {\r\n        let serieCount = 1;\r\n        const updatedSeriesList = [];\r\n\r\n        while (updatedSeriesList.length !== state.seriesList.length) {\r\n\r\n          state.seriesList.forEach(serie => {\r\n            if (serie.serieCount === serieCount)\r\n              updatedSeriesList.push(serie);\r\n          });\r\n\r\n          serieCount++;\r\n        }\r\n   \r\n        return {...state, seriesList: updatedSeriesList };\r\n      }\r\n\r\n      case ACTIONS.CLEAR_SERIESLIST_BEFORE_DAY_CHANGING: {\r\n        return {...state, seriesList: []};\r\n      }\r\n\r\n      case ACTIONS.UPDATE_LASTTIME_DATA: {\r\n        let currentlyAddingSerieNumber = 0;\r\n        let indexOfLastSerie = 0;\r\n        let updatedLastSerieData = { weight: \"First serie\", reps: \"First serie\" };\r\n        let updatedLastTrainingData = { weight: \"First training\", reps: \"First training\" };\r\n\r\n        // LAST SERIE DATA\r\n\r\n        // SEARCHING FOR LAST SERIE NUMBER\r\n        if (state.seriesList.length !== 0) {\r\n          state.seriesList.forEach((serie, index) => {\r\n            if (serie.serieCount > currentlyAddingSerieNumber) {\r\n              currentlyAddingSerieNumber = serie.serieCount;\r\n              indexOfLastSerie = index;\r\n            }\r\n          });\r\n  \r\n          updatedLastSerieData = { \r\n            weight: state.seriesList[indexOfLastSerie].weight,\r\n            reps: state.seriesList[indexOfLastSerie].reps \r\n          };\r\n        }\r\n        \r\n        // LAST TRAINING DATA\r\n\r\n        const potentialSeries = [];\r\n        const seriesBackup = JSON.parse(localStorage.getItem(\"seriesBackup\"));\r\n        let previousTrainingSerie = {};\r\n        let previousDateIds = props.dateIds;\r\n      \r\n        // SELECTING POTENTIAL SERIES WITH CORRECT ID AND SERIE NUMBER\r\n        if (seriesBackup) {\r\n          seriesBackup.forEach(serie => {\r\n            if (serie.exerciseId === props.exerciseId) {\r\n              if (serie.serieCount === currentlyAddingSerieNumber + 1) {\r\n                if (\r\n                  (serie.dateIds.dayId < props.dateIds.dayId) && (serie.dateIds.monthId < props.dateIds.monthId) && (serie.dateIds.yearId === props.dateIds.yearId) ||\r\n                  (serie.dateIds.dayId < props.dateIds.dayId) && (serie.dateIds.monthId === props.dateIds.monthId) && (serie.dateIds.yearId === props.dateIds.yearId) ||\r\n                  (serie.dateIds.dayId >= props.dateIds.dayId) && (serie.dateIds.monthId < props.dateIds.monthId) && (serie.dateIds.yearId === props.dateIds.yearId) ||\r\n                  (serie.dateIds.dayId >= props.dateIds.dayId) && (serie.dateIds.monthId >= props.dateIds.monthId) && (serie.dateIds.yearId < props.dateIds.yearId)\r\n                )\r\n                  potentialSeries.push(serie);\r\n              }\r\n            }\r\n          });\r\n\r\n          if (potentialSeries.length !== 0) {\r\n            while (true) {\r\n              previousDateIds = getPreviousTrainingDate(previousDateIds);\r\n              potentialSeries.forEach(serie => {\r\n                if ((previousDateIds.dayId === serie.dateIds.dayId) &&\r\n                    (previousDateIds.monthId === serie.dateIds.monthId) &&\r\n                    (previousDateIds.yearId === serie.dateIds.yearId)) {\r\n                      previousTrainingSerie = serie;\r\n                }\r\n              });\r\n\r\n              if (previousTrainingSerie.weight !== undefined) {\r\n                updatedLastTrainingData = { \r\n                  weight: previousTrainingSerie.weight,\r\n                  reps: previousTrainingSerie.reps \r\n                };\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        return {...state, \r\n          lastTimeData: {\r\n            training: updatedLastTrainingData,\r\n            serie: updatedLastSerieData\r\n          }\r\n        }\r\n      }\r\n      \r\n      default: return console.error(`Unknown action type: ${action.type}`);\r\n    }\r\n  }\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  \r\n  const clearSeriesList = () => {\r\n    dispatch({ type: ACTIONS.CLEAR_SERIESLIST_BEFORE_DAY_CHANGING });\r\n  }\r\n\r\n  const sortSeriesList = () => {\r\n    dispatch({ type: ACTIONS.SORT_SERIESLIST });\r\n  }\r\n\r\n  const updateLastTimeData = () => {\r\n    dispatch({ type: ACTIONS.UPDATE_LASTTIME_DATA });\r\n  }\r\n\r\n  const loadSeriesListFromDatabase = async () => {\r\n    clearSeriesList();\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.id === props.userId) {\r\n          if (user.data().seriesList) {\r\n            user.data().seriesList.forEach(serie => {\r\n              if (serie.exerciseId === props.exerciseId && ((serie.dateIds.dayId === props.dateIds.dayId) &&\r\n                                            (serie.dateIds.monthId === props.dateIds.monthId) &&\r\n                                            (serie.dateIds.yearId === props.dateIds.yearId))) {\r\n                  dispatch({ type: ACTIONS.ADD_SERIE_TO_SERIESLIST, payload: serie });\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n\r\n  // EFFECTS\r\n\r\n  // LOADS SERIES FROM DATABASE\r\n  useEffect(() => {\r\n    clearSeriesList();\r\n    loadSeriesListFromDatabase();\r\n    sortSeriesList();\r\n\r\n  }, [ props.userId, props.dateIds ]);\r\n\r\n  // CLOSES WINDOWS AFTER DATE CHANGE\r\n  useEffect(() => {\r\n    const disableVisibilityIfEnabled = (state, action) => {\r\n      if (state)\r\n        dispatch({type: action});\r\n    }\r\n    \r\n    disableVisibilityIfEnabled(state.isExerciseOpened, ACTIONS.NEGATE_EXERCISE_OPENED);\r\n    disableVisibilityIfEnabled(state.isAddWindowOpened, ACTIONS.NEGATE_ADD_WINDOW_STATE);\r\n    disableVisibilityIfEnabled(state.isRemoveWindowOpened, ACTIONS.NEGATE_REMOVE_WINDOW_STATE);\r\n    disableVisibilityIfEnabled(state.isMoreWindowOpened, ACTIONS.NEGATE_MORE_WINDOW_STATE);\r\n\r\n  }, [ props.userId, props.dateIds ]);\r\n\r\n  useEffect(async () => {\r\n    const getPotentialSeries = async () => {\r\n      let seriesList = [];\r\n      try {\r\n        const querySnapshot = await getDocs(collection(db, \"users\"));\r\n        querySnapshot.forEach(user => {\r\n          if (user.id === props.userId) {\r\n            if (user.data().seriesList) {\r\n              seriesList = user.data().seriesList;\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n      catch (e) {\r\n        console.error(e);\r\n      }\r\n      return seriesList;\r\n    }\r\n    localStorage.setItem(\"seriesBackup\", JSON.stringify(await getPotentialSeries()));\r\n  \r\n  }, [ props.dateIds ])\r\n\r\n  // DISABLES POINTER EVENTS WHEN ONE OF FORM WINDOWS IS OPENED \r\n  useEffect(() => {\r\n    const changePointerEvents = (value) => {\r\n      const meals = document.querySelectorAll(\".meal\");\r\n      const wrapper = document.querySelector(\".wrapper\");\r\n      const center = document.querySelector(\".center-section\");\r\n\r\n      meals.forEach(meal => {\r\n        let buttons = meal.querySelector(\".meal__buttons-section\");\r\n        buttons.style.pointerEvents = value;\r\n        wrapper.style.pointerEvents = value;\r\n\r\n        // DISABLING SCROLL AT CENTER SECTION \r\n        value === \"none\" ? center.style.overflowY = \"hidden\" : center.style.overflowY = \"auto\";\r\n      });\r\n    }\r\n\r\n    state.isAddWindowOpened || state.isRemoveWindowOpened || state.isMoreWindowOpened\r\n    ? changePointerEvents(\"none\")\r\n    : changePointerEvents(\"auto\");\r\n    \r\n  }, [ state.isAddWindowOpened, state.isRemoveWindowOpened, state.isMoreWindowOpened ]);\r\n\r\n  // UPDATES LAST TIME DATA AFTER OPENING CHANGING WINDOWS\r\n\r\n  useEffect(() => {\r\n    if (state.isAddWindowOpened)\r\n      updateLastTimeData();\r\n    countProgress();\r\n\r\n  }, [ state.isAddWindowOpened ])\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n\r\n  const handleExerciseOpening = () => {\r\n    dispatch({ type: ACTIONS.NEGATE_EXERCISE_OPENED });\r\n  }\r\n\r\n  const handleAddWindow = () => {\r\n    dispatch({ type: ACTIONS.NEGATE_ADD_WINDOW_STATE });\r\n  }\r\n\r\n  const handleRemoveWindow = () => {\r\n    dispatch({ type: ACTIONS.NEGATE_REMOVE_WINDOW_STATE });\r\n  }\r\n\r\n  const handleMoreWindow = () => {\r\n    dispatch({ type: ACTIONS.NEGATE_MORE_WINDOW_STATE });\r\n  }\r\n\r\n  const countProgress = () => {\r\n    const potentialTrainings = [];\r\n    const seriesBackup = JSON.parse(localStorage.getItem(\"seriesBackup\"));\r\n    const lastTrainingData = [];\r\n    let message = {};\r\n    let percentValue = 0;\r\n    let progressValue = 0;\r\n    let previousDateIds = props.dateIds;\r\n    \r\n    // SELECTING POTENTIAL SERIES WITH CORRECT ID AND SERIE NUMBER\r\n    if (seriesBackup) {\r\n      seriesBackup.forEach(serie => {\r\n        if (serie.exerciseId === props.exerciseId) {\r\n            if (\r\n              (serie.dateIds.dayId < props.dateIds.dayId) && (serie.dateIds.monthId < props.dateIds.monthId) && (serie.dateIds.yearId === props.dateIds.yearId) ||\r\n              (serie.dateIds.dayId < props.dateIds.dayId) && (serie.dateIds.monthId === props.dateIds.monthId) && (serie.dateIds.yearId === props.dateIds.yearId) ||\r\n              (serie.dateIds.dayId >= props.dateIds.dayId) && (serie.dateIds.monthId < props.dateIds.monthId) && (serie.dateIds.yearId === props.dateIds.yearId) ||\r\n              (serie.dateIds.dayId >= props.dateIds.dayId) && (serie.dateIds.monthId >= props.dateIds.monthId) && (serie.dateIds.yearId < props.dateIds.yearId)\r\n            )\r\n              potentialTrainings.push(serie);\r\n        }\r\n      });\r\n\r\n      if (potentialTrainings.length !== 0) {\r\n        while (true) {\r\n          previousDateIds = getPreviousTrainingDate(previousDateIds);\r\n          potentialTrainings.forEach(training => {\r\n            if ((previousDateIds.dayId === training.dateIds.dayId) &&\r\n                (previousDateIds.monthId === training.dateIds.monthId) &&\r\n                (previousDateIds.yearId === training.dateIds.yearId)) {\r\n                  lastTrainingData.push(training);\r\n            }\r\n          });\r\n\r\n          if (lastTrainingData.length !== 0) {\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    const lastTrainingTotal = countTotalWeight(lastTrainingData);\r\n    const currentTrainingTotal = countTotalWeight(state.seriesList);\r\n  \r\n    progressValue = currentTrainingTotal - lastTrainingTotal;\r\n\r\n    if (lastTrainingTotal)\r\n      percentValue = ((progressValue / lastTrainingTotal) * 100).toFixed(2);\r\n    else \r\n      percentValue = '';\r\n      \r\n    if (lastTrainingTotal > 0) {\r\n\r\n      if (progressValue > 0) {\r\n        message.top = `${progressValue.toFixed(2)} kg more`;\r\n        message.bottom = `${percentValue}% more than last time`;\r\n      }\r\n      else if (progressValue === 0) {\r\n        message.top = \"The same result as last time\";\r\n        message.bottom = \"\";\r\n      }\r\n\r\n      else {\r\n        progressValue *= -1;\r\n        percentValue  *= -1;\r\n        message.top = `${progressValue.toFixed(2)} kg less`;\r\n        message.bottom = `${percentValue}% less than last time`;\r\n      }\r\n    }\r\n\r\n    else {\r\n      message.top = \"First training, don't give up!\";\r\n      message.bottom = \"\";\r\n    }\r\n  \r\n    return message;\r\n  }\r\n\r\n  const handleFormClearing = () => {\r\n    dispatch({ type: ACTIONS.CHANGE_NEW_SERIE_DATA, payload: { key: 'weight', value: '' }});\r\n    dispatch({ type: ACTIONS.CHANGE_NEW_SERIE_DATA, payload: { key: 'reps', value: '' }});\r\n  }\r\n\r\n  const handleOnChange = (e) => {\r\n    // const newReg = /^[1-9]{1,}[.]{1}[0-9]{1,3}/\r\n    const isNumber = /[0-9]/;\r\n    const isZero = /^[0]{1}/;\r\n\r\n    const setValueAsNull = () => {\r\n      dispatch({ type: ACTIONS.CHANGE_NEW_SERIE_DATA, payload: { key: e.target.id, value: \"\" } });\r\n      dispatch({ type: ACTIONS.SET_WARNING, payload: e.target.id });\r\n    }\r\n\r\n    const setValueAsCorrect = () => {\r\n      dispatch({ type: ACTIONS.CHANGE_NEW_SERIE_DATA, payload: { key: e.target.id, value: e.target.value }});\r\n      dispatch({ type: ACTIONS.CLEAR_WARNING, payload: e.target.id });\r\n    }\r\n    \r\n    if (isNumber.test(e.target.value[e.target.value.length - 1])) {\r\n\r\n      if (isZero.test(e.target.value))\r\n        setValueAsNull();\r\n\r\n      else\r\n        setValueAsCorrect();\r\n    }\r\n\r\n    else {\r\n      setValueAsNull();\r\n    }\r\n  }\r\n\r\n  const countTotalWeight = (seriesList) => {\r\n    let totalWeight = 0;\r\n\r\n    seriesList.forEach(serie => {\r\n      totalWeight += Number(serie.weight) * Number(serie.reps);\r\n    });\r\n\r\n    return totalWeight;\r\n  }\r\n\r\n  const countTotalReps = (seriesList) => {\r\n    let totalReps = 0;\r\n\r\n    seriesList.forEach(serie => {\r\n      totalReps += Number(serie.reps);\r\n    });\r\n    \r\n    return totalReps;\r\n  }\r\n\r\n  const countWeightPerRepsRatio = (seriesList) => {\r\n    return (countTotalWeight(seriesList) / countTotalReps(seriesList)).toFixed(2);\r\n  }\r\n\r\n  const handleSerieAdding = (e) => {\r\n    e.preventDefault();\r\n    setTimeout(() => { dispatch({ type: ACTIONS.ADD_SERIE }) }, 10);\r\n    dispatch({ type: ACTIONS.NEGATE_ADD_WINDOW_STATE });\r\n  }\r\n\r\n  const handleSerieRemoving = (checkedIdsList) => {\r\n    dispatch({ type: ACTIONS.REMOVE_SERIE, payload: checkedIdsList });\r\n    dispatch({ type: ACTIONS.NEGATE_REMOVE_WINDOW_STATE });\r\n  }\r\n\r\n\r\n  // RETURN\r\n  \r\n  return (\r\n    <div className=\"meal exercise\" style={ (state.isExerciseOpened && window.innerWidth > 768) ? {left: '-10px'} : {left: '0px'} }>\r\n      \r\n      <section className=\"meal__top-section exercise__top-section\" onClick={ props.userStatus === \"Log in\" ? props.loginShortcut : handleExerciseOpening }>\r\n\r\n        <h2 className=\"meal__top-section__meal-title\">{ props.name }</h2>\r\n\r\n        <div className=\"exercise__top-section__grade-container\" title=\"Exercise difficulty\">\r\n          <span className=\"exercise__top-section__grade-container__point exercise__top-section__grade-container__point--filled\"></span>\r\n          <span className={ props.difficulty >= 2 ? \"exercise__top-section__grade-container__point exercise__top-section__grade-container__point--filled\" : \"exercise__top-section__grade-container__point\" }></span>\r\n          <span className={ props.difficulty === 3 ? \"exercise__top-section__grade-container__point exercise__top-section__grade-container__point--filled\" : \"exercise__top-section__grade-container__point\" }></span>\r\n        </div>\r\n\r\n      </section>\r\n\r\n      { state.seriesList.length !== 0 ? (\r\n        <section className=\"meal__products-section exercise__series-section\" style={ state.isExerciseOpened ? {display: \"flex\"} : {display: \"none\"} }>\r\n\r\n          <ul className=\"exercise__series-section__list\">\r\n            { state.seriesList.map(serie => {\r\n              return (\r\n              <li key={ serie.id } className=\"exercise__series-section__list__item\">\r\n                  <p className=\"exercise__series-section__list__item__count\">Serie { serie.serieCount }</p>\r\n                  <p className=\"exercise__series-section__list__item__weight\">{ serie.weight } kg</p>\r\n                  <p className=\"exercise__series-section__list__item__reps\">{ serie.reps } reps</p>\r\n                </li> \r\n              )\r\n              })\r\n            }\r\n          </ul>\r\n\r\n          <ul className=\"exercise__series-section__summary\">\r\n\r\n            <li className=\"exercise__series-section__summary__item\">\r\n              <p className=\"exercise__series-section__summary__item__count\">Total</p>\r\n              <p className=\"exercise__series-section__summary__item__weight\">{ countTotalWeight(state.seriesList) } kg</p>\r\n              <p className=\"exercise__series-section__summary__item__reps\">{ countTotalReps(state.seriesList) } reps</p>\r\n            </li>\r\n\r\n            <li className=\"exercise__series-section__summary__item\">\r\n              <p className=\"exercise__series-section__list__item__count\">\r\n                <span>{ countProgress().top }</span>\r\n                <span>{ countProgress().bottom }</span>\r\n              </p>\r\n              <p className=\"exercise__series-section__list__item__reps exercise__series-section__list__item__reps--stats\">{ countWeightPerRepsRatio(state.seriesList) } kg per rep</p>\r\n            </li>\r\n\r\n          </ul>\r\n          \r\n        </section>\r\n      ) : null }\r\n      \r\n      \r\n      <section className=\"meal__buttons-section exercise__buttons-section\" style={ state.isExerciseOpened ? {display: \"flex\"} : {display: \"none\"} }>\r\n\r\n        <button \r\n          className=\"meal__buttons-section__tertiary\" \r\n          onClick={ handleMoreWindow }>\r\n          More\r\n        </button>\r\n        \r\n        <div>\r\n          <button \r\n            className={ state.seriesList.length ? \"meal__buttons-section__remove-button\" : \"meal__buttons-section__remove-button--disabled\" }\r\n            onClick={ state.seriesList.length ? handleRemoveWindow : null } \r\n            disabled={ state.isAddWindowOpened || state.isRemoveWindowOpened ? true : false }>\r\n            Remove\r\n          </button>\r\n\r\n          <button \r\n            className=\"meal__buttons-section__add-button\" \r\n            onClick={ handleAddWindow }\r\n            disabled={ state.isAddWindowOpened || state.isRemoveWindowOpened ? true : false }>\r\n            Add\r\n          </button>\r\n        </div>\r\n\r\n      </section>\r\n        \r\n      { state.isAddWindowOpened \r\n        ? <AddWindow \r\n            type=\"exercises\"\r\n            handleAddWindow={ handleAddWindow }\r\n            data={{\r\n              weight: state.newSerie.weight,\r\n              reps: state.newSerie.reps\r\n            }}\r\n            warning={ state.warning }\r\n            handleOnChange={ handleOnChange }\r\n            handleFormClearing={ handleFormClearing }\r\n            handleSerieAdding={ handleSerieAdding }\r\n            lastTimeData={ state.lastTimeData }\r\n          />\r\n        : null }\r\n\r\n      { state.isRemoveWindowOpened \r\n        ? <RemoveWindow \r\n            type=\"exercises\"\r\n            list={ state.seriesList }\r\n            handleRemoving={ handleSerieRemoving }\r\n            handleRemoveWindow={ handleRemoveWindow }\r\n          />\r\n        : null }\r\n\r\n      { state.isMoreWindowOpened \r\n        ? <MoreWindow\r\n            type=\"exercises\"\r\n            title={ props.name }\r\n            description={ props.description }\r\n            difficulty={ props.difficulty }\r\n            typeOfExercise= { props.typeOfExercise}\r\n            muscles={ props.muscles }\r\n            properFormLink={ props.properFormLink }\r\n            handleMoreWindow={ handleMoreWindow }\r\n          />\r\n        : null }\r\n\r\n    </div>\r\n  )\r\n}","export const exercises = [\r\n  { id: 0,\r\n    name: \"Bench Press\",\r\n    description: `The bench press is an upper-body weight training exercise in which the trainee\r\n                  presses a weight upwards while lying on a weight training bench. \r\n                  The exercise uses the pectoralis major, the anterior deltoids, and the triceps,\r\n                  among other stabilizing muscles. A barbell is generally used to hold the weight, \r\n                  but a pair of dumbbells can also be used.`,\r\n    difficulty: 2, \r\n    typeOfExercise: \"Compound exercise\",\r\n    muscles: [\"Chest\", \"Shoulders\", \"Arms\"],\r\n    properFormLink: \"https://www.youtube.com/embed/XSza8hVTlmM\" \r\n  },\r\n\r\n  { id: 1,\r\n    name: \"Deadlift\",\r\n    description: `Deadlift refers to the lifting of dead weight (weight without momentum),\r\n                  such as weights lying on the ground. It is one of the few standard weight training exercises\r\n                  in which all repetitions begin with dead weight. In most other lifts, there is an eccentric \r\n                  (lowering of the weight) phase followed by the concentric (lifting of the weight) phase. \r\n                  During these exercises, a small amount of energy is stored in the stretched muscles and \r\n                  tendons in the eccentric phase if the lifter is not flexible beyond the range of motion.\r\n                  Although this exercise uses the legs and hips as the primary movers, it can also be considered a back exercise.`,\r\n    difficulty: 3, \r\n    typeOfExercise: \"Compound exercise\",\r\n    muscles: [\"Legs\", \"Back\", \"Core\"],\r\n    properFormLink: \"https://www.youtube.com/embed/op9kVnSso6Q\" \r\n  },\r\n\r\n  { id: 2,\r\n    name: \"Squat\",\r\n    description: `A squat is a strength exercise in which the trainee lowers their hips from a standing position\r\n                  and then stands back up. During the descent of a squat, the hip and knee joints flex while\r\n                  the ankle joint dorsiflexes; conversely the hip and knee joints extend and the ankle joint\r\n                  plantarflexes when standing up. Squats are considered a vital exercise for increasing the strength and size of the lower body\r\n                  muscles as well as developing core strength. The primary agonist muscles used during the squat are\r\n                  the quadriceps femoris, the adductor magnus, and the gluteus maximus.`,\r\n    difficulty: 3, \r\n    typeOfExercise: \"Compound exercise\",\r\n    muscles: [\"Legs\", \"Core\"],\r\n    properFormLink: \"https://www.youtube.com/embed/ultWZbUMPL8\"\r\n  },\r\n\r\n  { id: 3,\r\n    name: \"Pull-up\",\r\n    description: `A pull-up is an upper-body strength exercise. The pull-up is a closed-chain movement where \r\n                  the body is suspended by the hands and pulls up. As this happens, the elbows \r\n                  flex and the shoulders adduct and extend to bring the elbows to the torso.`,\r\n    difficulty: 2, \r\n    typeOfExercise: \"Compound exercise\",\r\n    muscles: [\"Upper back\", \"Arms\"],\r\n    properFormLink: \"https://www.youtube.com/embed/HRV5YKKaeVw\"\r\n  },\r\n\r\n  { id: 4,\r\n    name: \"Push-up\",\r\n    description: `A push-up is a common calisthenics exercise beginning from the prone position. \r\n                  By raising and lowering the body using the arms, push-ups exercise the pectoral muscles, \r\n                  triceps, and anterior deltoids, with ancillary benefits to the rest of the deltoids, \r\n                  serratus anterior, coracobrachialis and the midsection as a whole. Push-ups are a basic \r\n                  exercise used in civilian athletic training or physical education and commonly in military \r\n                  physical training.`,\r\n    difficulty: 1, \r\n    typeOfExercise: \"Compound exercise\",\r\n    muscles: [\"Chest\", \"Shoulders\", \"Arms\", \"Core\"],\r\n    properFormLink: \"https://www.youtube.com/embed/0pkjOk0EiAk\"\r\n  },\r\n\r\n  { id: 5,\r\n    name: \"Overhead Press\",\r\n    description: `The overhead press (abbreviated OHP), also referred to as a shoulder press, military press,\r\n                  or simply the press, is a weight training exercise with many variations. It is typically performed\r\n                  while either standing or sitting sometimes also when squatting, in which a weight is pressed straight\r\n                  upwards from racking position until the arms are locked out overhead, while the legs, lower back and\r\n                  abs maintain balance. The exercise helps build muscular shoulders with bigger arms, and is one\r\n                  of the most difficult compound upper-body exercises.`,\r\n    difficulty: 2, \r\n    typeOfExercise: \"Compound exercise\",\r\n    muscles: [\"Shoulders\", \"Arms\", \"Core\"],\r\n    properFormLink: \"https://www.youtube.com/embed/2yjwXTZQDDI\"\r\n  },\r\n\r\n  { id: 6,\r\n    name: \"Bent-over Row\",\r\n    description: `A bent-over row (or barbell row) is a weight training exercise \r\n                  that targets a variety of back muscles. Which ones are targeted varies on form. \r\n                  The bent over row is often used for both bodybuilding and powerlifting. \r\n                  It is a good exercise for increasing strength and size`,\r\n    difficulty: 2, \r\n    typeOfExercise: \"Compound exercise\",\r\n    muscles: [\"Back\", \"Arms\", \"Core\"],\r\n    properFormLink: \"https://www.youtube.com/embed/kBWAon7ItDw\"\r\n  },\r\n\r\n  { id: 7,\r\n    name: \"Biceps Curl\",\r\n    description: `Biceps curl is a general term for a series of strength exercises \r\n                  that involve brachioradialis, front deltoid and the main target on biceps brachii.\r\n                  Includes variations using barbell, dumbbell and resistance band, etc. The common point\r\n                  amongst them is the trainee lifting a certain amount of weight to contracting the biceps\r\n                  brachii, and tuck in their arms to the torso during the concentric phase. Once the biceps brachii\r\n                  is fully contracted, then return the weight to starting position during the eccentric phase.`,\r\n    difficulty: 1, \r\n    typeOfExercise: \"Isolated exercise\",\r\n    muscles: [\"Biceps\", \"Arms\"],\r\n    properFormLink: \"https://www.youtube.com/embed/ykJmrZ5v0Oo\"\r\n  },\r\n\r\n  { id: 8,\r\n    name: \"French Press\",\r\n    description: `Lying triceps extensions, also known as skull crushers and French extensions\r\n                  or French presses, are a strength exercise used in many different forms of strength training.\r\n                  Lying triceps extensions are one of the most stimulating exercises to the entire triceps muscle\r\n                  group in the upper arm. It works the triceps from the elbow all the way to the latissimus dorsi.\r\n                  Due to its full use of the Triceps muscle group, the lying triceps extensions are used by many\r\n                  as part of their training regimen.`,\r\n    difficulty: 1, \r\n    typeOfExercise: \"Isolated exercise\",\r\n    muscles: [\"Triceps\", \"Arms\"],\r\n    properFormLink: \"https://www.youtube.com/embed/JImgCWzCHwI\"\r\n  },\r\n\r\n  { id: 9,\r\n    name: \"Running\",\r\n    description: `Running is a method of terrestrial locomotion allowing humans and other animals\r\n                  to move rapidly on foot. Running is a type of gait characterized by an aerial phase in which\r\n                  all feet are above the ground (though there are exceptions). A feature of a running\r\n                  body from the viewpoint of spring-mass mechanics is that changes in kinetic and potential energy\r\n                  within a stride occur simultaneously, with energy storage accomplished by springy tendons and\r\n                  passive muscle elasticity. The term running can refer to any of a variety of speeds ranging from jogging to sprinting. `,\r\n    difficulty: 1, \r\n    typeOfExercise: \"Aerobic exercise\",\r\n    muscles: [\"Legs\", \"Core\"],\r\n    properFormLink: \"https://www.youtube.com/embed/brFHyOtTwH4\"\r\n  }\r\n]","// IMPORTS\r\n\r\nimport { React, useReducer, useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { FaChevronCircleLeft, FaSave } from 'react-icons/fa';\r\nimport { exercises } from '../../exercisesList';\r\n\r\nimport { db } from '../../index'; \r\nimport { collection, getDocs, setDoc, doc } from \"firebase/firestore\";\r\n\r\n\r\n// VARIABLES\r\n\r\nconst initialState = {\r\n  isCategoryOpened: false,\r\n  isAccountCategory: false,\r\n  isNutritionCategory: true,\r\n  isTrainingCategory: false,\r\n  warnings: {\r\n    username: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    editMealName: \"\",\r\n    setMealsNumber: \"\",\r\n    proteins: \"\",\r\n    fats: \"\",\r\n    carbs: \"\",\r\n    kcal: \"\"\r\n  },\r\n  settingsData: {\r\n    account: {\r\n      username: \"\",\r\n      email: \"\",\r\n      password: \"\"\r\n    },\r\n\r\n    nutrition: {\r\n      dailyDemand: { kcal: 2000, proteins: 120, fats: 55, carbs: 240 },\r\n      namesOfMeals: { 0: \"Breakfast\", 1: \"II Breakfast\", 2: \"Lunch\", 3: \"Snack\", 4: \"Dinner\", 5: \"\", 6: \"\", 7: \"\", 8: \"\", 9: \"\" },\r\n      numberOfMeals: 5\r\n    },\r\n\r\n    training: {\r\n      selectedExercises: [0, 1, 2, 3, 4]\r\n    }\r\n  },\r\n  clearAllProducts: false,\r\n  clearAllSeries: false,\r\n  isSettingsChanged: false\r\n}\r\n\r\nconst initialOptionsStates = {\r\n  'clear-all-products': false,\r\n  'reset-nutrition-to-initial': false,\r\n  'clear-all-series': false,\r\n  'reset-training-to-initial': false\r\n}\r\n\r\nconst ACTIONS = {\r\n  NEGATE_CATEGORY_OPENED: 'negate-category-opened',\r\n  CHANGE_SETTINGS_DATA: 'change-settings-data',\r\n  LOAD_SETTINGS: 'load-settings',\r\n  SET_WARNING: 'set-warning',\r\n  CLEAR_WARNING: 'clear-warning',\r\n  SET_CLEAR_ALL_PRODUCTS: 'set-clear-all-products',\r\n  SET_CLEAR_ALL_SERIES: 'set-clear-all-series',\r\n  ADD_EXERCISE_TO_SELECTEDEXERCISES: 'add-exercise-to-selectedexercises',\r\n  REMOVE_EXERCISE_FROM_SELECTEDEXERCISES: 'remove-exercise-from-selectedexercises',\r\n  SET_SETTINGS_CHANGED_STATE: 'set-settings-changed-state',\r\n  RESET_NUTRITION_SETTINGS_TO_INITIAL: 'reset-nutrition-settings-to-initial',\r\n  RESET_TRAINING_SETTINGS_TO_INITIAL: 'reset-training-settings-to-initial',\r\n  SET_CATEGORY: 'set-category',\r\n  SET_NEW_SETTINGS: 'set-new-settings'\r\n}\r\n\r\nconst warnings = {\r\n  editMealName:   \"Meal name must be a string of letters only\",\r\n  setMealsNumber: \"Number of meals must be a positive number\",\r\n  macros: \"Macronutrient must be a positive number\",\r\n  emailFail: \"Incorrect e-mail!\",\r\n  minLengthFail: \"Field is too short!\",\r\n  maxLengthFail: \"Field is too long!\",\r\n  emptyFail: \"Field is empty!\",\r\n  isZero: \"Number must be higher than zero!\",\r\n  usernameExist: \"Username exist in database!\",\r\n  emailExist: \"E-mail exist in database!\"\r\n}\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function Settings(props) {\r\n\r\n  // HOOKS\r\n\r\n  const [optionsStates, setOptionsStates] = useState(initialOptionsStates);\r\n  const reducer = (state, action) => {\r\n    switch (action.type) {\r\n      case ACTIONS.NEGATE_CATEGORY_OPENED: {\r\n        return { ...state, isCategoryOpened: !state.isCategoryOpened }\r\n      }\r\n\r\n      case ACTIONS.CHANGE_SETTINGS_DATA: {\r\n        switch (action.payload.key) {\r\n          case 'username': {\r\n            return {...state, \r\n              settingsData: { ...state.settingsData, \r\n              account: {...state.settingsData.account,\r\n              username: action.payload.value }}\r\n            };\r\n          }\r\n\r\n          case 'email': {\r\n            return {...state, \r\n              settingsData: { ...state.settingsData, \r\n              account: {...state.settingsData.account,\r\n              email: action.payload.value }}\r\n            };\r\n          }\r\n\r\n          case 'password': {\r\n            return {...state, \r\n              settingsData: { ...state.settingsData, \r\n              account: {...state.settingsData.account,\r\n              password: action.payload.value }}\r\n            };\r\n          }\r\n\r\n          case 'editMealName': {\r\n            return {...state, \r\n              settingsData: { ...state.settingsData, \r\n              nutrition: {...state.settingsData.nutrition,\r\n              namesOfMeals: {...state.settingsData.nutrition.namesOfMeals, [action.payload.index]: action.payload.value }}}\r\n            };\r\n          };\r\n\r\n          case 'setMealsNumber': {\r\n            return {...state, \r\n              settingsData: { ...state.settingsData, \r\n              nutrition: {...state.settingsData.nutrition,\r\n              numberOfMeals: action.payload.value }}\r\n            };\r\n          };\r\n\r\n          default: return {...state, \r\n                           settingsData: { ...state.settingsData, \r\n                           nutrition: {...state.settingsData.nutrition, \r\n                           dailyDemand: {...state.settingsData.nutrition.dailyDemand, \r\n                           [action.payload.key]: action.payload.value }}}};\r\n        }\r\n      }\r\n\r\n      case ACTIONS.LOAD_SETTINGS: {\r\n        let newSettings = JSON.parse(localStorage.getItem(\"settings\"));\r\n        return {...state, settingsData: newSettings }\r\n      }\r\n\r\n      case ACTIONS.SET_NEW_SETTINGS: {\r\n        return { ...state, settingsData: action.payload }\r\n      }\r\n\r\n      case ACTIONS.SET_CLEAR_ALL_PRODUCTS: {\r\n        return { ...state, clearAllProducts: action.payload };\r\n      }\r\n\r\n      case ACTIONS.SET_CLEAR_ALL_SERIES: {\r\n        return { ...state, clearAllSeries: action.payload };\r\n      }\r\n\r\n      case ACTIONS.ADD_EXERCISE_TO_SELECTEDEXERCISES: {\r\n        const updatedSelectedExercises = state.settingsData.training.selectedExercises;\r\n        updatedSelectedExercises.push(action.payload);\r\n\r\n        return {...state, \r\n          settingsData: { ...state.settingsData, \r\n          training: {...state.settingsData.training,\r\n          selectedExercises: updatedSelectedExercises }}\r\n        };\r\n      }\r\n\r\n      case ACTIONS.REMOVE_EXERCISE_FROM_SELECTEDEXERCISES: {\r\n        const updatedSelectedExercises = state.settingsData.training.selectedExercises;\r\n        const indexOfExerciseToRemoving = updatedSelectedExercises.indexOf(action.payload);\r\n        updatedSelectedExercises.splice(indexOfExerciseToRemoving, 1);\r\n\r\n        return {...state, \r\n          settingsData: { ...state.settingsData, \r\n          training: {...state.settingsData.training,\r\n          selectedExercises: updatedSelectedExercises }}\r\n        }\r\n      }\r\n\r\n      case ACTIONS.SET_SETTINGS_CHANGED_STATE: {\r\n        return { ...state, isSettingsChanged: action.payload };\r\n      }\r\n\r\n      case ACTIONS.RESET_NUTRITION_SETTINGS_TO_INITIAL: {\r\n        return { ...state, settingsData: { ...state.settingsData, nutrition: initialState.settingsData.nutrition }};\r\n      }\r\n\r\n      case ACTIONS.RESET_TRAINING_SETTINGS_TO_INITIAL: {\r\n        return { ...state, settingsData: { ...state.settingsData, training: initialState.settingsData.training }};\r\n      }\r\n\r\n      case ACTIONS.SET_CATEGORY: {\r\n        let category = action.payload.category;\r\n        return { ...state, [category]: action.payload.value };\r\n      }\r\n\r\n      case ACTIONS.SET_WARNING: {\r\n        return { ...state, warnings: { ...state.warnings, [action.payload.field]: action.payload.warning }}\r\n      }\r\n\r\n      case ACTIONS.CLEAR_WARNING: {\r\n        return { ...state, warning: ['', action.payload]};\r\n      }\r\n\r\n      default: return console.error(`Unknown action type: ${action.type}`);\r\n    }\r\n  }\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n\r\n  // EFFECTS\r\n\r\n  // SEARCH FOR SETTINGS IN LOCALSTORAGE\r\n  const saveSettingsToDatabase = async () => {\r\n    try {\r\n      await setDoc(doc(db, \"users\", String(props.userId)), {\r\n        settings: state.settingsData\r\n      }, \r\n      { merge: true });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    updateUserPersonalData(state.settingsData.account.username, state.settingsData.account.email, state.settingsData.account.password);\r\n  }\r\n\r\n  const clearDatabase = async (data) => {\r\n    try {\r\n      await setDoc(doc(db, \"users\", String(props.userId)), {\r\n        [data]: []\r\n      }, \r\n      { merge: true });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const getSettingsFromDatabase = async () => {\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.id === props.userId) {\r\n          if (user.data().settings) {\r\n            dispatch({ type: ACTIONS.SET_NEW_SETTINGS, payload: user.data().settings });\r\n            localStorage.setItem(\"settingsBackup\", JSON.stringify(user.data().settings));\r\n          }\r\n          else\r\n            saveSettingsToDatabase();\r\n        }\r\n      });\r\n    }\r\n\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const updateUserPersonalData = async (newUsername, newEmail, newPassword) => {\r\n    try {\r\n      await setDoc(doc(db, \"users\", String(props.userId)), {\r\n        username: newUsername,\r\n        email: newEmail,\r\n        password: newPassword\r\n      }, \r\n      { merge: true });\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  // LOADS SETTINGS FROM DATABASE\r\n  useEffect(() => {\r\n    getSettingsFromDatabase();\r\n\r\n  }, []);\r\n  \r\n  // BLURING AND DISABLING POINTER EVENTS ON BACKGROUND AFTER MOUNTING\r\n  useEffect(() => {\r\n    const wrapper = document.querySelector(\".wrapper\");\r\n    const rootElement = document.querySelector(\"#root\");\r\n    const hamburger = document.querySelector(\".left-section__hamburger\");\r\n    const accountIcon = document.querySelector(\".left-section__account\");\r\n    wrapper.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n    wrapper.style.pointerEvents = \"none\";\r\n    rootElement.style.zIndex = 97;\r\n    hamburger.style.display = \"none\";\r\n    accountIcon.style.display = \"none\";\r\n    \r\n    return (() => {\r\n      wrapper.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      wrapper.style.pointerEvents = \"auto\";\r\n      rootElement.style.zIndex = 99;\r\n      if (window.innerWidth < 769)\r\n        hamburger.style.display = \"flex\";\r\n        accountIcon.style.display = \"flex\";\r\n    })\r\n\r\n  }, []);\r\n\r\n  // BLURING AND DISABLING POINTER EVENTS ON WINDOW AFTER CONFIRM WINDOW MOUNTING\r\n  useEffect(() => {\r\n    const settingsWindow = document.querySelector(\".window\");\r\n    if (state.clearAllProducts || state.clearAllSeries) {\r\n      settingsWindow.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n      settingsWindow.style.pointerEvents = \"none\";\r\n    }\r\n    else {\r\n      settingsWindow.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      settingsWindow.style.pointerEvents = \"auto\";\r\n    }\r\n\r\n  }, [ state.clearAllProducts, state.clearAllSeries ]);\r\n\r\n  // CHECKS IF SETTINGS WERE CHANGED\r\n  useEffect(() => {\r\n    const backupSettings = localStorage.getItem(\"settingsBackup\");\r\n    const currentSettings = JSON.stringify(state.settingsData);\r\n\r\n    if (backupSettings === currentSettings)\r\n      dispatch({ type: ACTIONS.SET_SETTINGS_CHANGED_STATE, payload: false });\r\n    else\r\n      dispatch({ type: ACTIONS.SET_SETTINGS_CHANGED_STATE, payload: true });\r\n\r\n    return () => dispatch({ type: ACTIONS.SET_SETTINGS_CHANGED_STATE, payload: false });\r\n\r\n  }, [ state.settingsData ]);\r\n\r\n  // CHECKS IF OPTIONS CHECKBOXES WERE CHANGED\r\n  useEffect(() => {\r\n    for (let i = 0; i < Object.keys(optionsStates).length; i++) {\r\n      if (Object.values(optionsStates)[i] === true) {\r\n        dispatch({ type: ACTIONS.SET_SETTINGS_CHANGED_STATE, payload: true });\r\n        break;\r\n      }\r\n      else {\r\n        dispatch({ type: ACTIONS.SET_SETTINGS_CHANGED_STATE, payload: false });\r\n      }\r\n    }\r\n\r\n  }, [ optionsStates ]);\r\n  \r\n\r\n  // FUNCTIONS\r\n\r\n  const resetOptionsStates = () => {\r\n    Object.keys(optionsStates).forEach(key => {\r\n      optionsStates[key] = false;\r\n    });\r\n  }\r\n\r\n  const confirmClearAllProducts = () => {\r\n    dispatch({ type: ACTIONS.SET_CLEAR_ALL_PRODUCTS, payload: false });\r\n    clearDatabase(\"productList\");\r\n  }\r\n\r\n  const cancelClearAllProducts = () => {\r\n    dispatch({ type: ACTIONS.SET_CLEAR_ALL_PRODUCTS, payload: false });\r\n  }\r\n\r\n  const confirmClearAllSeries = () => {\r\n    dispatch({ type: ACTIONS.SET_CLEAR_ALL_SERIES, payload: false });\r\n    clearDatabase(\"seriesList\");\r\n  }\r\n\r\n  const cancelClearAllSeries = () => {\r\n    dispatch({ type: ACTIONS.SET_CLEAR_ALL_SERIES, payload: false });\r\n  }\r\n\r\n  const handleSettingsSaved = async (e) => {\r\n    const backupSettings = JSON.parse(localStorage.getItem(\"settingsBackup\"));\r\n    e.preventDefault();\r\n\r\n    if (optionsStates['clear-all-products'])\r\n      dispatch({ type: ACTIONS.SET_CLEAR_ALL_PRODUCTS, payload: true });\r\n    if (optionsStates['reset-nutrition-to-initial'])\r\n      dispatch({ type: ACTIONS.RESET_NUTRITION_SETTINGS_TO_INITIAL });\r\n    if (optionsStates['clear-all-series'])\r\n      dispatch({ type: ACTIONS.SET_CLEAR_ALL_SERIES, payload: true });\r\n    if (optionsStates['reset-training-to-initial'])\r\n      dispatch({ type: ACTIONS.RESET_TRAINING_SETTINGS_TO_INITIAL });\r\n\r\n    dispatch({ type: ACTIONS.SET_SETTINGS_CHANGED_STATE, payload: false });\r\n\r\n    // PERSONAL DATA VALIDATION\r\n    const personalDataValues = [\r\n      state.settingsData.account.username,\r\n      state.settingsData.account.email,\r\n      state.settingsData.account.password\r\n    ];\r\n    const personalDataKeys = [\r\n      \"username\",\r\n      \"email\",\r\n      \"password\"\r\n    ];\r\n    let isValidatedSuccessfully = true;\r\n\r\n    personalDataValues.forEach(((personalDataValue, index) => {\r\n      console.log(isFieldTooShort(personalDataValue));\r\n      if (!isFieldEmpty(personalDataValue)) {\r\n        if (!isFieldTooShort(personalDataValue)) {\r\n          if (!isFieldTooLong(personalDataValue)) {\r\n            dispatch({ type: ACTIONS.SET_WARNING, payload: { field: personalDataKeys[index], warning: '' }});\r\n          }\r\n          else {\r\n            dispatch({ type: ACTIONS.SET_WARNING, payload: { field: personalDataKeys[index], warning: warnings.maxLengthFail }});\r\n            dispatch({ type: ACTIONS.CHANGE_SETTINGS_DATA, payload: { key: personalDataKeys[index], value: \"\" }});\r\n            isValidatedSuccessfully = false;\r\n          }\r\n        }\r\n        else {\r\n          dispatch({ type: ACTIONS.SET_WARNING, payload: { field: personalDataKeys[index], warning: warnings.minLengthFail }});\r\n          dispatch({ type: ACTIONS.CHANGE_SETTINGS_DATA, payload: { key: personalDataKeys[index], value: \"\" }});\r\n          isValidatedSuccessfully = false;\r\n        }\r\n      }\r\n      else {\r\n        dispatch({ type: ACTIONS.CHANGE_SETTINGS_DATA, payload: { key: personalDataKeys[index], value: \"\" }});\r\n        dispatch({ type: ACTIONS.SET_WARNING, payload: { field: personalDataKeys[index], warning: warnings.emptyFail }});\r\n        isValidatedSuccessfully = false;\r\n      }\r\n\r\n      if (personalDataKeys[index] === \"email\") {\r\n        if (isEmailCorrect(personalDataValue)) {\r\n          dispatch({ type: ACTIONS.CLEAR_WARNING, payload: personalDataValue });\r\n        }\r\n        else {\r\n          dispatch({ type: ACTIONS.CHANGE_SETTINGS_DATA, payload: { key: personalDataKeys[index], value: \"\" }});\r\n          dispatch({ type: ACTIONS.SET_WARNING, payload: { field: personalDataKeys[index], warning: warnings.emailFail }});\r\n          isValidatedSuccessfully = false;\r\n        }\r\n      }\r\n    }));\r\n\r\n    // CHECKS IF ENTERED EMAIL ALREADY EXIST IN DATABASE\r\n    if (await isEmailExist(personalDataValues[1]) && state.settingsData.account.email !== backupSettings.account.email) {\r\n      console.log(\"exist\");\r\n      dispatch({ type: ACTIONS.SET_WARNING, payload: {field: personalDataKeys[1], warning: warnings.emailExist} });\r\n      dispatch({ type: ACTIONS.CHANGE_SETTINGS_DATA, payload: { key: personalDataKeys[1], value: \"\" }});\r\n      isValidatedSuccessfully = false;\r\n    }\r\n\r\n    // CHECKS IF ENTERED USERNAME ALREADY EXIST IN DATABASE\r\n    if (await isUsernameExist(personalDataValues[0]) && state.settingsData.account.username !== backupSettings.account.username) {\r\n      console.log(\"exist\");\r\n      dispatch({ type: ACTIONS.SET_WARNING, payload: {field: personalDataKeys[0], warning: warnings.usernameExist} });\r\n      dispatch({ type: ACTIONS.CHANGE_SETTINGS_DATA, payload: { key: personalDataKeys[0], value: \"\" }});\r\n      isValidatedSuccessfully = false;\r\n    }\r\n\r\n    if (isValidatedSuccessfully)\r\n      saveSettingsToDatabase();\r\n    props.updateGauges();\r\n    resetOptionsStates();\r\n  }\r\n\r\n  const handleSettingsCanceled = (e) => {\r\n    e.preventDefault();\r\n    getSettingsFromDatabase();\r\n    resetOptionsStates();\r\n    props.closeWindow();\r\n  }\r\n\r\n  const handleSettingsReset = (e) => {\r\n    e.preventDefault();\r\n    getSettingsFromDatabase();\r\n    resetOptionsStates();\r\n  }\r\n  const isFieldTooShort = (field) => {\r\n    if (field.length < 3)\r\n      return true;\r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isFieldTooLong = (field) => {\r\n    if (field.length > 32)\r\n      return true;\r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isFieldEmpty = (field) => {\r\n    if (field.length === 0)\r\n      return true;\r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isEmailCorrect = (email) => {\r\n    const regEx = /^[\\w.-]{3,}@{1}[\\w.-]{1,}[.]{1}\\w{1,}/i;\r\n    if (regEx.test(email))\r\n      return true;\r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isEmailExist = async (email) => {\r\n    let isExist = false;\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.data().email === email) {\r\n          isExist = true;\r\n        }});\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    return isExist;\r\n  }\r\n\r\n  const isUsernameExist = async (username) => {\r\n    let isExist = false;\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.data().username === username) {\r\n          isExist = true;\r\n        }});\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    return isExist;\r\n  }\r\n\r\n  const handleExerciseChoosing = (e) => {\r\n    if (e.target.style.backgroundColor) {\r\n      if (e.target.style.backgroundColor === \"transparent\")\r\n        dispatch({ type: ACTIONS.ADD_EXERCISE_TO_SELECTEDEXERCISES, payload: Number(e.target.id[e.target.id.length - 1]) });\r\n      else\r\n        dispatch({ type: ACTIONS.REMOVE_EXERCISE_FROM_SELECTEDEXERCISES, payload: Number(e.target.id[e.target.id.length - 1]) });\r\n    }\r\n\r\n    else {\r\n      if (e.target.children[0].style.backgroundColor === \"transparent\")\r\n        dispatch({ type: ACTIONS.ADD_EXERCISE_TO_SELECTEDEXERCISES, payload: Number(e.target.id[e.target.id.length - 1]) });\r\n      else\r\n        dispatch({ type: ACTIONS.REMOVE_EXERCISE_FROM_SELECTEDEXERCISES, payload: Number(e.target.id[e.target.id.length - 1]) });\r\n    }\r\n  }\r\n\r\n  const handleSettingOnChange = (e) => {\r\n    const isNumber = /[0-9]/;\r\n    const isZero = /^[0]{1}/;\r\n    const isWord = /[a-z\\s]/i;\r\n    console.log(e.target.id);\r\n\r\n    e.preventDefault();\r\n\r\n    if (e.target.id === 'editMealName') {\r\n      if (isWord.test(e.target.value[e.target.value.length - 1])) {\r\n        dispatch({ type: ACTIONS.CHANGE_SETTINGS_DATA, payload: { key: e.target.id, index: Number(e.target.attributes[\"data-key\"].value), value: e.target.value }})\r\n        dispatch({ type: ACTIONS.SET_WARNING, payload: { field: e.target.id, warning: \"\" } });\r\n      }\r\n      else {\r\n        dispatch({ type: ACTIONS.CHANGE_SETTINGS_DATA, payload: { key: e.target.id, index: Number(e.target.attributes[\"data-key\"].value), value: \"\"}})\r\n        dispatch({ type: ACTIONS.SET_WARNING, payload: { field: e.target.id, warning: warnings.editMealName } });\r\n      }\r\n    }\r\n    \r\n    if (isNumber.test(e.target.value[e.target.value.length - 1])) {\r\n      if (isZero.test(e.target.value)) {\r\n        dispatch({ type: ACTIONS.CHANGE_SETTINGS_DATA, payload: { key: e.target.id, value: 1 }});\r\n        dispatch({ type: ACTIONS.SET_WARNING, payload: { field: e.target.id, warning: warnings.isZero } });\r\n      }\r\n      else {\r\n        dispatch({ type: ACTIONS.CHANGE_SETTINGS_DATA, payload: { key: e.target.id, value: e.target.value }});\r\n        dispatch({ type: ACTIONS.SET_WARNING, payload: { field: e.target.id, warning: \"\" } });\r\n      }\r\n    }\r\n\r\n    else {\r\n      dispatch({ type: ACTIONS.CHANGE_SETTINGS_DATA, payload: { key: e.target.id, value: \"\" }});\r\n      dispatch({ type: ACTIONS.SET_WARNING, payload: { field: e.target.id, warning: warnings.macros } });\r\n    }\r\n\r\n    if ((e.target.id === \"username\") || (e.target.id === \"email\") || (e.target.id === \"password\")) {\r\n      dispatch({ type: ACTIONS.CHANGE_SETTINGS_DATA, payload: { key: e.target.id, value: e.target.value }});\r\n      dispatch({ type: ACTIONS.SET_WARNING, payload: { field: e.target.id, warning: \"\" } });\r\n    }\r\n  }\r\n\r\n  const handleCheckboxOnClick = (e) => {\r\n    setOptionsStates(prevOptions => { return {...prevOptions, [e.target.id]: !optionsStates[e.target.id]} });\r\n  }\r\n  \r\n  const handleCategorySwitch = (e) => {\r\n    e.preventDefault();\r\n    dispatch({type: ACTIONS.SET_CATEGORY, payload: { category: 'isAccountCategory', value: false }});\r\n    dispatch({type: ACTIONS.SET_CATEGORY, payload: { category: 'isNutritionCategory', value: false }});\r\n    dispatch({type: ACTIONS.SET_CATEGORY, payload: { category: 'isTrainingCategory', value: false }});\r\n    dispatch({type: ACTIONS.SET_CATEGORY, payload: { category: e.target.id, value: true }});\r\n    getSettingsFromDatabase();\r\n    resetOptionsStates();\r\n  }\r\n\r\n\r\n  // RETURN\r\n\r\n  return ReactDOM.createPortal (\r\n    <>\r\n    <div className=\"window__closer\" onClick={ handleSettingsCanceled }></div>\r\n    <div className=\"window\">\r\n      <header className=\"window__header\">\r\n          \r\n        <h2 className=\"window__header__heading\">Settings</h2>\r\n\r\n        <button className=\"window__header__back-button\" onClick={ handleSettingsCanceled }><FaChevronCircleLeft /></button>        \r\n        <button className=\"window__header__switch\">\r\n          <h3 \r\n            className={ state.isAccountCategory \r\n                        ? \"window__header__switch__left window__header__switch__left--selected\"\r\n                        : \"window__header__switch__left\" }\r\n            id=\"isAccountCategory\"\r\n            onClick={ handleCategorySwitch }>\r\n            Account\r\n          </h3>\r\n\r\n          <h3 \r\n            className={ state.isNutritionCategory\r\n                        ? \"window__header__switch__center window__header__switch__center--selected\"  \r\n                        : \"window__header__switch__center\" }\r\n            id=\"isNutritionCategory\"\r\n            onClick={ handleCategorySwitch }>\r\n            Nutrition        \r\n          </h3>\r\n          \r\n          <h3 \r\n            className={ state.isTrainingCategory  \r\n                        ? \"window__header__switch__right window__header__switch__right--selected\"  \r\n                        : \"window__header__switch__right\" }\r\n            id=\"isTrainingCategory\"\r\n            onClick={ handleCategorySwitch }>\r\n            Training\r\n          </h3>\r\n        </button>\r\n\r\n      </header>\r\n\r\n      <main className=\"window__form\">\r\n        { state.isAccountCategory &&\r\n          <form className=\"window__main window__main--add\" onSubmit={ handleSettingsSaved }>\r\n          \r\n            <button \r\n              className={ state.isSettingsChanged\r\n                          ? \"window__header__add-button\"\r\n                          : \"window__header__add-button window__header__add-button--disabled\" }\r\n              type=\"submit\"\r\n              style={{ zIndex: 11 }}\r\n              disabled={ state.isSettingsChanged ? false : true }><FaSave />\r\n            </button>\r\n            \r\n            <section className=\"window__main__section window__main__section--form\">\r\n              <h3 className=\"window__main__section__title\">Personal data</h3>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label\" htmlFor=\"username\">Username</label>\r\n                <input\r\n                  className=\"window__main__input-line__input\"  \r\n                  type=\"text\" \r\n                  id=\"username\"\r\n                  value={ state.settingsData.account.username } \r\n                  onChange={ handleSettingOnChange }\r\n                  placeholder={ state.warnings[\"username\"] ? state.warnings[\"username\"] : null }\r\n                  maxLength=\"32\"\r\n                  required>\r\n                </input>\r\n              </div>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label\" htmlFor=\"email\">E-mail</label>\r\n                <input\r\n                  className=\"window__main__input-line__input\"  \r\n                  type=\"email\" \r\n                  id=\"email\"\r\n                  value={ state.settingsData.account.email } \r\n                  onChange={ handleSettingOnChange }\r\n                  placeholder={ state.warnings[\"email\"] ? state.warnings[\"email\"] : null }\r\n                  maxLength=\"32\"\r\n                  required>\r\n                </input>\r\n              </div>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label\" htmlFor=\"password\">Password</label>\r\n                <input\r\n                  className=\"window__main__input-line__input\"  \r\n                  type=\"password\" \r\n                  id=\"password\"\r\n                  value={ state.settingsData.account.password } \r\n                  onChange={ handleSettingOnChange }\r\n                  placeholder={ state.warnings[\"password\"] ? state.warnings[\"password\"] : null }\r\n                  maxLength=\"32\"\r\n                  required>\r\n                </input>\r\n              </div>\r\n            </section>\r\n\r\n            <section className=\"window__bottom\">\r\n\r\n              <button \r\n                  className={\r\n                    state.isSettingsChanged\r\n                    ? \"window__bottom__tertiary-button\"\r\n                    : \"window__bottom__tertiary-button window__bottom__tertiary-button--disabled\"\r\n                  } \r\n                  type=\"button\"\r\n                  onClick={ handleSettingsReset }\r\n                  disabled={ state.isSettingsChanged ? false : true }>\r\n                  Reset\r\n              </button>\r\n\r\n              <div>\r\n                <button \r\n                  className=\"window__bottom__secondary-button\"\r\n                  type=\"button\" \r\n                  onClick={ handleSettingsCanceled }>\r\n                  Cancel\r\n                </button>\r\n\r\n                <button \r\n                  className={\r\n                    state.isSettingsChanged\r\n                    ? \"window__bottom__primary-button\"\r\n                    : \"window__bottom__primary-button window__bottom__primary-button--disabled\" \r\n                  }\r\n                  type=\"submit\"\r\n                  id=\"saveSettings\"\r\n                  value=\"Save\"\r\n                  disabled={ state.isSettingsChanged ? false : true }>\r\n                  Save\r\n                </button>\r\n              </div>\r\n\r\n          </section>\r\n          </form>\r\n        }\r\n\r\n        { state.isNutritionCategory &&\r\n          <form className=\"window__main window__main--add\" onSubmit={ handleSettingsSaved }>\r\n            \r\n            <button \r\n              className={ state.isSettingsChanged\r\n                          ? \"window__header__add-button\"\r\n                          : \"window__header__add-button window__header__add-button--disabled\" }\r\n              type=\"submit\"\r\n              style={{ zIndex: 11 }}\r\n              disabled={ state.isSettingsChanged ? false : true }><FaSave />\r\n            </button>\r\n            \r\n            <section className=\"window__main__section window__main__section--form\">\r\n              <h3 className=\"window__main__section__title\">Daily demand</h3>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label\" htmlFor=\"proteins\">Proteins</label>\r\n                <input\r\n                  className=\"window__main__input-line__input\"  \r\n                  type=\"text\" \r\n                  id=\"proteins\"\r\n                  value={ state.settingsData.nutrition.dailyDemand.proteins } \r\n                  onChange={ handleSettingOnChange }\r\n                  placeholder={ state.warnings[\"proteins\"] ? state.warnings[\"proteins\"] : null }\r\n                  maxLength=\"4\"\r\n                  required>\r\n                </input>\r\n                <span className=\"window__main__input-line__unit\">g</span>\r\n              </div>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label\" htmlFor=\"fats\">Fats</label>\r\n                <input\r\n                  className=\"window__main__input-line__input\"  \r\n                  type=\"text\" \r\n                  id=\"fats\"\r\n                  value={ state.settingsData.nutrition.dailyDemand.fats } \r\n                  onChange={ handleSettingOnChange }\r\n                  placeholder={ state.warnings[\"fats\"] ? state.warnings[\"fats\"] : null }\r\n                  maxLength=\"4\"\r\n                  required>\r\n                </input>\r\n                <span className=\"window__main__input-line__unit\">g</span>\r\n              </div>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label\" htmlFor=\"carbs\">Carbohydrates</label>\r\n                <input\r\n                  className=\"window__main__input-line__input\"  \r\n                  type=\"text\" \r\n                  id=\"carbs\"\r\n                  value={ state.settingsData.nutrition.dailyDemand.carbs } \r\n                  onChange={ handleSettingOnChange }\r\n                  placeholder={ state.warnings[\"carbs\"] ? state.warnings[\"carbs\"] : null }\r\n                  maxLength=\"4\"\r\n                  required>\r\n                </input>\r\n                <span className=\"window__main__input-line__unit\">g</span>\r\n              </div>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label\" htmlFor=\"kcal\">Calories</label>\r\n                <input\r\n                  className=\"window__main__input-line__input\"  \r\n                  type=\"text\" \r\n                  id=\"kcal\"\r\n                  value={ state.settingsData.nutrition.dailyDemand.kcal } \r\n                  onChange={ handleSettingOnChange }\r\n                  placeholder={ state.warnings[\"kcal\"] ? state.warnings[\"kcal\"] : null }\r\n                  maxLength=\"4\"\r\n                  required>\r\n                </input>\r\n                <span className=\"window__main__input-line__unit\">kcal</span>\r\n              </div>\r\n            </section>\r\n\r\n            <section className=\"window__main__section window__main__section--form\">\r\n              <h3 className=\"window__main__section__title\">Meals</h3>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label\" htmlFor=\"setMealsNumber\">Number of meals</label>\r\n                <input\r\n                  className=\"window__main__input-line__input\"  \r\n                  type=\"text\" \r\n                  id=\"setMealsNumber\"\r\n                  value={ state.settingsData.nutrition.numberOfMeals } \r\n                  onChange={ handleSettingOnChange }\r\n                  placeholder={ state.warnings[\"setMealsNumber\"] ? state.warnings[\"setMealsNumber\"] : null }\r\n                  maxLength=\"1\"\r\n                  required>\r\n                </input>\r\n                <span className=\"window__main__input-line__unit\">meals</span>\r\n              </div>\r\n              \r\n              { Object.values(state.settingsData.nutrition.namesOfMeals).map((meal, index) => {\r\n                if (state.settingsData.nutrition.numberOfMeals > index) {\r\n                  return (\r\n                    <div key={ index } className=\"window__main__input-line\">\r\n                      <label className=\"window__main__input-line__label\" htmlFor=\"editMealName\">{`Set meal nr ${ index + 1 } name`}</label>\r\n                      <input \r\n                        className=\"window__main__input-line__input\"\r\n                        data-key={ index } \r\n                        type=\"text\" \r\n                        id=\"editMealName\"\r\n                        value={ state.settingsData.nutrition.namesOfMeals[index] } \r\n                        onChange={ handleSettingOnChange }\r\n                        placeholder={ state.warnings[\"editMealName\"] ? state.warnings[\"editMealName\"] : null }\r\n                        required>\r\n                      </input>\r\n                    </div>\r\n                  ) \r\n                }\r\n\r\n                else {\r\n                  return (\r\n                    null\r\n                  )\r\n                }\r\n              })}\r\n            </section>\r\n\r\n            <section className=\"window__main__section window__main__section--form\">\r\n              <h3 className=\"window__main__section__title\">Options</h3>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label window__main__input-line__label--checkbox\" htmlFor=\"clearAllProducts\">Clear all products</label>\r\n                <button \r\n                  className=\"window__main__input-line__checkbox\"\r\n                  id=\"clear-all-products\"\r\n                  type=\"button\"\r\n                  onClick={ handleCheckboxOnClick }>\r\n                  <div \r\n                    className=\"window__main__input-line__checkbox__background\" \r\n                    id=\"clear-all-products\"\r\n                    style={ optionsStates[\"clear-all-products\"] ? {backgroundColor: \"#7500AF\"} : {backgroundColor: \"transparent\"} }>\r\n                  </div>\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label window__main__input-line__label--checkbox\" htmlFor=\"resetNutritionSettingsToInitial\">Reset nutrition settings to initial</label>\r\n                <button \r\n                  className=\"window__main__input-line__checkbox\"\r\n                  id=\"reset-nutrition-to-initial\"\r\n                  type=\"button\"\r\n                  onClick={ handleCheckboxOnClick }>\r\n                  <div \r\n                    className=\"window__main__input-line__checkbox__background\" \r\n                    id=\"reset-nutrition-to-initial\"\r\n                    style={ optionsStates[\"reset-nutrition-to-initial\"] ? {backgroundColor: \"#7500AF\"} : {backgroundColor: \"transparent\"} }>\r\n                  </div>\r\n                </button>\r\n              </div>\r\n            \r\n            </section>\r\n\r\n            <section className=\"window__bottom\">\r\n\r\n              <button \r\n                  className={\r\n                    state.isSettingsChanged\r\n                    ? \"window__bottom__tertiary-button\"\r\n                    : \"window__bottom__tertiary-button window__bottom__tertiary-button--disabled\"\r\n                  } \r\n                  type=\"button\"\r\n                  onClick={ handleSettingsReset }\r\n                  disabled={ state.isSettingsChanged ? false : true }>\r\n                  Reset\r\n              </button>\r\n\r\n              <div>\r\n                <button \r\n                  className=\"window__bottom__secondary-button\"\r\n                  type=\"button\" \r\n                  onClick={ handleSettingsCanceled }>\r\n                  Cancel\r\n                </button>\r\n\r\n                <button \r\n                  className={\r\n                    state.isSettingsChanged\r\n                    ? \"window__bottom__primary-button\"\r\n                    : \"window__bottom__primary-button window__bottom__primary-button--disabled\" \r\n                  }\r\n                  type=\"submit\"\r\n                  id=\"saveSettings\"\r\n                  value=\"Save\"\r\n                  disabled={ state.isSettingsChanged ? false : true }>\r\n                  Save\r\n                </button>\r\n              </div>\r\n\r\n          </section>\r\n          </form>\r\n        }\r\n\r\n        { state.isTrainingCategory &&\r\n          <form className=\"window__main window__main--add\" onSubmit={ handleSettingsSaved }>\r\n          \r\n            <button \r\n              className={ state.isSettingsChanged\r\n                          ? \"window__header__add-button\"\r\n                          : \"window__header__add-button window__header__add-button--disabled\" }\r\n              type=\"submit\"\r\n              style={{ zIndex: 11 }}\r\n              disabled={ state.isSettingsChanged ? false : true }><FaSave />\r\n            </button>\r\n            \r\n            <section className=\"window__main__section window__main__section--form\">\r\n              \r\n              <h3 className=\"window__main__section__title\">Exercises</h3>\r\n              \r\n              { exercises.map(exercise => {\r\n                  return (\r\n                    <div key={ exercise.id } className=\"window__main__input-line\">\r\n                      <label className=\"window__main__input-line__label window__main__input-line__label--checkbox\" htmlFor={\"exercise\"+ exercise.id }>{ exercise.name }</label>\r\n                      <button \r\n                        className=\"window__main__input-line__checkbox\"\r\n                        id={\"exercise\"+ exercise.id }\r\n                        type=\"button\"\r\n                        onClick={ handleExerciseChoosing }>\r\n                        <div \r\n                          className=\"window__main__input-line__checkbox__background\" \r\n                          id={\"exercise\"+ exercise.id }\r\n                          style={ state.settingsData.training.selectedExercises.includes(exercise.id) ? {backgroundColor: \"#7500AF\"} : {backgroundColor: \"transparent\"} }>\r\n                        </div>\r\n                      </button>\r\n                    </div>\r\n                  )}) \r\n                }\r\n\r\n            </section>\r\n\r\n            <section className=\"window__main__section window__main__section--form\">\r\n              <h3 className=\"window__main__section__title\">Options</h3>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label window__main__input-line__label--checkbox\" htmlFor=\"clear-all-series\">Clear all series</label>\r\n                <button \r\n                  className=\"window__main__input-line__checkbox\"\r\n                  id=\"clear-all-series\"\r\n                  type=\"button\"\r\n                  onClick={ handleCheckboxOnClick }>\r\n                  <div \r\n                    className=\"window__main__input-line__checkbox__background\" \r\n                    id=\"clear-all-series\"\r\n                    style={ optionsStates[\"clear-all-series\"] ? {backgroundColor: \"#7500AF\"} : {backgroundColor: \"transparent\"} }>\r\n                  </div>\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"window__main__input-line\">\r\n                <label className=\"window__main__input-line__label window__main__input-line__label--checkbox\" htmlFor=\"reset-training-to-initial\">Reset training settings to initial</label>\r\n                <button \r\n                  className=\"window__main__input-line__checkbox\"\r\n                  id=\"reset-training-to-initial\"\r\n                  type=\"button\"\r\n                  onClick={ handleCheckboxOnClick }>\r\n                  <div \r\n                    className=\"window__main__input-line__checkbox__background\" \r\n                    id=\"reset-training-to-initial\"\r\n                    style={ optionsStates[\"reset-training-to-initial\"] ? {backgroundColor: \"#7500AF\"} : {backgroundColor: \"transparent\"} }>\r\n                  </div>\r\n                </button>\r\n              </div>\r\n            \r\n            </section>\r\n\r\n            <section className=\"window__bottom\">\r\n\r\n              <button \r\n                  className={\r\n                    state.isSettingsChanged\r\n                    ? \"window__bottom__tertiary-button\"\r\n                    : \"window__bottom__tertiary-button window__bottom__tertiary-button--disabled\"\r\n                  } \r\n                  type=\"button\"\r\n                  onClick={ handleSettingsReset }\r\n                  disabled={ state.isSettingsChanged ? false : true }>\r\n                  Reset\r\n              </button>\r\n\r\n              <div>\r\n                <button \r\n                  className=\"window__bottom__secondary-button\"\r\n                  type=\"button\" \r\n                  onClick={ handleSettingsCanceled }>\r\n                  Cancel\r\n                </button>\r\n\r\n                <button \r\n                  className={\r\n                    state.isSettingsChanged\r\n                    ? \"window__bottom__primary-button\"\r\n                    : \"window__bottom__primary-button window__bottom__primary-button--disabled\" \r\n                  }\r\n                  type=\"submit\"\r\n                  id=\"saveSettings\"\r\n                  value=\"Save\"\r\n                  disabled={ state.isSettingsChanged ? false : true }>\r\n                  Save\r\n                </button>\r\n              </div>\r\n\r\n          </section>\r\n          </form>\r\n        }\r\n      </main>\r\n    </div>\r\n\r\n    { state.clearAllSeries && \r\n      <section className=\"window window--login\">\r\n        <header className=\"window__header\">\r\n          <h2 className=\"window__header__heading\">Clear all?</h2> \r\n        </header>\r\n\r\n        <main className=\"window__main\">\r\n          <h3 className=\"window__main__message\">Are you sure you want to clear all series?</h3>\r\n        </main>\r\n\r\n        <section className=\"window__bottom\">\r\n          <button className=\"window__bottom__secondary-button\" onClick={ cancelClearAllSeries }>Cancel</button>\r\n          <button className=\"window__bottom__primary-button\" onClick={ confirmClearAllSeries }>Remove</button>\r\n        </section>\r\n      </section>\r\n    }\r\n\r\n    { state.clearAllProducts &&\r\n      <section className=\"window window--login\">\r\n        <header className=\"window__header\">\r\n          <h2 className=\"window__header__heading\">Clear all?</h2> \r\n        </header>\r\n\r\n        <main className=\"window__main\">\r\n          <h3 className=\"window__main__message\">Are you sure you want to clear all products?</h3>\r\n        </main>\r\n\r\n        <section className=\"window__bottom\">\r\n          <button className=\"window__bottom__secondary-button\" onClick={ cancelClearAllProducts }>Cancel</button>\r\n          <button className=\"window__bottom__primary-button\" onClick={ confirmClearAllProducts }>Remove</button>\r\n        </section>\r\n      </section>\r\n    }\r\n\r\n    </>,\r\n    document.getElementById(\"portal\")\r\n  )\r\n}","// IMPORTS\r\n\r\nimport { React, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { FaChevronCircleLeft } from 'react-icons/fa';\r\nimport logo from '../../logo.png';\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function About({ previousPage, closeWindow }) {\r\n\r\n  // EFFECTS\r\n\r\n  // BLURING AND DISABLING POINTER EVENTS ON BACKGROUND AFTER MOUNTING\r\n  useEffect(() => {\r\n    const wrapper = document.querySelector(\".wrapper\");\r\n    const rootElement = document.querySelector(\"#root\");\r\n    const hamburger = document.querySelector(\".left-section__hamburger\");\r\n    const accountIcon = document.querySelector(\".left-section__account\");\r\n    wrapper.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n    wrapper.style.pointerEvents = \"none\";\r\n    rootElement.style.zIndex = 97;\r\n    hamburger.style.display = \"none\";\r\n    accountIcon.style.display = \"none\";\r\n    \r\n    return (() => {\r\n      wrapper.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      wrapper.style.pointerEvents = \"auto\";\r\n      rootElement.style.zIndex = 99;\r\n      \r\n      if (window.innerWidth < 769)\r\n        hamburger.style.display = \"flex\";\r\n        accountIcon.style.display = \"flex\";\r\n    })\r\n\r\n  }, []);\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const handleBackToPreviousPage = (e) => {\r\n    e.preventDefault();\r\n    closeWindow();\r\n  }\r\n\r\n\r\n  // RETURN\r\n\r\n  return ReactDOM.createPortal (\r\n    <>\r\n    <div className=\"window__closer\" onClick={ handleBackToPreviousPage }></div> \r\n    <div className=\"window\">\r\n\r\n      <header className=\"window__header\">\r\n        <h2 className=\"window__header__heading\">About</h2>\r\n        <button className=\"window__header__back-button\" onClick={ handleBackToPreviousPage }><FaChevronCircleLeft /></button>\r\n      </header>\r\n\r\n      <main className=\"window__main\">\r\n        <section className=\"window__main__section\">\r\n          <img className=\"window__main__section__logo\" src={ logo } alt=\"Dietapp logo\"></img>\r\n          <h1 className=\"left-section__logo-container__title\">Diet\r\n            <span className=\"left-section__logo-container__title__right\">app</span>\r\n          </h1>\r\n        </section>\r\n        <section className=\"window__main__section\"> \r\n          <h3 className=\"window__main__section__title\">Info</h3>\r\n          <p className=\"window__main__section__text\">The Dietapp is a complex nutrition and training organizer.\r\n           Made to improve my skills in creating web apps using React,\r\n           React Hooks, SCSS and Firebase.</p>\r\n        </section>\r\n\r\n        <section className=\"window__main__section\"> \r\n          <h3 className=\"window__main__section__title\">Features</h3>\r\n          <p className=\"window__main__section__text\">You can manually set your daily demand as well as your exercises\r\n           which you are doing on training. An app saves data you entered\r\n           and makes a several operations on these like counting macronutrients,\r\n           progression made in training, or just storing these for any time you want.</p>\r\n        </section>\r\n\r\n        <section className=\"window__main__section\"> \r\n          <h3 className=\"window__main__section__title\">Idea</h3>\r\n          <p className=\"window__main__section__text\">Whole idea of the app is about my main hobby which are dietetics and\r\n           bodybuilding. After 3 years of being a fit, I have included the most useful\r\n           features to control your fit life.</p>\r\n        </section>\r\n\r\n        <section className=\"window__main__section\" style={{ marginTop: \"40px\" }}>\r\n          <h3 className=\"window__main__section__text\">© 2021 Karol Jurczyński</h3>\r\n        </section>\r\n      </main>\r\n\r\n      <section className=\"window__bottom\">\r\n        <div></div>\r\n        <button className=\"window__bottom__primary-button\" type=\"button\" onClick={ handleBackToPreviousPage }>Back</button>\r\n      </section>\r\n\r\n    </div>\r\n    </>,\r\n    document.getElementById('portal')\r\n  )\r\n}","export default \"data:image/png;base64,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\"","// IMPORTS\r\n\r\nimport { React, useReducer, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { FaChevronCircleLeft, FaChevronCircleRight } from 'react-icons/fa';\r\n\r\n\r\nimport { db } from '../../index'; \r\nimport { collection, addDoc, getDocs } from \"firebase/firestore\";\r\n\r\nimport { init, send } from 'emailjs-com'\r\n\r\ninit(\"user_f86s58XiiAbqNCi2GgiUB\");\r\n\r\n\r\n// VARIABLES\r\n\r\nconst warnings = {\r\n  loginFail: \"Incorrect login or password!\",\r\n  passwordsFail: \"Passwords are not the same!\",\r\n  emailFail: \"Incorrect e-mail!\",\r\n  minLengthFail: \"Field is too short!\",\r\n  maxLengthFail: \"Field is too long!\",\r\n  emptyFail: \"Field is empty!\",\r\n  usernameExist: \"Username exists in database!\",\r\n  emailExist: \"E-mail exists in database!\",\r\n}\r\n\r\nconst initialState = {\r\n  isSignUpWindow: false,\r\n  isPasswordForgotten: false,\r\n  isFormCompleted: false,\r\n  warnings: {\r\n    signUpUsername: \"\",\r\n    signUpPassword: \"\",\r\n    signUpConfirmPassword: \"\",\r\n    signUpEmail: \"\",\r\n    logInUsername: \"\",\r\n    logInPassword: \"\"\r\n  },\r\n  formData: {\r\n    signUpUsername: \"\",\r\n    signUpPassword: \"\",\r\n    signUpConfirmPassword: \"\",\r\n    signUpEmail: \"\",\r\n    logInUsername: \"user\",\r\n    logInPassword: \"password\",\r\n    forgotPasswordEmail: \"\"\r\n  }\r\n}\r\n\r\nconst ACTIONS = {\r\n  NEGATE_SIGN_UP_WINDOW: 'negate-sign-up-window',\r\n  NEGATE_IS_PASSWORD_FORGOTTEN: 'negate-is-password-forgotten',\r\n  CHANGE_USER_DATA: 'change-user-data',\r\n  CHANGE_IS_FORM_COMPLETED: 'changer-is-form-completed',\r\n  SET_WARNING: 'set-warning',\r\n  CLEAR_ALL_WARNINGS: 'clear-all-warnings'\r\n}\r\n\r\n\r\n// COMPONENT\r\n\r\nexport default function Login({ isLogout, setUserStatus, setUserId, setUserPersonalData, closeWindow }) {\r\n\r\n  // HOOKS\r\n\r\n  const reducer = (state, action) => {\r\n    switch (action.type) {\r\n      case ACTIONS.NEGATE_SIGN_UP_WINDOW: {\r\n        return { ...state, isSignUpWindow: !state.isSignUpWindow }\r\n      }\r\n\r\n      case ACTIONS.NEGATE_IS_PASSWORD_FORGOTTEN: {\r\n        return { ...state, isPasswordForgotten: !state.isPasswordForgotten }\r\n      }\r\n\r\n      case ACTIONS.CHANGE_USER_DATA: {\r\n        return { ...state, formData: { ...state.formData, [action.payload.key]: action.payload.value }};\r\n      }\r\n\r\n      case ACTIONS.CHANGE_IS_FORM_COMPLETED: {\r\n        return { ...state, isFormCompleted: action.payload }\r\n      }\r\n\r\n      case ACTIONS.SET_WARNING: {\r\n        return { ...state, warnings: { ...state.warnings, [action.payload.field]: action.payload.warning }}\r\n      }\r\n\r\n      case ACTIONS.CLEAR_ALL_WARNINGS: {\r\n        return { ...state, warnings: initialState.warnings }\r\n      }\r\n    }\r\n  }\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n\r\n  // EFFECTS\r\n\r\n  // BLURING AND DISABLING POINTER EVENTS ON BACKGROUND AFTER MOUNTING\r\n  useEffect(() => {\r\n    const wrapper = document.querySelector(\".wrapper\");\r\n    const rootElement = document.querySelector(\"#root\");\r\n    const hamburger = document.querySelector(\".left-section__hamburger\");\r\n    const accountIcon = document.querySelector(\".left-section__account\");\r\n    wrapper.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n    wrapper.style.pointerEvents = \"none\";\r\n    rootElement.style.zIndex = 97;\r\n    hamburger.style.display = \"none\";\r\n    accountIcon.style.display = \"none\";\r\n    \r\n    return (() => {\r\n      wrapper.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n      wrapper.style.pointerEvents = \"auto\";\r\n      rootElement.style.zIndex = 99;\r\n      if (window.innerWidth < 769)\r\n        hamburger.style.display = \"flex\";\r\n        accountIcon.style.display = \"flex\";\r\n    })\r\n\r\n  }, []);\r\n\r\n  // BLURING AND DISABLING POINTER EVENTS ON LOGIN WINDOW AFTER RESTORING PASSWORD WINDOW MOUNTING\r\n  useEffect(() => {\r\n    const loginWindow = document.querySelector(\".window--login\");\r\n    if (loginWindow) {\r\n      if (state.isPasswordForgotten) {\r\n        loginWindow.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\r\n        loginWindow.style.pointerEvents = \"none\";\r\n      }\r\n      else {\r\n        loginWindow.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\r\n        loginWindow.style.pointerEvents = \"auto\";\r\n      }\r\n    }\r\n\r\n  }, [ state.isPasswordForgotten ]);\r\n\r\n  // CHECKS IF FORM IS COMPLETED\r\n  useEffect(() => {\r\n    const signUpCondition = state.formData.signUpUsername && state.formData.signUpPassword && state.formData.signUpConfirmPassword && state.formData.signUpEmail;\r\n    const logInCondition = state.formData.logInUsername && state.formData.logInPassword;\r\n\r\n    if (state.isSignUpWindow) {\r\n      if (signUpCondition)\r\n        dispatch({ type: ACTIONS.CHANGE_IS_FORM_COMPLETED, payload: true });\r\n      else\r\n        dispatch({ type: ACTIONS.CHANGE_IS_FORM_COMPLETED, payload: false });\r\n    }\r\n\r\n    else {\r\n      if (logInCondition)\r\n        dispatch({ type: ACTIONS.CHANGE_IS_FORM_COMPLETED, payload: true });\r\n      else\r\n        dispatch({ type: ACTIONS.CHANGE_IS_FORM_COMPLETED, payload: false });\r\n    }\r\n     \r\n  }, [ state.formData ]);\r\n\r\n\r\n  // FUNCTIONS\r\n\r\n  const isFieldTooShort = (field) => {\r\n    if (field.length < 3)\r\n      return true;\r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isFieldTooLong = (field) => {\r\n    if (field.length > 32)\r\n      return true;\r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isFieldEmpty = (field) => {\r\n    if (field.length === 0)\r\n      return true;\r\n    else\r\n      return false;\r\n  }\r\n\r\n  const isEmailCorrect = (email) => {\r\n    const regEx = /^[\\w.-]{3,}@{1}[\\w.-]{1,}[.]{1}\\w{1,}/i;\r\n    if (regEx.test(email))\r\n      return true;\r\n    else\r\n      return false;\r\n  }\r\n\r\n  const handleFormTypeChanging = (e) => {\r\n    e.preventDefault();\r\n    dispatch({ type: ACTIONS.NEGATE_SIGN_UP_WINDOW });\r\n  }\r\n\r\n  const handlePrimaryButton = (e) => {\r\n    e.preventDefault();\r\n    state.isSignUpWindow ? handleSignUpUser() : handleLoginUser();\r\n  }\r\n\r\n  const validateSignUpInputs = async () => {\r\n    const formDataValues = [ \r\n      state.formData.signUpUsername, \r\n      state.formData.signUpPassword, \r\n      state.formData.signUpConfirmPassword, \r\n      state.formData.signUpEmail\r\n    ];\r\n    const formDataKeys = [ \r\n      \"signUpUsername\", \r\n      \"signUpPassword\",   \r\n      \"signUpConfirmPassword\", \r\n      \"signUpEmail\"\r\n    ];\r\n    let isValidatedSuccessfully = true;\r\n\r\n    formDataValues.forEach((formValue, index) => {\r\n      if (!isFieldEmpty(formValue)) {\r\n        if (!isFieldTooShort(formValue)) {\r\n          if (!isFieldTooLong(formValue)) {\r\n            dispatch({type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: ''}});\r\n          }\r\n          else {\r\n            dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: warnings[\"maxLengthFail\"]} });\r\n            dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[index], value: \"\" }});\r\n            isValidatedSuccessfully = false;\r\n          }\r\n        }\r\n        else {\r\n          dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: warnings[\"minLengthFail\"]} });\r\n          dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[index], value: \"\" }});\r\n          isValidatedSuccessfully = false;\r\n        }\r\n      }\r\n      else {\r\n        dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: warnings[\"emptyFail\"]} });\r\n        dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[index], value: \"\" }});\r\n        isValidatedSuccessfully = false;\r\n      }\r\n      \r\n      if (formDataKeys[index] === \"signUpEmail\") {\r\n        if (!isEmailCorrect(formDataValues[index])) {\r\n          dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: warnings[\"emailFail\"]} });\r\n          dispatch({ type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[index], value: \"\" }});\r\n          isValidatedSuccessfully = false;\r\n        }\r\n        else {\r\n          dispatch({type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: ''}});\r\n        }\r\n      }\r\n\r\n      if (formDataKeys[index] === \"signUpConfirmPassword\") {\r\n        if (state.formData.signUpConfirmPassword !== state.formData.signUpPassword) {\r\n          dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: warnings[\"passwordsFail\"]} });\r\n          dispatch({ type: ACTIONS.SET_WARNING, payload: {field: \"signUpPassword\", warning: warnings[\"passwordsFail\"]} });\r\n          dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[index], value: \"\" }});\r\n          dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: \"signUpPassword\", value: \"\" }});\r\n          isValidatedSuccessfully = false;\r\n        }\r\n        else {\r\n          dispatch({type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: ''}});\r\n        }\r\n      }\r\n    });\r\n\r\n    if (await isEmailExist(formDataValues[3])) {\r\n      console.log(\"exist\");\r\n      dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[3], warning: warnings[\"emailExist\"]} });\r\n      dispatch({ type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[3], value: \"\" }});\r\n      isValidatedSuccessfully = false;\r\n    }\r\n\r\n    if (await isUsernameExist(formDataValues[0])) {\r\n      console.log(\"exist\");\r\n      dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[0], warning: warnings[\"usernameExist\"]} });\r\n      dispatch({ type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[0], value: \"\" }});\r\n      isValidatedSuccessfully = false;\r\n    }\r\n\r\n    if (isValidatedSuccessfully) {\r\n      addUser();\r\n      dispatch({ type: ACTIONS.NEGATE_SIGN_UP_WINDOW });\r\n      dispatch({ type: ACTIONS.CLEAR_ALL_WARNINGS });\r\n    }\r\n  }\r\n\r\n  const validateLogInInputs = async () => {\r\n    const formDataValues = [ \r\n      state.formData.logInUsername, \r\n      state.formData.logInPassword, \r\n    ];\r\n    const formDataKeys = [ \r\n      \"logInUsername\", \r\n      \"logInPassword\",   \r\n    ];\r\n    let isValidatedSuccessfully = true;\r\n\r\n    formDataValues.forEach((formValue, index) => {\r\n      if (!isFieldEmpty(formValue)) {\r\n        if (!isFieldTooShort(formValue)) {\r\n          if (!isFieldTooLong(formValue)) {\r\n            dispatch({type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: ''}});\r\n          }\r\n          else {\r\n            dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: warnings[\"maxLengthFail\"]} });\r\n            dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[index], value: \"\" }});\r\n            isValidatedSuccessfully = false;\r\n          }\r\n        }\r\n        else {\r\n          dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: warnings[\"minLengthFail\"]} });\r\n          dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[index], value: \"\" }});\r\n          isValidatedSuccessfully = false;\r\n        }\r\n      }\r\n      else {\r\n        dispatch({ type: ACTIONS.SET_WARNING, payload: {field: formDataKeys[index], warning: warnings[\"emptyFail\"]} });\r\n        dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: formDataKeys[index], value: \"\" }});\r\n        isValidatedSuccessfully = false;\r\n      }\r\n    });\r\n\r\n    if (isValidatedSuccessfully) {\r\n      if (!await logInUser()) {\r\n        dispatch({ type: ACTIONS.SET_WARNING, payload: {field: \"logInUsername\", warning: warnings[\"loginFail\"]} });\r\n        dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: \"logInUsername\", value: \"\" }});\r\n        dispatch({ type: ACTIONS.SET_WARNING, payload: {field: \"logInPassword\", warning: warnings[\"loginFail\"]} });\r\n        dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: \"logInPassword\", value: \"\" }});\r\n      }\r\n    }\r\n  }\r\n      \r\n\r\n  const handleSignUpUser = async () => {\r\n    validateSignUpInputs();\r\n  }\r\n\r\n  const addUser = async () => {\r\n    try {\r\n      await addDoc(collection(db, \"users\"), {\r\n        username: state.formData.signUpUsername,\r\n        password: state.formData.signUpPassword,\r\n        email: state.formData.signUpEmail\r\n      });\r\n      \r\n    } \r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const handleLoginUser = async () => {\r\n    validateLogInInputs(); \r\n  }\r\n\r\n  const logInUser = async () => {\r\n    let isLoggedSuccessfully = false;\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.data().username === state.formData.logInUsername) {\r\n          if (user.data().password === state.formData.logInPassword) {\r\n            isLoggedSuccessfully = true;\r\n            setUserPersonalData(user.data().username, user.data().email, user.data().password);\r\n            setUserId(user.id);\r\n            setUserStatus(\"Logged\");\r\n            closeWindow();\r\n          }\r\n          else {\r\n            isLoggedSuccessfully = false;\r\n            clearFormData();\r\n          }   \r\n        }\r\n\r\n        else {\r\n          isLoggedSuccessfully = false;\r\n          clearFormData(); \r\n        }\r\n      });\r\n    }\r\n\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n    return isLoggedSuccessfully;\r\n  }\r\n\r\n  const handleLogoutUser = (e) => {\r\n    e.preventDefault();\r\n    setUserStatus(\"Log in\");\r\n    setUserId(0);\r\n    closeWindow();\r\n  }\r\n\r\n  const handleCancel = (e) => {\r\n    e.preventDefault();\r\n    closeWindow();\r\n  }\r\n  \r\n  const clearFormData = () => {\r\n    Object.keys(state.formData).forEach(key => {\r\n      dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: [key], value: \"\" }});\r\n    });\r\n  }\r\n\r\n  const handlePasswordRestoringWindow = (e) => {\r\n    e.preventDefault();\r\n    dispatch({ type: ACTIONS.NEGATE_IS_PASSWORD_FORGOTTEN });\r\n    clearFormData();\r\n  }\r\n\r\n  const isEmailExist = async (email) => {\r\n    let isExist = false;\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.data().email === email) {\r\n          isExist = true;\r\n        }});\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    return isExist;\r\n  }\r\n\r\n  const isUsernameExist = async (username) => {\r\n    let isExist = false;\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.data().username === username) {\r\n          isExist = true;\r\n        }});\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    return isExist;\r\n  }\r\n\r\n  const getUserPasswordFromEmail = async () => {\r\n    let password = \"\";\r\n    try {\r\n      const querySnapshot = await getDocs(collection(db, \"users\"));\r\n      querySnapshot.forEach(user => {\r\n        if (user.data().email === state.formData.forgotPasswordEmail) {\r\n          password = user.data().password;\r\n        }});\r\n    }\r\n    catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    return password;\r\n  }\r\n\r\n  const handlePasswordRestoring = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (await isEmailExist(state.formData.forgotPasswordEmail)) {\r\n      const templateParams = {\r\n        user_email: state.formData.forgotPasswordEmail,\r\n        user_password: await getUserPasswordFromEmail()\r\n      };\r\n\r\n      await send(\"service_vvs15qe\", \"template_698pq4k\", templateParams)\r\n      .then(res => { alert(\"Check your e-mail inbox.\") })\r\n      .catch(err => { alert(\"Error with email sending, check console.\"); console.error(err) })\r\n    }\r\n    else {\r\n      alert(\"Account with entered e-mail does not exist!\");\r\n    }\r\n    \r\n    clearFormData();\r\n    dispatch({ type: ACTIONS.NEGATE_IS_PASSWORD_FORGOTTEN });\r\n  }\r\n\r\n  const handleOnChange = (e) => {\r\n    if (e.target.id !== \"confirmSignUpPassword\")\r\n      dispatch({type: ACTIONS.CHANGE_USER_DATA, payload: { key: e.target.id, value: e.target.value }});\r\n  }\r\n\r\n  \r\n  // RETURN\r\n\r\n  return ReactDOM.createPortal (\r\n    <>\r\n    <div className=\"window__closer\" onClick={ handleCancel }></div>\r\n    { state.isPasswordForgotten \r\n    ? <div className=\"window window--forgotpassword\">\r\n\r\n        <header className=\"window__header\">\r\n          <h2 className=\"window__header__heading\">Forgotten password</h2>\r\n          <button\r\n            className=\"window__header__back-button\"\r\n            type=\"button\"\r\n            onClick={ handlePasswordRestoringWindow }\r\n            style={{ zIndex: 11 }}><FaChevronCircleLeft />\r\n          </button>\r\n          <button \r\n            className=\"window__header__add-button\"\r\n            type=\"button\"\r\n            onClick={ handlePasswordRestoring }\r\n            style={{ zIndex: 11 }}><FaChevronCircleRight />\r\n          </button>\r\n        </header>\r\n\r\n        <main className=\"window__main\">\r\n          <span className=\"window__main__input-line\">\r\n            <label className=\"window__main__input-line__label\" htmlFor=\"forgotPasswordEmail\">E-mail</label>\r\n            <input \r\n              className=\"window__main__input-line__input\" \r\n              type=\"email\" \r\n              id=\"forgotPasswordEmail\" \r\n              value={ state.formData.forgotPasswordEmail } \r\n              onChange={ handleOnChange } \r\n              placeholder={ state.warnings[\"forgotPasswordEmail\"] ? state.warnings[\"forgotPasswordEmail\"] : null }>\r\n            </input>\r\n          </span>\r\n        </main>\r\n\r\n        <section className=\"window__bottom\">\r\n          <button className=\"window__bottom__secondary-button\" type=\"button\" onClick={ handlePasswordRestoringWindow }>Cancel</button>\r\n          <button \r\n            className={ state.formData.forgotPasswordEmail ? \"window__bottom__primary-button\" : \"window__bottom__primary-button window__bottom__primary-button--disabled\"} \r\n            type=\"submit\" \r\n            disabled={ state.formData.forgotPasswordEmail ? false : true } \r\n            onClick={ state.formData.forgotPasswordEmail ? handlePasswordRestoring : null }>\r\n            Send\r\n          </button>\r\n        </section>\r\n      </div>\r\n    : null }\r\n\r\n    { isLogout \r\n      ? <div className=\"window window--logout\">\r\n          <header className=\"window__header\">\r\n            <h2 className=\"window__header__heading\">Log out?</h2>\r\n\r\n            <button \r\n              className=\"window__header__back-button\"\r\n              type=\"button\"\r\n              onClick={ handleCancel }\r\n              style={{ zIndex: 11 }}><FaChevronCircleLeft />\r\n            </button>\r\n\r\n            <button \r\n              className=\"window__header__add-button\"\r\n              type=\"button\"\r\n              onClick={ handleLogoutUser }\r\n              style={{ zIndex: 11 }}><FaChevronCircleRight />\r\n            </button>\r\n          </header>\r\n\r\n          <main className=\"window__main\">\r\n            <h3 className=\"window__main__section__title\">Confirm</h3>\r\n            <p className=\"window__main__message\">Are you sure you want to log out?</p>\r\n          </main>\r\n\r\n          <section className=\"window__bottom\">\r\n            <button className=\"window__bottom__secondary-button\" type=\"button\" onClick={ handleCancel }>Cancel</button>\r\n            <button className=\"window__bottom__primary-button\" type=\"button\" onClick={ handleLogoutUser }>Log out</button>\r\n          </section>\r\n        </div>\r\n\r\n      : <div className=\"window window--login\">\r\n          <header className=\"window__header\">\r\n            <h2 className=\"window__header__heading\">{ state.isSignUpWindow ? \"Sign up\" : \"Log in\"}</h2>\r\n            \r\n            <button \r\n              className=\"window__header__back-button\"\r\n              type=\"button\"\r\n              onClick={ handleCancel }\r\n              style={{ zIndex: 11 }}><FaChevronCircleLeft />\r\n            </button>\r\n\r\n            <button \r\n              className=\"window__header__add-button\"\r\n              type=\"submit\"\r\n              onClick={ handleLoginUser }\r\n              style={{ zIndex: 11 }}><FaChevronCircleRight />\r\n            </button>\r\n          </header>\r\n\r\n          { state.isSignUpWindow\r\n            ? <main className=\"window__main\">\r\n\r\n                <span className=\"window__main__input-line\">\r\n                  <label className=\"window__main__input-line__label\" htmlFor=\"signUpUsername\">Username</label>\r\n                  <input \r\n                    className=\"window__main__input-line__input\" \r\n                    type=\"text\" \r\n                    id=\"signUpUsername\" \r\n                    value={ state.formData.signUpUsername }\r\n                    onChange={ handleOnChange } \r\n                    placeholder={ state.warnings[\"signUpUsername\" ] ? state.warnings[\"signUpUsername\" ] : null }>\r\n                  </input>\r\n                </span>\r\n\r\n                <span className=\"window__main__input-line\">\r\n                  <label className=\"window__main__input-line__label\" htmlFor=\"signUpEmail\">Email</label>\r\n                  <input \r\n                    className=\"window__main__input-line__input\" \r\n                    type=\"email\" \r\n                    id=\"signUpEmail\" \r\n                    value={ state.formData.signUpEmail } \r\n                    onChange={ handleOnChange } \r\n                    placeholder={ state.warnings[\"signUpEmail\"] ? state.warnings[\"signUpEmail\"] : null }>\r\n                  </input>\r\n                </span>\r\n\r\n                <span className=\"window__main__input-line\">\r\n                  <label className=\"window__main__input-line__label\" htmlFor=\"signUpPassword\">Password</label>\r\n                  <input \r\n                    className=\"window__main__input-line__input\" \r\n                    type=\"password\" \r\n                    id=\"signUpPassword\" \r\n                    value={ state.formData.signUpPassword } \r\n                    onChange={ handleOnChange } \r\n                    placeholder={ state.warnings[\"signUpPassword\"] ? state.warnings[\"signUpPassword\"] : null }>\r\n                  </input>\r\n                </span>\r\n\r\n                <span className=\"window__main__input-line\">\r\n                  <label className=\"window__main__input-line__label\" htmlFor=\"signUpConfirmPassword\">Confirm Password</label>\r\n                  <input \r\n                    className=\"window__main__input-line__input\" \r\n                    type=\"password\" \r\n                    id=\"signUpConfirmPassword\" \r\n                    value={ state.formData.signUpConfirmPassword }\r\n                    onChange={ handleOnChange } \r\n                    placeholder={ state.warnings[\"signUpConfirmPassword\"] ? state.warnings[\"signUpConfirmPassword\"] : null }>\r\n                  </input>\r\n                </span>\r\n\r\n                <section className=\"window__main__login-options\">\r\n                  <span className=\"window__main__login-options__line\">{`Already had an account? `}\r\n                  </span>\r\n                  <span className=\"window__main__login-options__line\">\r\n                    <a className=\"window__main__login-options__line__link\" onClick={ handleFormTypeChanging } href=\"\">Log in</a>\r\n                  </span>\r\n                </section>\r\n              </main>\r\n\r\n            : <main className=\"window__main\">\r\n\r\n                <span className=\"window__main__input-line\">\r\n                  <label className=\"window__main__input-line__label\" htmlFor=\"logInUsername\">Username</label>\r\n                  <input \r\n                    className=\"window__main__input-line__input\" \r\n                    type=\"text\" \r\n                    id=\"logInUsername\" \r\n                    value={ state.formData.logInUsername } \r\n                    onChange={ handleOnChange } \r\n                    placeholder={ state.warnings[\"logInUsername\"] ? state.warnings[\"logInUsername\"] : null }>\r\n                  </input>\r\n                </span>\r\n\r\n                <span className=\"window__main__input-line\">\r\n                  <label className=\"window__main__input-line__label\" htmlFor=\"logInPassword\">Password</label>\r\n                  <input \r\n                    className=\"window__main__input-line__input\" \r\n                    type=\"password\" \r\n                    id=\"logInPassword\" \r\n                    value={ state.formData.logInPassword } \r\n                    onChange={ handleOnChange } \r\n                    placeholder={ state.warnings[\"logInPassword\"] ? state.warnings[\"logInPassword\"] : null }>\r\n                  </input>\r\n                  <a className=\"window__main__input-line__link\" href=\"\" onClick={ handlePasswordRestoringWindow }>Forgot your password?</a>\r\n                </span>\r\n\r\n                <section className=\"window__main__login-options\">\r\n                  <span className=\"window__main__login-options__line\">{`Don't have an account? `}\r\n                  </span>\r\n                  <span className=\"window__main__login-options__line\">\r\n                    <a className=\"window__main__login-options__line__link\" onClick={ handleFormTypeChanging } href=\"\">Sign up</a>\r\n                  </span>\r\n                </section>\r\n              </main>\r\n          }\r\n          \r\n          <section className=\"window__bottom\">\r\n            <button className=\"window__bottom__secondary-button\" type=\"button\" onClick={ handleCancel }>Cancel</button>\r\n            <button \r\n              className={ state.isFormCompleted ? \"window__bottom__primary-button\" : \"window__bottom__primary-button window__bottom__primary-button--disabled\"} \r\n              type=\"submit\" \r\n              disabled={ state.isFormCompleted ? false : true } \r\n              onClick={ state.isFormCompleted ? handlePrimaryButton : null }>\r\n              { state.isSignUpWindow ? \"Sign up\" : \"Log in\"}\r\n            </button>\r\n          </section>\r\n        </div>\r\n    }\r\n    </>,\r\n    document.getElementById('portal')\r\n  )\r\n}","export default __webpack_public_path__ + \"static/media/logo_white.cf6920f8.png\";","// IMPORTS\n\n// portal isn't 100vh on mobile\n// login info\n// sometimes gauges don't refresh after saving settings\n\nimport { React, useReducer, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { Logo, Title, Hamburger, MenuItem, Quotation, Account } from './components/left/left';\nimport DateChanger from './components/center/DateChanger';\nimport Meal from './components/meal/Meal';\nimport Gauge from './components/right/Gauge';\nimport Exercise from './components/exercise/Exercise';\nimport Settings from './components/settings/Settings';\nimport About from './components/about/About';\nimport Login from './components/login/Login';\nimport { exercises } from './exercisesList';\n\nimport logo from '../src/logo_white.png';\nimport './styles/index/index.css';\nimport './components/left/styles/left.css';\nimport './components/center/styles/center.css';\nimport './components/right/styles/right.css';\n\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore, collection, getDocs, setDoc, doc } from \"firebase/firestore\";\n\n\n// FUNCTIONS\n\nconst countPercentOfEatenIngredient = (eatenAmount, maxAmount) => {\n  if (Number.isNaN((Math.round(eatenAmount / maxAmount * 100))))\n    return 0;\n  else\n    return Math.round(eatenAmount / maxAmount * 100);\n}\n\nconst countAmountOfIngredientLeft = (eatenAmount, maxAmount) => {\n  if (eatenAmount >= maxAmount)\n    return 0;\n  else\n    return maxAmount - eatenAmount;\n}\n\n\n// VARIABLES\n\nconst ACTIONS = {\n  SET_BOOLEAN_STATE: 'set-boolean-state',\n  UPDATE_MEALS_INGREDIENTS_SUMMARY: 'update-meals-ingredients-summary',\n  UPDATE_DAILY_INGREDIENTS_SUMMARY: 'update-daily-ingredients-summary',\n  COUNT_GAUGES_DATA: 'count-gauges-data',\n  CHANGE_DATE: 'change-date',\n  CHANGE_PAGE_TITLE: 'change-page-title',\n  RESET_GAUGES: 'reset-gauges',\n  LOAD_SETTINGS: 'load-settings',\n  SET_WINDOW: 'set-window',\n  SET_USER_STATUS: 'set-user-status',\n  CHANGE_HAMBURGER_STATE: 'change-hamburger-state',\n  UPDATE_WINDOW_WIDTH: 'update-window-width',\n  SET_NEW_SETTINGS: 'set-new-settings',\n  SET_USER_ID: 'set-user-id',\n  SET_USER_PERSONAL_DATA: 'set-user-personal-data',\n  SET_USERNAME: 'set-username'\n}\n\nconst initialState = {\n  dateIds: { dayId: 0, monthId: 0, yearId: 0 },\n  pageTitle: 'Dashboard',\n  previousPageTitle: 'Dashboard',\n  isLoginWindowEnabled: false,\n  isSettingsWindowEnabled: false,\n  isAboutWindowEnabled: false,\n  isAddWindowsEnabled: false,\n  isRemoveWindowsEnabled: false,\n  isMoreWindowsEnabled: false,\n  hamburgerState: false,\n  accountState: false,\n  windowWidth: window.innerWidth,\n  userStatus: \"Log in\",\n  userId: 0,\n  username: \"\",\n  mealsIngredientsSummary: [],\n  dailyIngredientsSummary: { kcal: 0, proteins: 0, fats: 0, carbs: 0 },\n  gaugesData: {\n    kcal: { eaten: 0, left: 0, max: 0, percent: 0 },\n    proteins: { eaten: 0, left: 0, max: 0, percent: 0 },\n    fats: { eaten: 0, left: 0, max: 0, percent: 0 },\n    carbs: { eaten: 0, left: 0, max: 0, percent: 0 }\n  },\n\n  settingsData: {\n    account: {\n      username: \"\",\n      email: \"\",\n      password: \"\"\n    },\n\n    nutrition: {\n      dailyDemand: { kcal: 2000, proteins: 120, fats: 55, carbs: 240 },\n      namesOfMeals: { 0: \"Breakfast\", 1: \"II Breakfast\", 2: \"Lunch\", 3: \"Snack\", 4: \"Dinner\", 5: \"\", 6: \"\", 7: \"\", 8: \"\", 9: \"\" },\n      numberOfMeals: 5\n    },\n\n    training: {\n      selectedExercises: [0, 1, 2, 3, 4]\n    }\n  },\n\n  clearAllProducts: false,\n  clearAllSeries: false,\n  isSettingsChanged: false\n}\n\nconst firebaseApp = initializeApp({\n  apiKey: \"AIzaSyBw4pfmnfKQq187qJJ4UZ0VLtxhg8Ymy3E\",\n  authDomain: \"dietapp-557db.firebaseapp.com\",\n  projectId: \"dietapp-557db\"\n});\n\nexport const db = getFirestore();\n\n\n// COMPONENTS\n\nfunction App() {\n\n  // HOOKS\n\n  const reducer = (state, action) => {\n    switch (action.type) {\n\n      case ACTIONS.SET_BOOLEAN_STATE: {\n        return { ...state, [action.payload.state]: action.payload.value }\n      }\n\n      case ACTIONS.UPDATE_MEALS_INGREDIENTS_SUMMARY: {\n        const newMealsIngredientsSummary = [...state.mealsIngredientsSummary];\n\n        newMealsIngredientsSummary[action.payload.mealId] = {\n                                                              proteins: action.payload.data.proteins,\n                                                              fats: action.payload.data.fats, \n                                                              carbs: action.payload.data.carbs, \n                                                              kcal: action.payload.data.kcal };\n\n        return {...state, mealsIngredientsSummary: newMealsIngredientsSummary};                                                                 \n      }\n\n      case ACTIONS.UPDATE_DAILY_INGREDIENTS_SUMMARY: {\n        let dailyIngredientsSum = { proteins: 0, fats: 0, carbs: 0, kcal: 0 };\n        let mealsIngredientsSum = { proteins: 0, fats: 0, carbs: 0, kcal: 0 };\n\n        state.mealsIngredientsSummary.forEach(meal => {\n          mealsIngredientsSum = {\n                                  proteins: meal.proteins,\n                                  fats:     meal.fats,\n                                  carbs:    meal.carbs,\n                                  kcal:     meal.kcal };\n\n          dailyIngredientsSum = {\n                                  proteins: dailyIngredientsSum.proteins + mealsIngredientsSum.proteins,\n                                  fats:     dailyIngredientsSum.fats     + mealsIngredientsSum.fats,\n                                  carbs:    dailyIngredientsSum.carbs    + mealsIngredientsSum.carbs,\n                                  kcal:     dailyIngredientsSum.kcal     + mealsIngredientsSum.kcal };\n\n          mealsIngredientsSum = { proteins: 0,\n                                  fats: 0,\n                                  carbs: 0,\n                                  kcalS: 0 };\n        });\n\n        return {...state, dailyIngredientsSummary: dailyIngredientsSum };\n      }\n\n      case ACTIONS.COUNT_GAUGES_DATA: {\n        const ingredient = action.payload.typeOfIngredient;\n        \n        return {...state, gaugesData: {...state.gaugesData, \n          [ingredient]: { \n            eaten: state.dailyIngredientsSummary[ingredient], \n            left: countAmountOfIngredientLeft(state.dailyIngredientsSummary[ingredient], state.settingsData.nutrition.dailyDemand[ingredient]), \n            max: state.settingsData.nutrition.dailyDemand[ingredient], \n            percent: countPercentOfEatenIngredient(state.dailyIngredientsSummary[ingredient], state.settingsData.nutrition.dailyDemand[ingredient]) }\n          }\n        }\n      }\n\n      case ACTIONS.RESET_GAUGES: {\n        return { ...state, gaugesData: initialState.gaugesData }\n      }\n\n      case ACTIONS.CHANGE_DATE: {\n        return {...state, dateIds: { dayId: action.payload.currentDay,  \n                                     monthId: action.payload.currentMonth,\n                                     yearId: action.payload.currentYear }};\n      }\n\n      case ACTIONS.CHANGE_PAGE_TITLE: {\n        return {...state, previousPageTitle: state.pageTitle, pageTitle: action.payload};\n      }\n      \n      case ACTIONS.LOAD_SETTINGS: {\n        let newSettings = JSON.parse(localStorage.getItem(\"settings\"));\n        return {...state, settingsData: newSettings }\n      }\n\n      case ACTIONS.SET_WINDOW: {\n        return {...state, [action.payload.window]: action.payload.value }\n      }\n\n      case ACTIONS.SET_USER_STATUS: {\n        return {...state, userStatus: action.payload}\n      }\n\n      case ACTIONS.CHANGE_HAMBURGER_STATE: {\n        return { ...state, hamburgerState: action.payload }\n      }\n\n      case ACTIONS.UPDATE_WINDOW_WIDTH: {\n        return { ...state, windowWidth: window.innerWidth };\n      }\n\n      case ACTIONS.SET_USER_NAME: {\n        return { ...state, userName: action.payload }\n      }\n\n      case ACTIONS.SET_NEW_SETTINGS: {\n        return { ...state, settingsData: action.payload }\n      }\n\n      case ACTIONS.SET_USER_ID: {\n        return { ...state, userId: action.payload }\n      }\n\n      case ACTIONS.SET_USERNAME: {\n        return { ...state, username: action.payload }\n      }\n\n      case ACTIONS.SET_USER_PERSONAL_DATA: {\n        return { ...state, settingsData: { ...state.settingsData, account: action.payload }};\n      }\n\n      default: return console.error(`Unknown action type: ${action.type}`);\n    }\n  }\n  const [state, dispatch] = useReducer(reducer, initialState);\n  \n\n  // VARIABLES\n\n  const MENU_CATEGORIES = [state.userStatus, \"Nutrition\", \"Training\", \"Settings\", \"About\"];\n\n\n  // EFFECTS\n\n  // GET USER NAME AND STATUS FROM COOKIE\n  useEffect(() => {\n\n    // IF COOKIE EXIST THEN LOAD IT\n    if (document.cookie) {\n      const cookie = document.cookie.split(\";\");  // user=default; status=Log in\n      let cookieData = {};\n\n      cookie.forEach(data => {\n        let key = data.split(\"=\")[0];\n        let value = data.split(\"=\")[1];\n        cookieData[key.trim()] = value.trim();\n      });\n  \n      dispatch({ type: ACTIONS.SET_USER_STATUS, payload: cookieData.status });\n      dispatch({ type: ACTIONS.SET_USER_ID, payload: cookieData.user });\n    }\n\n    // IF COOKIE NOT EXIST THEN MAKE IT WITH DEFAULT DATA\n    else {\n      document.cookie = \"user=\" + state.userId;\n      document.cookie = \"status=\" + state.userStatus;\n    }\n    \n  }, []);\n\n  // UPDATE COOKIE DATA AFTER CHANGE OF USER STATUS\n  useEffect(() => {\n    document.cookie = \"user=\" + state.userId;\n    document.cookie = \"status=\" + state.userStatus;\n\n  }, [ state.userStatus, state.userId ]);\n\n  // WINDOW WIDTH STUFF\n  useEffect(() => {\n    // WINDOW REAL HEIGHT COUNTING\n    let vh = window.innerHeight * 0.01;\n    const hamburger = document.querySelector(\".left-section__hamburger\");\n    const accountIcon = document.querySelector(\".left-section__account\");\n    \n    document.documentElement.style.setProperty('--vh', `${vh}px`);\n\n    window.addEventListener(\"resize\", () => {\n      dispatch({ type: ACTIONS.UPDATE_WINDOW_WIDTH });\n      dispatch({ type: ACTIONS.CHANGE_HAMBURGER_STATE, payload: false });\n\n      if (window.innerWidth < 769 || (state.isLoginWindowEnabled || state.isSettingsWindowEnabled || state.isAboutWindowEnabled)) {\n        hamburger.style.display = \"flex\";\n        accountIcon.style.display = \"flex\"; \n      }\n        \n      else {\n        accountIcon.style.display = \"none\"; \n        hamburger.style.display = \"none\";\n      }\n\n      // WINDOW REAL HEIGHT COUNTING AFTER RESIZING\n      vh = window.innerHeight * 0.01;\n      document.documentElement.style.setProperty('--vh', `${vh}px`);\n    });\n\n  }, []);\n\n  const saveSettingsToDatabase = async (user) => {\n    try {\n      await setDoc(doc(db, \"users\", String(user.id)), {\n        settings: state.settingsData\n      }, \n      { merge: true });\n    }\n    catch (e) {\n      console.error(e);\n    }\n  }\n\n  const getSettingsFromDatabase = async () => {\n    try {\n      const querySnapshot = await getDocs(collection(db, \"users\"));\n      querySnapshot.forEach(user => {\n        if (user.id === state.userId) {\n          if (user.data().settings) {\n            dispatch({ type: ACTIONS.SET_NEW_SETTINGS, payload: user.data().settings });\n          }\n          else\n            saveSettingsToDatabase(user);\n\n          getUsername();\n          updateGauges();\n        }\n      });\n    }\n    catch (e) {\n      console.error(e);\n    }\n  }\n\n  const getUsername = async () => {\n    try {\n      const querySnapshot = await getDocs(collection(db, \"users\"));\n      querySnapshot.forEach(user => {\n        if (user.id === state.userId) {\n          if (user.data().username)\n            dispatch({ type: ACTIONS.SET_USERNAME, payload: user.data().username });\n        }\n      });\n    }\n    catch (e) {\n      console.error(e);\n    }\n  }\n\n  // LOADS SETTINGS\n  useEffect(() => {\n    if (state.userStatus === \"Logged\") {\n      getSettingsFromDatabase();\n      updateGauges();\n    }\n      \n    else {\n      dispatch({ type: ACTIONS.SET_NEW_SETTINGS, payload: initialState.settingsData });\n      dispatch({ type: ACTIONS.RESET_GAUGES });\n    }\n      \n  }, [ state.userStatus ]);\n\n  // TIMEOUT AFTER CHANGING DATE\n  useEffect(() => {\n    const dateChanger = document.querySelector(\".center-section__top__date-changer\");\n    dateChanger.style.pointerEvents = \"none\";\n    setTimeout(() => { dateChanger.style.pointerEvents = \"auto\" }, 100);\n\n  }, [ state.dateIds ])\n\n  // BLURING AND DISABLING POINTER EVENTS ON BACKGROUND AFTER LOG IN WINDOW MOUNTING \n  useEffect(() => {\n    if (state.hamburgerState)\n      dispatch({ type: ACTIONS.SET_BOOLEAN_STATE, payload: { state: \"hamburgerState\", value: false } });\n\n    if (state.accountState)\n      dispatch({ type: ACTIONS.SET_BOOLEAN_STATE, payload: { state: \"accountState\", value: false } });\n\n  }, [ state.isLoginWindowEnabled, state.isSettingsWindowEnabled, state.isAboutWindowEnabled ]);\n\n  // TRANSFORMS HAMBURGER AND MENU\n  useEffect(() => {\n    const wrapper = document.querySelector(\".wrapper\");\n    const menu = document.querySelector(\".left-section__menu-container\");\n    const menuCloser = document.querySelector(\".left-section__menu-container__closer\");\n    const hamburger = document.querySelector(\".left-section__hamburger\");\n    const hamburgerLines = document.querySelectorAll(\".left-section__hamburger__line\");\n\n    if (state.windowWidth < 769) {\n      if (state.hamburgerState) {\n        wrapper.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\n        wrapper.style.pointerEvents = \"none\";\n        hamburger.style.zIndex = \"6\";\n        menu.style.display = \"flex\";\n        menuCloser.style.display = \"block\";\n        hamburgerLines[0].style.cssText =\"left: 0px; background: #FFFFFF; width: 100%; transform: rotate(45deg); border-radius: 10px\";\n        hamburgerLines[1].style.cssText =\"left: 10px; background: #FFFFFF; visibility: hidden\";\n        hamburgerLines[2].style.cssText =\"left: 0px; background: #FFFFFF; width: 100%; transform: rotate(-45deg); border-radius: 10px\";\n      }\n\n      else {\n        hamburger.style.zIndex = \"1\";\n        menu.style.display = \"none\";\n        menuCloser.style.display = \"none\";\n        hamburgerLines[0].style.cssText =\"left: 0px; background: #7500AF; width: 8px; transform: rotate(0deg); border-radius: 50%\";\n        hamburgerLines[1].style.cssText =\"left: 10px; background: #7500AF; visibility: visible\";\n        hamburgerLines[2].style.cssText =\"left: 20px; background: #7500AF; width: 8px; transform: rotate(0deg); border-radius: 50%\";\n        \n        if (!state.isLoginWindowEnabled && !state.isSettingsWindowEnabled && !state.isAboutWindowEnabled) {\n          wrapper.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\n          wrapper.style.pointerEvents = \"auto\";\n        }\n      }\n    }\n    \n  }, [ state.hamburgerState ]);\n\n  // TRANSFORMS HAMBURGER AND MENU\n  useEffect(() => {\n    const wrapper = document.querySelector(\".wrapper\");\n    const accountIcon = document.querySelector(\".left-section__account\");\n    const accountCloser = document.querySelector(\".left-section__account-container__closer\");\n    const accountContainer = document.querySelector(\".left-section__account-container\");\n\n\n    if (state.windowWidth < 769) {\n      if (state.accountState) {\n        accountIcon.style.zIndex = \"6\";\n        accountIcon.style.color = \"#FFFFFF\";\n        accountContainer.style.display = \"flex\";\n        accountCloser.style.display = \"block\";\n        wrapper.style.filter = \"blur(5px) opacity(40%) grayscale(100%)\";\n        wrapper.style.pointerEvents = \"none\";\n      }\n\n      else {\n        accountIcon.style.zIndex = \"1\";\n        accountIcon.style.color = \"#7500AF\";\n        accountContainer.style.display = \"none\";\n        accountCloser.style.display = \"none\";\n\n        if (!state.isLoginWindowEnabled && !state.isSettingsWindowEnabled) {\n          wrapper.style.filter = \"blur(0px) opacity(100%) grayscale(0%)\";\n          wrapper.style.pointerEvents = \"auto\";\n        }\n      }\n    }\n    \n  }, [ state.accountState ]);\n\n  // RELOADS SETTINGS FROM DATABASE AFTER OPENING SETTINGS WINDOW\n  useEffect(() => {\n    getSettingsFromDatabase();\n\n  }, [ state.isSettingsWindowEnabled ]);\n\n  \n  // FUNCTIONS\n\n  const updateMealSummary = (object, mealId) => {\n    dispatch({ type: ACTIONS.UPDATE_MEALS_INGREDIENTS_SUMMARY, payload: {data: object, mealId: mealId} });\n    updateDailySummary();\n  } \n\n  const updateDailySummary = () => {\n    dispatch({ type: ACTIONS.UPDATE_DAILY_INGREDIENTS_SUMMARY });\n    updateGauges();\n  }\n\n  const updateGauges = () => {\n    Object.keys(state.settingsData.nutrition.dailyDemand).forEach(ingredient => {\n      dispatch({ type: ACTIONS.COUNT_GAUGES_DATA, payload: { typeOfIngredient: ingredient} });\n    });\n  }\n\n  const updateDateIds = (newDateIds) => {\n    dispatch({ type: ACTIONS.CHANGE_DATE, payload: newDateIds })\n  }\n\n  const setUserId = (newUserId) => {\n    dispatch({ type: ACTIONS.SET_USER_ID, payload: newUserId });\n  }\n\n  const setUserPersonalData = (newUsername, newEmail, newPassword) => {\n    dispatch({ type: ACTIONS.SET_USER_PERSONAL_DATA, payload: { username: newUsername, email: newEmail, password: newPassword }});\n  }\n\n  const changePageTitle = (categoryTitle) => {\n    let newPageTitle = '';\n\n    if (categoryTitle === 'Nutrition')\n      newPageTitle = 'Dashboard';\n    else\n      newPageTitle = categoryTitle;\n\n    dispatch({type: ACTIONS.CHANGE_PAGE_TITLE, payload: newPageTitle });\n    dispatch({ type: ACTIONS.CHANGE_HAMBURGER_STATE, payload: false });\n  }\n\n  const handleMenu = (categoryTitle) => {\n    if (state.userStatus !== \"Log in\") {\n      switch (categoryTitle) {\n        case state.userStatus: {\n          dispatch({ type: ACTIONS.SET_WINDOW, payload: { window: \"isLoginWindowEnabled\", value: true } });\n          break;\n        }\n        case \"Nutrition\": {\n          changePageTitle(categoryTitle);\n          break;\n        }\n        case \"Training\": {\n          changePageTitle(categoryTitle);\n          break;\n        }\n        case \"Settings\": {\n          dispatch({ type: ACTIONS.SET_WINDOW, payload: { window: \"isSettingsWindowEnabled\", value: true } });\n          break;\n        }\n        case \"About\": {\n          dispatch({ type: ACTIONS.SET_WINDOW, payload: { window: \"isAboutWindowEnabled\", value: true } });\n          break;\n        }\n      }\n    }\n\n    else {\n      dispatch({ type: ACTIONS.SET_WINDOW, payload: { window: \"isLoginWindowEnabled\", value: true } });\n    }\n  }\n\n  const closeLoginWindow = () => {\n    dispatch({ type: ACTIONS.SET_WINDOW, payload: { window: \"isLoginWindowEnabled\", value: false } });\n  }\n\n  const closeSettingsWindow = () => {\n    dispatch({ type: ACTIONS.SET_WINDOW, payload: { window: \"isSettingsWindowEnabled\", value: false } });\n  }\n\n  const closeAboutWindow = () => {\n    dispatch({ type: ACTIONS.SET_WINDOW, payload: { window: \"isAboutWindowEnabled\", value: false } });\n  }\n\n  const setUserStatus = (newStatus) => {\n    dispatch({ type: ACTIONS.SET_USER_STATUS, payload: newStatus });\n  }\n\n  const handleHamburger = () => {\n    if (state.hamburgerState) {\n      dispatch({ type: ACTIONS.SET_BOOLEAN_STATE, payload: { state: \"hamburgerState\", value: false } })\n    }\n    else {\n      dispatch({ type: ACTIONS.SET_BOOLEAN_STATE, payload: { state: \"hamburgerState\", value: true } })\n    }\n  }\n\n  const handleAccount = () => {\n    if (state.accountState) {\n      dispatch({ type: ACTIONS.SET_BOOLEAN_STATE, payload: { state: \"accountState\", value: false } })\n    }\n    else {\n      dispatch({ type: ACTIONS.SET_BOOLEAN_STATE, payload: { state: \"accountState\", value: true } })\n    }\n  }\n\n  const settingsShortcut = (e) => {\n    e.preventDefault();\n    handleMenu(\"Settings\");\n  }\n\n  const loginShortcut = (e) => {\n    e.preventDefault();\n    handleMenu(state.userStatus);\n  }\n\n  \n  // RETURN\n\n  return (\n    <>\n\n    { state.isLoginWindowEnabled &&\n\n          <Login \n            setUserStatus={ setUserStatus }\n            setUserId={ setUserId }\n            setUserPersonalData={ setUserPersonalData }\n            isLogout={ state.userStatus === \"Logged\" ? true : false }\n            closeWindow={ closeLoginWindow }\n          /> \n\n    }\n\n    { state.isSettingsWindowEnabled &&\n  \n          <Settings \n            initialData={ initialState.settingsData }\n            updateGauges={ updateGauges }\n            userId={ state.userId } \n            closeWindow={ closeSettingsWindow } \n          />\n\n    }\n\n    { state.isAboutWindowEnabled  &&\n\n      <About \n        closeWindow={ closeAboutWindow }\n      />\n    }\n\n    <Account\n      isLogged={ state.userStatus === \"Logged\" ? true : false }\n      handleAccount={ state.userStatus === \"Logged\" ? handleAccount : loginShortcut }\n    />\n\n    <Hamburger \n      handleHamburger={ handleHamburger } \n    />\n\n    { state.windowWidth < 769 &&\n      <>\n        <div className=\"left-section__menu-container__closer\" onClick={ state.hamburgerState ? handleHamburger : null }></div>\n        <ul className=\"left-section__menu-container\">\n\n          { MENU_CATEGORIES.map((category, index) => {\n              return <MenuItem key={ index } value={ category } href=\"\" isActive={ false } linkTo={ handleMenu } />\n            })\n          }\n\n          <div className=\"left-section__menu-container__logo\">\n            <img src={ logo } alt=\"Dietapp logo\"></img>\n          </div>\n\n        </ul>\n      </>\n    }\n\n    { state.windowWidth < 769 &&\n      <>\n        <div className=\"left-section__account-container__closer\" onClick={ state.accountState ? handleAccount : null }></div>\n        <aside className=\"left-section__account-container\">\n          <section className=\"left-section__account-container__user-info\">\n            <img className=\"left-section__account-container__user-info__photo\" src={ logo }></img>\n            <h3 className=\"left-section__account-container__user-info__username\">{ state.username }</h3>\n          </section>\n\n          <ul className=\"left-section__account-container__list\">\n            <li className=\"left-section__menu-container__list-item\" onClick={ settingsShortcut }>\n              <a className=\"left-section__menu-container__list-item__content\">Settings</a>\n            </li>\n            <li className=\"left-section__menu-container__list-item\" onClick={ loginShortcut }>\n              <a className=\"left-section__menu-container__list-item__content\">Log out</a>\n            </li>\n          </ul>\n\n          <div className=\"left-section__account-container__logo\">\n            <img src={ logo } alt=\"Dietapp logo\"></img>\n          </div>\n        </aside>\n      </>\n    }\n\n    <div className=\"wrapper\">\n\n      <aside className=\"left-section\">\n\n        <header className=\"left-section__logo-container\" onClick={ loginShortcut }>\n          <Logo />\n          <Title />\n        </header>\n\n        { state.windowWidth > 768 && \n          <ul className=\"left-section__menu-container\">\n\n            { MENU_CATEGORIES.map((category, index) => {\n                return <MenuItem key={ index } value={ category } href=\"\" isActive={ false } linkTo={ handleMenu } />\n              })\n            }\n\n          </ul>\n        }\n        \n        <h2 className=\"left-section__quotation-container\">\n          <Quotation />\n        </h2>\n        \n      </aside>\n\n\n      <main className=\"center-section\">\n\n        <section className=\"center-section__top\">\n        \n          <h3 className=\"center-section__top__title\">{ state.pageTitle }</h3>\n\n          { ((state.pageTitle === 'Dashboard') || (state.pageTitle === 'Training')) && \n            <DateChanger \n              changeDate={ updateDateIds } \n              loginShortcut={ loginShortcut }\n              userStatus={ state.userStatus } />\n          }\n\n        </section>\n\n      \n        <section className=\"center-section__main\">\n\n        { state.pageTitle === 'Training' &&\n\n          state.settingsData.training.selectedExercises.map(selectedExerciseId => {\n            return (\n              <Exercise\n                key={ selectedExerciseId }\n                userId={ state.userId }\n                userStatus={ state.userStatus }\n                exerciseId={ selectedExerciseId } \n                dateIds={ state.dateIds } \n                name={ exercises[selectedExerciseId].name } \n                difficulty={ exercises[selectedExerciseId].difficulty } \n                description={ exercises[selectedExerciseId].description } \n                muscles={ exercises[selectedExerciseId].muscles } \n                typeOfExercise={ exercises[selectedExerciseId].typeOfExercise } \n                properFormLink={ exercises[selectedExerciseId].properFormLink }\n                loginShortcut={ loginShortcut }>\n              </Exercise>\n            )})\n        }\n\n        { state.pageTitle === 'Dashboard' && \n\n          Object.values(state.settingsData.nutrition.namesOfMeals).map((meal, index) => {\n            if (state.settingsData.nutrition.numberOfMeals > index)\n              return (\n                <Meal \n                  key={ index } \n                  userId={ state.userId } \n                  userStatus={ state.userStatus }\n                  pageTitle={ state.pageTitle } \n                  isSettingsOpened={ state.isSettingsWindowEnabled } \n                  name={ meal } \n                  mealId={ index } \n                  dateIds={ state.dateIds } \n                  updateGauges={ updateMealSummary } \n                  loginShortcut={ loginShortcut }>\n                </Meal>\n            )})\n        }\n\n        </section>\n\n\n      </main>\n\n\n      <aside className=\"right-section\" onClick={ settingsShortcut }>\n\n        <Gauge \n          amount={ state.gaugesData.kcal.eaten }\n          name=\"kcal\"\n          percent={ state.gaugesData.kcal.percent }\n          left={ state.gaugesData.kcal.left }\n          isKcal={true} />\n\n        <Gauge \n          amount={ state.gaugesData.proteins.eaten }\n          name=\"proteins\" \n          percent={ state.gaugesData.proteins.percent }\n          left={ state.gaugesData.proteins.left } />\n        \n        <Gauge \n          amount={ state.gaugesData.fats.eaten }\n          name=\"fats\" \n          percent={ state.gaugesData.fats.percent }\n          left={ state.gaugesData.fats.left } />\n        \n        <Gauge \n          amount={ state.gaugesData.carbs.eaten }   \n          name=\"carbohydrates\" \n          percent={ state.gaugesData.carbs.percent }\n          left={ state.gaugesData.carbs.left } />\n\n      </aside>\n\n\n    </div>\n    </>\n  )\n}\n\n\n// RENDERING\n\nReactDOM.render(<App />, document.querySelector(\"#root\"));"],"sourceRoot":""}